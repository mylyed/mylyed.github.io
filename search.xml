<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>hexo的简单使用</title>
    <url>/2017/06/08/hexo/</url>
    <content><![CDATA[<h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<h3 id="创建一个应用"><a href="#创建一个应用" class="headerlink" title="创建一个应用"></a>创建一个应用</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new 应用名</span><br></pre></td></tr></table></figure>

<p>官方用法: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="运行服务-用于本地查看站点"><a href="#运行服务-用于本地查看站点" class="headerlink" title="运行服务(用于本地查看站点)"></a>运行服务(用于本地查看站点)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>官方用法: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>官方用法: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>官方用法: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>
<p>###命令简化</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>
<h3 id="window一条龙"><a href="#window一条龙" class="headerlink" title="window一条龙"></a>window一条龙</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line"><span class="comment">#直接用保存成.sh文件 双击就可以666了</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>教程</tag>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title>Node js 文件服务器</title>
    <url>/2017/10/15/nodejs-file-servier/</url>
    <content><![CDATA[<p>用nodejs 写一个文件服务器(还需改进)<br> <span id="more"></span></p>
<h2 id="默认配置如下"><a href="#默认配置如下" class="headerlink" title="默认配置如下"></a>默认配置如下</h2><ul>
<li>端口号:80</li>
<li>资源路径为 public</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//服务器端口号</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">PORT</span> = <span class="number">80</span>;</span><br><span class="line"><span class="comment">//资源路径</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">RESOURCES_PATH</span> = <span class="string">&#x27;public&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//http模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">// 用于解析url</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cluster = <span class="built_in">require</span>(<span class="string">&#x27;cluster&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//支持多进程多核处理</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">CPUS</span> = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;cpu核心数:&#x27;</span> + <span class="variable constant_">CPUS</span>)</span><br><span class="line"><span class="keyword">if</span> (cluster.<span class="property">isMaster</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;master start...&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable constant_">CPUS</span>; i++) &#123;</span><br><span class="line">        cluster.<span class="title function_">fork</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">createServer</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建服务器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createServer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> pathname = url.<span class="title function_">parse</span>(<span class="built_in">decodeURI</span>(request.<span class="property">url</span>)).<span class="property">pathname</span>;</span><br><span class="line">        <span class="keyword">var</span> realPath = path.<span class="title function_">join</span>(<span class="variable constant_">RESOURCES_PATH</span>, pathname);</span><br><span class="line">        <span class="comment">//获取后缀</span></span><br><span class="line">        <span class="keyword">var</span> ext = path.<span class="title function_">extname</span>(realPath);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ext)</span><br><span class="line">        <span class="keyword">if</span> (!ext) &#123;</span><br><span class="line">            <span class="comment">//没有后缀</span></span><br><span class="line">            response.<span class="title function_">writeHead</span>(<span class="number">405</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain;charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">            response.<span class="title function_">write</span>(<span class="string">&#x27;NOT SUPOT&#x27;</span>);</span><br><span class="line">            response.<span class="title function_">end</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fs.<span class="title function_">exists</span>(realPath, <span class="keyword">function</span> (<span class="params">exists</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!exists) &#123;</span><br><span class="line">                    <span class="comment">//文件不存在</span></span><br><span class="line">                    response.<span class="title function_">writeHead</span>(<span class="number">404</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain;charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">                    response.<span class="title function_">write</span>(<span class="string">&#x27;file not found&#x27;</span>);</span><br><span class="line">                    response.<span class="title function_">end</span>();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    fs.<span class="title function_">readFile</span>(realPath, <span class="keyword">function</span> (<span class="params">err, file</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                            response.<span class="title function_">writeHead</span>(<span class="number">500</span>, &#123;</span><br><span class="line">                                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">                            &#125;);</span><br><span class="line">                            response.<span class="title function_">write</span>(<span class="string">&#x27;read file error! try again&#x27;</span>);</span><br><span class="line">                            response.<span class="title function_">end</span>(err);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">var</span> contentType = <span class="title function_">getType</span>(ext.<span class="title function_">slice</span>(<span class="number">1</span>));</span><br><span class="line">                            response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">                                <span class="string">&#x27;Content-Type&#x27;</span>: contentType,</span><br><span class="line">                                <span class="string">&#x27;X-Powered-By&#x27;</span>: <span class="string">&#x27;mylyed.github.io&#x27;</span></span><br><span class="line">                            &#125;);</span><br><span class="line">                            response.<span class="title function_">write</span>(file);</span><br><span class="line">                            response.<span class="title function_">end</span>();</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    server.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server runing at port: &quot;</span> + <span class="variable constant_">PORT</span> + <span class="string">&quot;.&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//-------------------根据文件后缀获取Content-Type</span></span><br><span class="line"><span class="comment">//用于缓存多媒体类型</span></span><br><span class="line"><span class="keyword">var</span> _types = &#123;&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取 多媒体类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> path 文件后缀名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getType</span>(<span class="params">path</span>) &#123;</span><br><span class="line">    path = path.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">if</span> (_types[path]) &#123;</span><br><span class="line">        <span class="keyword">return</span> _types[path];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> type <span class="keyword">in</span> mime_type) &#123;</span><br><span class="line">        <span class="keyword">var</span> extensions = mime_type[type];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; extensions.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> ext = extensions[i];</span><br><span class="line">            <span class="keyword">if</span> (path === ext) &#123;</span><br><span class="line">                _types[path] = type;</span><br><span class="line">                <span class="keyword">return</span> type;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mime_type = &#123;</span><br><span class="line">    <span class="string">&quot;application/andrew-inset&quot;</span>: [<span class="string">&quot;ez&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/applixware&quot;</span>: [<span class="string">&quot;aw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/atom+xml&quot;</span>: [<span class="string">&quot;atom&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/atomcat+xml&quot;</span>: [<span class="string">&quot;atomcat&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/atomsvc+xml&quot;</span>: [<span class="string">&quot;atomsvc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/bdoc&quot;</span>: [<span class="string">&quot;bdoc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ccxml+xml&quot;</span>: [<span class="string">&quot;ccxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cdmi-capability&quot;</span>: [<span class="string">&quot;cdmia&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cdmi-container&quot;</span>: [<span class="string">&quot;cdmic&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cdmi-domain&quot;</span>: [<span class="string">&quot;cdmid&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cdmi-object&quot;</span>: [<span class="string">&quot;cdmio&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cdmi-queue&quot;</span>: [<span class="string">&quot;cdmiq&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/cu-seeme&quot;</span>: [<span class="string">&quot;cu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/dash+xml&quot;</span>: [<span class="string">&quot;mpd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/davmount+xml&quot;</span>: [<span class="string">&quot;davmount&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/docbook+xml&quot;</span>: [<span class="string">&quot;dbk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/dssc+der&quot;</span>: [<span class="string">&quot;dssc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/dssc+xml&quot;</span>: [<span class="string">&quot;xdssc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ecmascript&quot;</span>: [<span class="string">&quot;ecma&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/emma+xml&quot;</span>: [<span class="string">&quot;emma&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/epub+zip&quot;</span>: [<span class="string">&quot;epub&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/exi&quot;</span>: [<span class="string">&quot;exi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/font-tdpfr&quot;</span>: [<span class="string">&quot;pfr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/font-woff&quot;</span>: [<span class="string">&quot;woff&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/font-woff2&quot;</span>: [<span class="string">&quot;woff2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/geo+json&quot;</span>: [<span class="string">&quot;geojson&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/gml+xml&quot;</span>: [<span class="string">&quot;gml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/gpx+xml&quot;</span>: [<span class="string">&quot;gpx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/gxf&quot;</span>: [<span class="string">&quot;gxf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/gzip&quot;</span>: [<span class="string">&quot;gz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/hyperstudio&quot;</span>: [<span class="string">&quot;stk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/inkml+xml&quot;</span>: [<span class="string">&quot;ink&quot;</span>, <span class="string">&quot;inkml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ipfix&quot;</span>: [<span class="string">&quot;ipfix&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/java-archive&quot;</span>: [<span class="string">&quot;jar&quot;</span>, <span class="string">&quot;war&quot;</span>, <span class="string">&quot;ear&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/java-serialized-object&quot;</span>: [<span class="string">&quot;ser&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/java-vm&quot;</span>: [<span class="string">&quot;class&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/javascript&quot;</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;mjs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/json&quot;</span>: [<span class="string">&quot;json&quot;</span>, <span class="string">&quot;map&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/json5&quot;</span>: [<span class="string">&quot;json5&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/jsonml+json&quot;</span>: [<span class="string">&quot;jsonml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ld+json&quot;</span>: [<span class="string">&quot;jsonld&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/lost+xml&quot;</span>: [<span class="string">&quot;lostxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mac-binhex40&quot;</span>: [<span class="string">&quot;hqx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mac-compactpro&quot;</span>: [<span class="string">&quot;cpt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mads+xml&quot;</span>: [<span class="string">&quot;mads&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/manifest+json&quot;</span>: [<span class="string">&quot;webmanifest&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/marc&quot;</span>: [<span class="string">&quot;mrc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/marcxml+xml&quot;</span>: [<span class="string">&quot;mrcx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mathematica&quot;</span>: [<span class="string">&quot;ma&quot;</span>, <span class="string">&quot;nb&quot;</span>, <span class="string">&quot;mb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mathml+xml&quot;</span>: [<span class="string">&quot;mathml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mbox&quot;</span>: [<span class="string">&quot;mbox&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mediaservercontrol+xml&quot;</span>: [<span class="string">&quot;mscml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/metalink+xml&quot;</span>: [<span class="string">&quot;metalink&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/metalink4+xml&quot;</span>: [<span class="string">&quot;meta4&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mets+xml&quot;</span>: [<span class="string">&quot;mets&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mods+xml&quot;</span>: [<span class="string">&quot;mods&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mp21&quot;</span>: [<span class="string">&quot;m21&quot;</span>, <span class="string">&quot;mp21&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mp4&quot;</span>: [<span class="string">&quot;mp4s&quot;</span>, <span class="string">&quot;m4p&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/msword&quot;</span>: [<span class="string">&quot;doc&quot;</span>, <span class="string">&quot;dot&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/mxf&quot;</span>: [<span class="string">&quot;mxf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/octet-stream&quot;</span>: [<span class="string">&quot;bin&quot;</span>, <span class="string">&quot;dms&quot;</span>, <span class="string">&quot;lrf&quot;</span>, <span class="string">&quot;mar&quot;</span>, <span class="string">&quot;so&quot;</span>, <span class="string">&quot;dist&quot;</span>, <span class="string">&quot;distz&quot;</span>, <span class="string">&quot;pkg&quot;</span>, <span class="string">&quot;bpk&quot;</span>, <span class="string">&quot;dump&quot;</span>, <span class="string">&quot;elc&quot;</span>, <span class="string">&quot;deploy&quot;</span>, <span class="string">&quot;exe&quot;</span>, <span class="string">&quot;dll&quot;</span>, <span class="string">&quot;deb&quot;</span>, <span class="string">&quot;dmg&quot;</span>, <span class="string">&quot;iso&quot;</span>, <span class="string">&quot;img&quot;</span>, <span class="string">&quot;msi&quot;</span>, <span class="string">&quot;msp&quot;</span>, <span class="string">&quot;msm&quot;</span>, <span class="string">&quot;buffer&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/oda&quot;</span>: [<span class="string">&quot;oda&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/oebps-package+xml&quot;</span>: [<span class="string">&quot;opf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ogg&quot;</span>: [<span class="string">&quot;ogx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/omdoc+xml&quot;</span>: [<span class="string">&quot;omdoc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/onenote&quot;</span>: [<span class="string">&quot;onetoc&quot;</span>, <span class="string">&quot;onetoc2&quot;</span>, <span class="string">&quot;onetmp&quot;</span>, <span class="string">&quot;onepkg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/oxps&quot;</span>: [<span class="string">&quot;oxps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/patch-ops-error+xml&quot;</span>: [<span class="string">&quot;xer&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pdf&quot;</span>: [<span class="string">&quot;pdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pgp-encrypted&quot;</span>: [<span class="string">&quot;pgp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pgp-signature&quot;</span>: [<span class="string">&quot;asc&quot;</span>, <span class="string">&quot;sig&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pics-rules&quot;</span>: [<span class="string">&quot;prf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkcs10&quot;</span>: [<span class="string">&quot;p10&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkcs7-mime&quot;</span>: [<span class="string">&quot;p7m&quot;</span>, <span class="string">&quot;p7c&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkcs7-signature&quot;</span>: [<span class="string">&quot;p7s&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkcs8&quot;</span>: [<span class="string">&quot;p8&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkix-attr-cert&quot;</span>: [<span class="string">&quot;ac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkix-cert&quot;</span>: [<span class="string">&quot;cer&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkix-crl&quot;</span>: [<span class="string">&quot;crl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkix-pkipath&quot;</span>: [<span class="string">&quot;pkipath&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pkixcmp&quot;</span>: [<span class="string">&quot;pki&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pls+xml&quot;</span>: [<span class="string">&quot;pls&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/postscript&quot;</span>: [<span class="string">&quot;ai&quot;</span>, <span class="string">&quot;eps&quot;</span>, <span class="string">&quot;ps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/pskc+xml&quot;</span>: [<span class="string">&quot;pskcxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rdf+xml&quot;</span>: [<span class="string">&quot;rdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/reginfo+xml&quot;</span>: [<span class="string">&quot;rif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/relax-ng-compact-syntax&quot;</span>: [<span class="string">&quot;rnc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/resource-lists+xml&quot;</span>: [<span class="string">&quot;rl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/resource-lists-diff+xml&quot;</span>: [<span class="string">&quot;rld&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rls-services+xml&quot;</span>: [<span class="string">&quot;rs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rpki-ghostbusters&quot;</span>: [<span class="string">&quot;gbr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rpki-manifest&quot;</span>: [<span class="string">&quot;mft&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rpki-roa&quot;</span>: [<span class="string">&quot;roa&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rsd+xml&quot;</span>: [<span class="string">&quot;rsd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rss+xml&quot;</span>: [<span class="string">&quot;rss&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/rtf&quot;</span>: [<span class="string">&quot;rtf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/sbml+xml&quot;</span>: [<span class="string">&quot;sbml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/scvp-cv-request&quot;</span>: [<span class="string">&quot;scq&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/scvp-cv-response&quot;</span>: [<span class="string">&quot;scs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/scvp-vp-request&quot;</span>: [<span class="string">&quot;spq&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/scvp-vp-response&quot;</span>: [<span class="string">&quot;spp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/sdp&quot;</span>: [<span class="string">&quot;sdp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/set-payment-initiation&quot;</span>: [<span class="string">&quot;setpay&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/set-registration-initiation&quot;</span>: [<span class="string">&quot;setreg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/shf+xml&quot;</span>: [<span class="string">&quot;shf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/smil+xml&quot;</span>: [<span class="string">&quot;smi&quot;</span>, <span class="string">&quot;smil&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/sparql-query&quot;</span>: [<span class="string">&quot;rq&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/sparql-results+xml&quot;</span>: [<span class="string">&quot;srx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/srgs&quot;</span>: [<span class="string">&quot;gram&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/srgs+xml&quot;</span>: [<span class="string">&quot;grxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/sru+xml&quot;</span>: [<span class="string">&quot;sru&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ssdl+xml&quot;</span>: [<span class="string">&quot;ssdl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/ssml+xml&quot;</span>: [<span class="string">&quot;ssml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/tei+xml&quot;</span>: [<span class="string">&quot;tei&quot;</span>, <span class="string">&quot;teicorpus&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/thraud+xml&quot;</span>: [<span class="string">&quot;tfi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/timestamped-data&quot;</span>: [<span class="string">&quot;tsd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/voicexml+xml&quot;</span>: [<span class="string">&quot;vxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/widget&quot;</span>: [<span class="string">&quot;wgt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/winhlp&quot;</span>: [<span class="string">&quot;hlp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/wsdl+xml&quot;</span>: [<span class="string">&quot;wsdl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/wspolicy+xml&quot;</span>: [<span class="string">&quot;wspolicy&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xaml+xml&quot;</span>: [<span class="string">&quot;xaml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xcap-diff+xml&quot;</span>: [<span class="string">&quot;xdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xenc+xml&quot;</span>: [<span class="string">&quot;xenc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xhtml+xml&quot;</span>: [<span class="string">&quot;xhtml&quot;</span>, <span class="string">&quot;xht&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xml&quot;</span>: [<span class="string">&quot;xml&quot;</span>, <span class="string">&quot;xsl&quot;</span>, <span class="string">&quot;xsd&quot;</span>, <span class="string">&quot;rng&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xml-dtd&quot;</span>: [<span class="string">&quot;dtd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xop+xml&quot;</span>: [<span class="string">&quot;xop&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xproc+xml&quot;</span>: [<span class="string">&quot;xpl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xslt+xml&quot;</span>: [<span class="string">&quot;xslt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xspf+xml&quot;</span>: [<span class="string">&quot;xspf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/xv+xml&quot;</span>: [<span class="string">&quot;mxml&quot;</span>, <span class="string">&quot;xhvml&quot;</span>, <span class="string">&quot;xvml&quot;</span>, <span class="string">&quot;xvm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/yang&quot;</span>: [<span class="string">&quot;yang&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/yin+xml&quot;</span>: [<span class="string">&quot;yin&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/zip&quot;</span>: [<span class="string">&quot;zip&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/3gpp&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;audio/adpcm&quot;</span>: [<span class="string">&quot;adp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/basic&quot;</span>: [<span class="string">&quot;au&quot;</span>, <span class="string">&quot;snd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/midi&quot;</span>: [<span class="string">&quot;mid&quot;</span>, <span class="string">&quot;midi&quot;</span>, <span class="string">&quot;kar&quot;</span>, <span class="string">&quot;rmi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/mp3&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;audio/mp4&quot;</span>: [<span class="string">&quot;m4a&quot;</span>, <span class="string">&quot;mp4a&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/mpeg&quot;</span>: [<span class="string">&quot;mpga&quot;</span>, <span class="string">&quot;mp2&quot;</span>, <span class="string">&quot;mp2a&quot;</span>, <span class="string">&quot;mp3&quot;</span>, <span class="string">&quot;m2a&quot;</span>, <span class="string">&quot;m3a&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/ogg&quot;</span>: [<span class="string">&quot;oga&quot;</span>, <span class="string">&quot;ogg&quot;</span>, <span class="string">&quot;spx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/s3m&quot;</span>: [<span class="string">&quot;s3m&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/silk&quot;</span>: [<span class="string">&quot;sil&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/wav&quot;</span>: [<span class="string">&quot;wav&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/wave&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;audio/webm&quot;</span>: [<span class="string">&quot;weba&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/xm&quot;</span>: [<span class="string">&quot;xm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;font/otf&quot;</span>: [<span class="string">&quot;otf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/apng&quot;</span>: [<span class="string">&quot;apng&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/bmp&quot;</span>: [<span class="string">&quot;bmp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/cgm&quot;</span>: [<span class="string">&quot;cgm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/g3fax&quot;</span>: [<span class="string">&quot;g3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/gif&quot;</span>: [<span class="string">&quot;gif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/ief&quot;</span>: [<span class="string">&quot;ief&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/jpeg&quot;</span>: [<span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;jpe&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/ktx&quot;</span>: [<span class="string">&quot;ktx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/png&quot;</span>: [<span class="string">&quot;png&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/sgi&quot;</span>: [<span class="string">&quot;sgi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/svg+xml&quot;</span>: [<span class="string">&quot;svg&quot;</span>, <span class="string">&quot;svgz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/tiff&quot;</span>: [<span class="string">&quot;tiff&quot;</span>, <span class="string">&quot;tif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/webp&quot;</span>: [<span class="string">&quot;webp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;message/rfc822&quot;</span>: [<span class="string">&quot;eml&quot;</span>, <span class="string">&quot;mime&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/gltf+json&quot;</span>: [<span class="string">&quot;gltf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/gltf-binary&quot;</span>: [<span class="string">&quot;glb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/iges&quot;</span>: [<span class="string">&quot;igs&quot;</span>, <span class="string">&quot;iges&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/mesh&quot;</span>: [<span class="string">&quot;msh&quot;</span>, <span class="string">&quot;mesh&quot;</span>, <span class="string">&quot;silo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vrml&quot;</span>: [<span class="string">&quot;wrl&quot;</span>, <span class="string">&quot;vrml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/x3d+binary&quot;</span>: [<span class="string">&quot;x3db&quot;</span>, <span class="string">&quot;x3dbz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/x3d+vrml&quot;</span>: [<span class="string">&quot;x3dv&quot;</span>, <span class="string">&quot;x3dvz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/x3d+xml&quot;</span>: [<span class="string">&quot;x3d&quot;</span>, <span class="string">&quot;x3dz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/cache-manifest&quot;</span>: [<span class="string">&quot;appcache&quot;</span>, <span class="string">&quot;manifest&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/calendar&quot;</span>: [<span class="string">&quot;ics&quot;</span>, <span class="string">&quot;ifb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/coffeescript&quot;</span>: [<span class="string">&quot;coffee&quot;</span>, <span class="string">&quot;litcoffee&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/css&quot;</span>: [<span class="string">&quot;css&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/csv&quot;</span>: [<span class="string">&quot;csv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/hjson&quot;</span>: [<span class="string">&quot;hjson&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/html&quot;</span>: [<span class="string">&quot;html&quot;</span>, <span class="string">&quot;htm&quot;</span>, <span class="string">&quot;shtml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/jade&quot;</span>: [<span class="string">&quot;jade&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/jsx&quot;</span>: [<span class="string">&quot;jsx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/less&quot;</span>: [<span class="string">&quot;less&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/markdown&quot;</span>: [<span class="string">&quot;markdown&quot;</span>, <span class="string">&quot;md&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/mathml&quot;</span>: [<span class="string">&quot;mml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/n3&quot;</span>: [<span class="string">&quot;n3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/plain&quot;</span>: [<span class="string">&quot;txt&quot;</span>, <span class="string">&quot;text&quot;</span>, <span class="string">&quot;conf&quot;</span>, <span class="string">&quot;def&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;log&quot;</span>, <span class="string">&quot;in&quot;</span>, <span class="string">&quot;ini&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/richtext&quot;</span>: [<span class="string">&quot;rtx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/rtf&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;text/sgml&quot;</span>: [<span class="string">&quot;sgml&quot;</span>, <span class="string">&quot;sgm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/slim&quot;</span>: [<span class="string">&quot;slim&quot;</span>, <span class="string">&quot;slm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/stylus&quot;</span>: [<span class="string">&quot;stylus&quot;</span>, <span class="string">&quot;styl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/tab-separated-values&quot;</span>: [<span class="string">&quot;tsv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/troff&quot;</span>: [<span class="string">&quot;t&quot;</span>, <span class="string">&quot;tr&quot;</span>, <span class="string">&quot;roff&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="string">&quot;me&quot;</span>, <span class="string">&quot;ms&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/turtle&quot;</span>: [<span class="string">&quot;ttl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/uri-list&quot;</span>: [<span class="string">&quot;uri&quot;</span>, <span class="string">&quot;uris&quot;</span>, <span class="string">&quot;urls&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vcard&quot;</span>: [<span class="string">&quot;vcard&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vtt&quot;</span>: [<span class="string">&quot;vtt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/xml&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;text/yaml&quot;</span>: [<span class="string">&quot;yaml&quot;</span>, <span class="string">&quot;yml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/3gpp&quot;</span>: [<span class="string">&quot;3gp&quot;</span>, <span class="string">&quot;3gpp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/3gpp2&quot;</span>: [<span class="string">&quot;3g2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/h261&quot;</span>: [<span class="string">&quot;h261&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/h263&quot;</span>: [<span class="string">&quot;h263&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/h264&quot;</span>: [<span class="string">&quot;h264&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/jpeg&quot;</span>: [<span class="string">&quot;jpgv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/jpm&quot;</span>: [<span class="string">&quot;jpm&quot;</span>, <span class="string">&quot;jpgm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/mj2&quot;</span>: [<span class="string">&quot;mj2&quot;</span>, <span class="string">&quot;mjp2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/mp2t&quot;</span>: [<span class="string">&quot;ts&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/mp4&quot;</span>: [<span class="string">&quot;mp4&quot;</span>, <span class="string">&quot;mp4v&quot;</span>, <span class="string">&quot;mpg4&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/mpeg&quot;</span>: [<span class="string">&quot;mpeg&quot;</span>, <span class="string">&quot;mpg&quot;</span>, <span class="string">&quot;mpe&quot;</span>, <span class="string">&quot;m1v&quot;</span>, <span class="string">&quot;m2v&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/ogg&quot;</span>: [<span class="string">&quot;ogv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/quicktime&quot;</span>: [<span class="string">&quot;qt&quot;</span>, <span class="string">&quot;mov&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/webm&quot;</span>: [<span class="string">&quot;webm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/prs.cww&quot;</span>: [<span class="string">&quot;cww&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.3gpp.pic-bw-large&quot;</span>: [<span class="string">&quot;plb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.3gpp.pic-bw-small&quot;</span>: [<span class="string">&quot;psb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.3gpp.pic-bw-var&quot;</span>: [<span class="string">&quot;pvb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.3gpp2.tcap&quot;</span>: [<span class="string">&quot;tcap&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.3m.post-it-notes&quot;</span>: [<span class="string">&quot;pwn&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.accpac.simply.aso&quot;</span>: [<span class="string">&quot;aso&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.accpac.simply.imp&quot;</span>: [<span class="string">&quot;imp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.acucobol&quot;</span>: [<span class="string">&quot;acu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.acucorp&quot;</span>: [<span class="string">&quot;atc&quot;</span>, <span class="string">&quot;acutc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.adobe.air-application-installer-package+zip&quot;</span>: [<span class="string">&quot;air&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.adobe.formscentral.fcdt&quot;</span>: [<span class="string">&quot;fcdt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.adobe.fxp&quot;</span>: [<span class="string">&quot;fxp&quot;</span>, <span class="string">&quot;fxpl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.adobe.xdp+xml&quot;</span>: [<span class="string">&quot;xdp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.adobe.xfdf&quot;</span>: [<span class="string">&quot;xfdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ahead.space&quot;</span>: [<span class="string">&quot;ahead&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.airzip.filesecure.azf&quot;</span>: [<span class="string">&quot;azf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.airzip.filesecure.azs&quot;</span>: [<span class="string">&quot;azs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.amazon.ebook&quot;</span>: [<span class="string">&quot;azw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.americandynamics.acc&quot;</span>: [<span class="string">&quot;acc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.amiga.ami&quot;</span>: [<span class="string">&quot;ami&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.android.package-archive&quot;</span>: [<span class="string">&quot;apk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.anser-web-certificate-issue-initiation&quot;</span>: [<span class="string">&quot;cii&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.anser-web-funds-transfer-initiation&quot;</span>: [<span class="string">&quot;fti&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.antix.game-component&quot;</span>: [<span class="string">&quot;atx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.apple.installer+xml&quot;</span>: [<span class="string">&quot;mpkg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.apple.mpegurl&quot;</span>: [<span class="string">&quot;m3u8&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.apple.pkpass&quot;</span>: [<span class="string">&quot;pkpass&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.aristanetworks.swi&quot;</span>: [<span class="string">&quot;swi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.astraea-software.iota&quot;</span>: [<span class="string">&quot;iota&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.audiograph&quot;</span>: [<span class="string">&quot;aep&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.blueice.multipass&quot;</span>: [<span class="string">&quot;mpm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.bmi&quot;</span>: [<span class="string">&quot;bmi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.businessobjects&quot;</span>: [<span class="string">&quot;rep&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.chemdraw+xml&quot;</span>: [<span class="string">&quot;cdxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.chipnuts.karaoke-mmd&quot;</span>: [<span class="string">&quot;mmd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cinderella&quot;</span>: [<span class="string">&quot;cdy&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.claymore&quot;</span>: [<span class="string">&quot;cla&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cloanto.rp9&quot;</span>: [<span class="string">&quot;rp9&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.clonk.c4group&quot;</span>: [<span class="string">&quot;c4g&quot;</span>, <span class="string">&quot;c4d&quot;</span>, <span class="string">&quot;c4f&quot;</span>, <span class="string">&quot;c4p&quot;</span>, <span class="string">&quot;c4u&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cluetrust.cartomobile-config&quot;</span>: [<span class="string">&quot;c11amc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cluetrust.cartomobile-config-pkg&quot;</span>: [<span class="string">&quot;c11amz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.commonspace&quot;</span>: [<span class="string">&quot;csp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.contact.cmsg&quot;</span>: [<span class="string">&quot;cdbcmsg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cosmocaller&quot;</span>: [<span class="string">&quot;cmc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.crick.clicker&quot;</span>: [<span class="string">&quot;clkx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.crick.clicker.keyboard&quot;</span>: [<span class="string">&quot;clkk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.crick.clicker.palette&quot;</span>: [<span class="string">&quot;clkp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.crick.clicker.template&quot;</span>: [<span class="string">&quot;clkt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.crick.clicker.wordbank&quot;</span>: [<span class="string">&quot;clkw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.criticaltools.wbs+xml&quot;</span>: [<span class="string">&quot;wbs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ctc-posml&quot;</span>: [<span class="string">&quot;pml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.cups-ppd&quot;</span>: [<span class="string">&quot;ppd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.curl.car&quot;</span>: [<span class="string">&quot;car&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.curl.pcurl&quot;</span>: [<span class="string">&quot;pcurl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dart&quot;</span>: [<span class="string">&quot;dart&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.data-vision.rdz&quot;</span>: [<span class="string">&quot;rdz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dece.data&quot;</span>: [<span class="string">&quot;uvf&quot;</span>, <span class="string">&quot;uvvf&quot;</span>, <span class="string">&quot;uvd&quot;</span>, <span class="string">&quot;uvvd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dece.ttml+xml&quot;</span>: [<span class="string">&quot;uvt&quot;</span>, <span class="string">&quot;uvvt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dece.unspecified&quot;</span>: [<span class="string">&quot;uvx&quot;</span>, <span class="string">&quot;uvvx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dece.zip&quot;</span>: [<span class="string">&quot;uvz&quot;</span>, <span class="string">&quot;uvvz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.denovo.fcselayout-link&quot;</span>: [<span class="string">&quot;fe_launch&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dna&quot;</span>: [<span class="string">&quot;dna&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dolby.mlp&quot;</span>: [<span class="string">&quot;mlp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dpgraph&quot;</span>: [<span class="string">&quot;dpg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dreamfactory&quot;</span>: [<span class="string">&quot;dfac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ds-keypoint&quot;</span>: [<span class="string">&quot;kpxx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dvb.ait&quot;</span>: [<span class="string">&quot;ait&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dvb.service&quot;</span>: [<span class="string">&quot;svc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.dynageo&quot;</span>: [<span class="string">&quot;geo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ecowin.chart&quot;</span>: [<span class="string">&quot;mag&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.enliven&quot;</span>: [<span class="string">&quot;nml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.epson.esf&quot;</span>: [<span class="string">&quot;esf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.epson.msf&quot;</span>: [<span class="string">&quot;msf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.epson.quickanime&quot;</span>: [<span class="string">&quot;qam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.epson.salt&quot;</span>: [<span class="string">&quot;slt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.epson.ssf&quot;</span>: [<span class="string">&quot;ssf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.eszigno3+xml&quot;</span>: [<span class="string">&quot;es3&quot;</span>, <span class="string">&quot;et3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ezpix-album&quot;</span>: [<span class="string">&quot;ez2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ezpix-package&quot;</span>: [<span class="string">&quot;ez3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fdf&quot;</span>: [<span class="string">&quot;fdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fdsn.mseed&quot;</span>: [<span class="string">&quot;mseed&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fdsn.seed&quot;</span>: [<span class="string">&quot;seed&quot;</span>, <span class="string">&quot;dataless&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.flographit&quot;</span>: [<span class="string">&quot;gph&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fluxtime.clip&quot;</span>: [<span class="string">&quot;ftc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.framemaker&quot;</span>: [<span class="string">&quot;fm&quot;</span>, <span class="string">&quot;frame&quot;</span>, <span class="string">&quot;maker&quot;</span>, <span class="string">&quot;book&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.frogans.fnc&quot;</span>: [<span class="string">&quot;fnc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.frogans.ltf&quot;</span>: [<span class="string">&quot;ltf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fsc.weblaunch&quot;</span>: [<span class="string">&quot;fsc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujitsu.oasys&quot;</span>: [<span class="string">&quot;oas&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujitsu.oasys2&quot;</span>: [<span class="string">&quot;oa2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujitsu.oasys3&quot;</span>: [<span class="string">&quot;oa3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujitsu.oasysgp&quot;</span>: [<span class="string">&quot;fg5&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujitsu.oasysprs&quot;</span>: [<span class="string">&quot;bh2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujixerox.ddd&quot;</span>: [<span class="string">&quot;ddd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujixerox.docuworks&quot;</span>: [<span class="string">&quot;xdw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fujixerox.docuworks.binder&quot;</span>: [<span class="string">&quot;xbd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.fuzzysheet&quot;</span>: [<span class="string">&quot;fzs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.genomatix.tuxedo&quot;</span>: [<span class="string">&quot;txd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geogebra.file&quot;</span>: [<span class="string">&quot;ggb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geogebra.tool&quot;</span>: [<span class="string">&quot;ggt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geometry-explorer&quot;</span>: [<span class="string">&quot;gex&quot;</span>, <span class="string">&quot;gre&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geonext&quot;</span>: [<span class="string">&quot;gxt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geoplan&quot;</span>: [<span class="string">&quot;g2w&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.geospace&quot;</span>: [<span class="string">&quot;g3w&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.gmx&quot;</span>: [<span class="string">&quot;gmx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.google-apps.document&quot;</span>: [<span class="string">&quot;gdoc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.google-apps.presentation&quot;</span>: [<span class="string">&quot;gslides&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.google-apps.spreadsheet&quot;</span>: [<span class="string">&quot;gsheet&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.google-earth.kml+xml&quot;</span>: [<span class="string">&quot;kml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.google-earth.kmz&quot;</span>: [<span class="string">&quot;kmz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.grafeq&quot;</span>: [<span class="string">&quot;gqf&quot;</span>, <span class="string">&quot;gqs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-account&quot;</span>: [<span class="string">&quot;gac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-help&quot;</span>: [<span class="string">&quot;ghf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-identity-message&quot;</span>: [<span class="string">&quot;gim&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-injector&quot;</span>: [<span class="string">&quot;grv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-tool-message&quot;</span>: [<span class="string">&quot;gtm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-tool-template&quot;</span>: [<span class="string">&quot;tpl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.groove-vcard&quot;</span>: [<span class="string">&quot;vcg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hal+xml&quot;</span>: [<span class="string">&quot;hal&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.handheld-entertainment+xml&quot;</span>: [<span class="string">&quot;zmm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hbci&quot;</span>: [<span class="string">&quot;hbci&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hhe.lesson-player&quot;</span>: [<span class="string">&quot;les&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-hpgl&quot;</span>: [<span class="string">&quot;hpgl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-hpid&quot;</span>: [<span class="string">&quot;hpid&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-hps&quot;</span>: [<span class="string">&quot;hps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-jlyt&quot;</span>: [<span class="string">&quot;jlt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-pcl&quot;</span>: [<span class="string">&quot;pcl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hp-pclxl&quot;</span>: [<span class="string">&quot;pclxl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.hydrostatix.sof-data&quot;</span>: [<span class="string">&quot;sfd-hdstx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ibm.minipay&quot;</span>: [<span class="string">&quot;mpy&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ibm.modcap&quot;</span>: [<span class="string">&quot;afp&quot;</span>, <span class="string">&quot;listafp&quot;</span>, <span class="string">&quot;list3820&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ibm.rights-management&quot;</span>: [<span class="string">&quot;irm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ibm.secure-container&quot;</span>: [<span class="string">&quot;sc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.iccprofile&quot;</span>: [<span class="string">&quot;icc&quot;</span>, <span class="string">&quot;icm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.igloader&quot;</span>: [<span class="string">&quot;igl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.immervision-ivp&quot;</span>: [<span class="string">&quot;ivp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.immervision-ivu&quot;</span>: [<span class="string">&quot;ivu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.insors.igm&quot;</span>: [<span class="string">&quot;igm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.intercon.formnet&quot;</span>: [<span class="string">&quot;xpw&quot;</span>, <span class="string">&quot;xpx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.intergeo&quot;</span>: [<span class="string">&quot;i2g&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.intu.qbo&quot;</span>: [<span class="string">&quot;qbo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.intu.qfx&quot;</span>: [<span class="string">&quot;qfx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ipunplugged.rcprofile&quot;</span>: [<span class="string">&quot;rcprofile&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.irepository.package+xml&quot;</span>: [<span class="string">&quot;irp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.is-xpr&quot;</span>: [<span class="string">&quot;xpr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.isac.fcs&quot;</span>: [<span class="string">&quot;fcs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.jam&quot;</span>: [<span class="string">&quot;jam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.jcp.javame.midlet-rms&quot;</span>: [<span class="string">&quot;rms&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.jisp&quot;</span>: [<span class="string">&quot;jisp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.joost.joda-archive&quot;</span>: [<span class="string">&quot;joda&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kahootz&quot;</span>: [<span class="string">&quot;ktz&quot;</span>, <span class="string">&quot;ktr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.karbon&quot;</span>: [<span class="string">&quot;karbon&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kchart&quot;</span>: [<span class="string">&quot;chrt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kformula&quot;</span>: [<span class="string">&quot;kfo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kivio&quot;</span>: [<span class="string">&quot;flw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kontour&quot;</span>: [<span class="string">&quot;kon&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kpresenter&quot;</span>: [<span class="string">&quot;kpr&quot;</span>, <span class="string">&quot;kpt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kspread&quot;</span>: [<span class="string">&quot;ksp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kde.kword&quot;</span>: [<span class="string">&quot;kwd&quot;</span>, <span class="string">&quot;kwt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kenameaapp&quot;</span>: [<span class="string">&quot;htke&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kidspiration&quot;</span>: [<span class="string">&quot;kia&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kinar&quot;</span>: [<span class="string">&quot;kne&quot;</span>, <span class="string">&quot;knp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.koan&quot;</span>: [<span class="string">&quot;skp&quot;</span>, <span class="string">&quot;skd&quot;</span>, <span class="string">&quot;skt&quot;</span>, <span class="string">&quot;skm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.kodak-descriptor&quot;</span>: [<span class="string">&quot;sse&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.las.las+xml&quot;</span>: [<span class="string">&quot;lasxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.llamagraphics.life-balance.desktop&quot;</span>: [<span class="string">&quot;lbd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.llamagraphics.life-balance.exchange+xml&quot;</span>: [<span class="string">&quot;lbe&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-1-2-3&quot;</span>: [<span class="string">&quot;123&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-approach&quot;</span>: [<span class="string">&quot;apr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-freelance&quot;</span>: [<span class="string">&quot;pre&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-notes&quot;</span>: [<span class="string">&quot;nsf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-organizer&quot;</span>: [<span class="string">&quot;org&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-screencam&quot;</span>: [<span class="string">&quot;scm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.lotus-wordpro&quot;</span>: [<span class="string">&quot;lwp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.macports.portpkg&quot;</span>: [<span class="string">&quot;portpkg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mcd&quot;</span>: [<span class="string">&quot;mcd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.medcalcdata&quot;</span>: [<span class="string">&quot;mc1&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mediastation.cdkey&quot;</span>: [<span class="string">&quot;cdkey&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mfer&quot;</span>: [<span class="string">&quot;mwf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mfmp&quot;</span>: [<span class="string">&quot;mfm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.micrografx.flo&quot;</span>: [<span class="string">&quot;flo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.micrografx.igx&quot;</span>: [<span class="string">&quot;igx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mif&quot;</span>: [<span class="string">&quot;mif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.daf&quot;</span>: [<span class="string">&quot;daf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.dis&quot;</span>: [<span class="string">&quot;dis&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.mbk&quot;</span>: [<span class="string">&quot;mbk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.mqy&quot;</span>: [<span class="string">&quot;mqy&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.msl&quot;</span>: [<span class="string">&quot;msl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.plc&quot;</span>: [<span class="string">&quot;plc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mobius.txf&quot;</span>: [<span class="string">&quot;txf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mophun.application&quot;</span>: [<span class="string">&quot;mpn&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mophun.certificate&quot;</span>: [<span class="string">&quot;mpc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mozilla.xul+xml&quot;</span>: [<span class="string">&quot;xul&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-artgalry&quot;</span>: [<span class="string">&quot;cil&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-cab-compressed&quot;</span>: [<span class="string">&quot;cab&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-excel&quot;</span>: [<span class="string">&quot;xls&quot;</span>, <span class="string">&quot;xlm&quot;</span>, <span class="string">&quot;xla&quot;</span>, <span class="string">&quot;xlc&quot;</span>, <span class="string">&quot;xlt&quot;</span>, <span class="string">&quot;xlw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-excel.addin.macroenabled.12&quot;</span>: [<span class="string">&quot;xlam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-excel.sheet.binary.macroenabled.12&quot;</span>: [<span class="string">&quot;xlsb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-excel.sheet.macroenabled.12&quot;</span>: [<span class="string">&quot;xlsm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-excel.template.macroenabled.12&quot;</span>: [<span class="string">&quot;xltm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-fontobject&quot;</span>: [<span class="string">&quot;eot&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-htmlhelp&quot;</span>: [<span class="string">&quot;chm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-ims&quot;</span>: [<span class="string">&quot;ims&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-lrm&quot;</span>: [<span class="string">&quot;lrm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-officetheme&quot;</span>: [<span class="string">&quot;thmx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-outlook&quot;</span>: [<span class="string">&quot;msg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-pki.seccat&quot;</span>: [<span class="string">&quot;cat&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-pki.stl&quot;</span>: [<span class="string">&quot;stl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint&quot;</span>: [<span class="string">&quot;ppt&quot;</span>, <span class="string">&quot;pps&quot;</span>, <span class="string">&quot;pot&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint.addin.macroenabled.12&quot;</span>: [<span class="string">&quot;ppam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint.presentation.macroenabled.12&quot;</span>: [<span class="string">&quot;pptm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint.slide.macroenabled.12&quot;</span>: [<span class="string">&quot;sldm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint.slideshow.macroenabled.12&quot;</span>: [<span class="string">&quot;ppsm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-powerpoint.template.macroenabled.12&quot;</span>: [<span class="string">&quot;potm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-project&quot;</span>: [<span class="string">&quot;mpp&quot;</span>, <span class="string">&quot;mpt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-word.document.macroenabled.12&quot;</span>: [<span class="string">&quot;docm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-word.template.macroenabled.12&quot;</span>: [<span class="string">&quot;dotm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-works&quot;</span>: [<span class="string">&quot;wps&quot;</span>, <span class="string">&quot;wks&quot;</span>, <span class="string">&quot;wcm&quot;</span>, <span class="string">&quot;wdb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-wpl&quot;</span>: [<span class="string">&quot;wpl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ms-xpsdocument&quot;</span>: [<span class="string">&quot;xps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mseq&quot;</span>: [<span class="string">&quot;mseq&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.musician&quot;</span>: [<span class="string">&quot;mus&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.muvee.style&quot;</span>: [<span class="string">&quot;msty&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.mynfc&quot;</span>: [<span class="string">&quot;taglet&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.neurolanguage.nlu&quot;</span>: [<span class="string">&quot;nlu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.nitf&quot;</span>: [<span class="string">&quot;ntf&quot;</span>, <span class="string">&quot;nitf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.noblenet-directory&quot;</span>: [<span class="string">&quot;nnd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.noblenet-sealer&quot;</span>: [<span class="string">&quot;nns&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.noblenet-web&quot;</span>: [<span class="string">&quot;nnw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.nokia.n-gage.data&quot;</span>: [<span class="string">&quot;ngdat&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.nokia.n-gage.symbian.install&quot;</span>: [<span class="string">&quot;n-gage&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.nokia.radio-preset&quot;</span>: [<span class="string">&quot;rpst&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.nokia.radio-presets&quot;</span>: [<span class="string">&quot;rpss&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.novadigm.edm&quot;</span>: [<span class="string">&quot;edm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.novadigm.edx&quot;</span>: [<span class="string">&quot;edx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.novadigm.ext&quot;</span>: [<span class="string">&quot;ext&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.chart&quot;</span>: [<span class="string">&quot;odc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.chart-template&quot;</span>: [<span class="string">&quot;otc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.database&quot;</span>: [<span class="string">&quot;odb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.formula&quot;</span>: [<span class="string">&quot;odf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.formula-template&quot;</span>: [<span class="string">&quot;odft&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.graphics&quot;</span>: [<span class="string">&quot;odg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.graphics-template&quot;</span>: [<span class="string">&quot;otg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.image&quot;</span>: [<span class="string">&quot;odi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.image-template&quot;</span>: [<span class="string">&quot;oti&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.presentation&quot;</span>: [<span class="string">&quot;odp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.presentation-template&quot;</span>: [<span class="string">&quot;otp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.spreadsheet&quot;</span>: [<span class="string">&quot;ods&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.spreadsheet-template&quot;</span>: [<span class="string">&quot;ots&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.text&quot;</span>: [<span class="string">&quot;odt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.text-master&quot;</span>: [<span class="string">&quot;odm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.text-template&quot;</span>: [<span class="string">&quot;ott&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oasis.opendocument.text-web&quot;</span>: [<span class="string">&quot;oth&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.olpc-sugar&quot;</span>: [<span class="string">&quot;xo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.oma.dd2+xml&quot;</span>: [<span class="string">&quot;dd2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openofficeorg.extension&quot;</span>: [<span class="string">&quot;oxt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.presentationml.presentation&quot;</span>: [<span class="string">&quot;pptx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.presentationml.slide&quot;</span>: [<span class="string">&quot;sldx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.presentationml.slideshow&quot;</span>: [<span class="string">&quot;ppsx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.presentationml.template&quot;</span>: [<span class="string">&quot;potx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;</span>: [<span class="string">&quot;xlsx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.template&quot;</span>: [<span class="string">&quot;xltx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;</span>: [<span class="string">&quot;docx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.template&quot;</span>: [<span class="string">&quot;dotx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.osgeo.mapguide.package&quot;</span>: [<span class="string">&quot;mgp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.osgi.dp&quot;</span>: [<span class="string">&quot;dp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.osgi.subsystem&quot;</span>: [<span class="string">&quot;esa&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.palm&quot;</span>: [<span class="string">&quot;pdb&quot;</span>, <span class="string">&quot;pqa&quot;</span>, <span class="string">&quot;oprc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pawaafile&quot;</span>: [<span class="string">&quot;paw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pg.format&quot;</span>: [<span class="string">&quot;str&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pg.osasli&quot;</span>: [<span class="string">&quot;ei6&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.picsel&quot;</span>: [<span class="string">&quot;efif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pmi.widget&quot;</span>: [<span class="string">&quot;wg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pocketlearn&quot;</span>: [<span class="string">&quot;plf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.powerbuilder6&quot;</span>: [<span class="string">&quot;pbd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.previewsystems.box&quot;</span>: [<span class="string">&quot;box&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.proteus.magazine&quot;</span>: [<span class="string">&quot;mgz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.publishare-delta-tree&quot;</span>: [<span class="string">&quot;qps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.pvi.ptid1&quot;</span>: [<span class="string">&quot;ptid&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.quark.quarkxpress&quot;</span>: [<span class="string">&quot;qxd&quot;</span>, <span class="string">&quot;qxt&quot;</span>, <span class="string">&quot;qwd&quot;</span>, <span class="string">&quot;qwt&quot;</span>, <span class="string">&quot;qxl&quot;</span>, <span class="string">&quot;qxb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.realvnc.bed&quot;</span>: [<span class="string">&quot;bed&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.recordare.musicxml&quot;</span>: [<span class="string">&quot;mxl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.recordare.musicxml+xml&quot;</span>: [<span class="string">&quot;musicxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.rig.cryptonote&quot;</span>: [<span class="string">&quot;cryptonote&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.rim.cod&quot;</span>: [<span class="string">&quot;cod&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.rn-realmedia&quot;</span>: [<span class="string">&quot;rm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.rn-realmedia-vbr&quot;</span>: [<span class="string">&quot;rmvb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.route66.link66+xml&quot;</span>: [<span class="string">&quot;link66&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sailingtracker.track&quot;</span>: [<span class="string">&quot;st&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.seemail&quot;</span>: [<span class="string">&quot;see&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sema&quot;</span>: [<span class="string">&quot;sema&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.semd&quot;</span>: [<span class="string">&quot;semd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.semf&quot;</span>: [<span class="string">&quot;semf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.shana.informed.formdata&quot;</span>: [<span class="string">&quot;ifm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.shana.informed.formtemplate&quot;</span>: [<span class="string">&quot;itp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.shana.informed.interchange&quot;</span>: [<span class="string">&quot;iif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.shana.informed.package&quot;</span>: [<span class="string">&quot;ipk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.simtech-mindmapper&quot;</span>: [<span class="string">&quot;twd&quot;</span>, <span class="string">&quot;twds&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.smaf&quot;</span>: [<span class="string">&quot;mmf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.smart.teacher&quot;</span>: [<span class="string">&quot;teacher&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.solent.sdkm+xml&quot;</span>: [<span class="string">&quot;sdkm&quot;</span>, <span class="string">&quot;sdkd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.spotfire.dxp&quot;</span>: [<span class="string">&quot;dxp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.spotfire.sfs&quot;</span>: [<span class="string">&quot;sfs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.calc&quot;</span>: [<span class="string">&quot;sdc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.draw&quot;</span>: [<span class="string">&quot;sda&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.impress&quot;</span>: [<span class="string">&quot;sdd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.math&quot;</span>: [<span class="string">&quot;smf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.writer&quot;</span>: [<span class="string">&quot;sdw&quot;</span>, <span class="string">&quot;vor&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stardivision.writer-global&quot;</span>: [<span class="string">&quot;sgl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stepmania.package&quot;</span>: [<span class="string">&quot;smzip&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.stepmania.stepchart&quot;</span>: [<span class="string">&quot;sm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.wadl+xml&quot;</span>: [<span class="string">&quot;wadl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.calc&quot;</span>: [<span class="string">&quot;sxc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.calc.template&quot;</span>: [<span class="string">&quot;stc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.draw&quot;</span>: [<span class="string">&quot;sxd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.draw.template&quot;</span>: [<span class="string">&quot;std&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.impress&quot;</span>: [<span class="string">&quot;sxi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.impress.template&quot;</span>: [<span class="string">&quot;sti&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.math&quot;</span>: [<span class="string">&quot;sxm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.writer&quot;</span>: [<span class="string">&quot;sxw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.writer.global&quot;</span>: [<span class="string">&quot;sxg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sun.xml.writer.template&quot;</span>: [<span class="string">&quot;stw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.sus-calendar&quot;</span>: [<span class="string">&quot;sus&quot;</span>, <span class="string">&quot;susp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.svd&quot;</span>: [<span class="string">&quot;svd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.symbian.install&quot;</span>: [<span class="string">&quot;sis&quot;</span>, <span class="string">&quot;sisx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.syncml+xml&quot;</span>: [<span class="string">&quot;xsm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.syncml.dm+wbxml&quot;</span>: [<span class="string">&quot;bdm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.syncml.dm+xml&quot;</span>: [<span class="string">&quot;xdm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.tao.intent-module-archive&quot;</span>: [<span class="string">&quot;tao&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.tcpdump.pcap&quot;</span>: [<span class="string">&quot;pcap&quot;</span>, <span class="string">&quot;cap&quot;</span>, <span class="string">&quot;dmp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.tmobile-livetv&quot;</span>: [<span class="string">&quot;tmo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.trid.tpt&quot;</span>: [<span class="string">&quot;tpt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.triscape.mxs&quot;</span>: [<span class="string">&quot;mxs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.trueapp&quot;</span>: [<span class="string">&quot;tra&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.ufdl&quot;</span>: [<span class="string">&quot;ufd&quot;</span>, <span class="string">&quot;ufdl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.uiq.theme&quot;</span>: [<span class="string">&quot;utz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.umajin&quot;</span>: [<span class="string">&quot;umj&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.unity&quot;</span>: [<span class="string">&quot;unityweb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.uoml+xml&quot;</span>: [<span class="string">&quot;uoml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.vcx&quot;</span>: [<span class="string">&quot;vcx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.visio&quot;</span>: [<span class="string">&quot;vsd&quot;</span>, <span class="string">&quot;vst&quot;</span>, <span class="string">&quot;vss&quot;</span>, <span class="string">&quot;vsw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.visionary&quot;</span>: [<span class="string">&quot;vis&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.vsf&quot;</span>: [<span class="string">&quot;vsf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wap.wbxml&quot;</span>: [<span class="string">&quot;wbxml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wap.wmlc&quot;</span>: [<span class="string">&quot;wmlc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wap.wmlscriptc&quot;</span>: [<span class="string">&quot;wmlsc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.webturbo&quot;</span>: [<span class="string">&quot;wtb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wolfram.player&quot;</span>: [<span class="string">&quot;nbp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wordperfect&quot;</span>: [<span class="string">&quot;wpd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wqd&quot;</span>: [<span class="string">&quot;wqd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.wt.stf&quot;</span>: [<span class="string">&quot;stf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.xara&quot;</span>: [<span class="string">&quot;xar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.xfdl&quot;</span>: [<span class="string">&quot;xfdl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.hv-dic&quot;</span>: [<span class="string">&quot;hvd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.hv-script&quot;</span>: [<span class="string">&quot;hvs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.hv-voice&quot;</span>: [<span class="string">&quot;hvp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.openscoreformat&quot;</span>: [<span class="string">&quot;osf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.openscoreformat.osfpvg+xml&quot;</span>: [<span class="string">&quot;osfpvg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.smaf-audio&quot;</span>: [<span class="string">&quot;saf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yamaha.smaf-phrase&quot;</span>: [<span class="string">&quot;spf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.yellowriver-custom-menu&quot;</span>: [<span class="string">&quot;cmp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.zul&quot;</span>: [<span class="string">&quot;zir&quot;</span>, <span class="string">&quot;zirz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/vnd.zzazz.deck+xml&quot;</span>: [<span class="string">&quot;zaz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-7z-compressed&quot;</span>: [<span class="string">&quot;7z&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-abiword&quot;</span>: [<span class="string">&quot;abw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ace-compressed&quot;</span>: [<span class="string">&quot;ace&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-apple-diskimage&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-arj&quot;</span>: [<span class="string">&quot;arj&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-authorware-bin&quot;</span>: [<span class="string">&quot;aab&quot;</span>, <span class="string">&quot;x32&quot;</span>, <span class="string">&quot;u32&quot;</span>, <span class="string">&quot;vox&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-authorware-map&quot;</span>: [<span class="string">&quot;aam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-authorware-seg&quot;</span>: [<span class="string">&quot;aas&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-bcpio&quot;</span>: [<span class="string">&quot;bcpio&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-bdoc&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-bittorrent&quot;</span>: [<span class="string">&quot;torrent&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-blorb&quot;</span>: [<span class="string">&quot;blb&quot;</span>, <span class="string">&quot;blorb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-bzip&quot;</span>: [<span class="string">&quot;bz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-bzip2&quot;</span>: [<span class="string">&quot;bz2&quot;</span>, <span class="string">&quot;boz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-cbr&quot;</span>: [<span class="string">&quot;cbr&quot;</span>, <span class="string">&quot;cba&quot;</span>, <span class="string">&quot;cbt&quot;</span>, <span class="string">&quot;cbz&quot;</span>, <span class="string">&quot;cb7&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-cdlink&quot;</span>: [<span class="string">&quot;vcd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-cfs-compressed&quot;</span>: [<span class="string">&quot;cfs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-chat&quot;</span>: [<span class="string">&quot;chat&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-chess-pgn&quot;</span>: [<span class="string">&quot;pgn&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-chrome-extension&quot;</span>: [<span class="string">&quot;crx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-cocoa&quot;</span>: [<span class="string">&quot;cco&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-conference&quot;</span>: [<span class="string">&quot;nsc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-cpio&quot;</span>: [<span class="string">&quot;cpio&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-csh&quot;</span>: [<span class="string">&quot;csh&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-debian-package&quot;</span>: [<span class="string">&quot;udeb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-dgc-compressed&quot;</span>: [<span class="string">&quot;dgc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-director&quot;</span>: [<span class="string">&quot;dir&quot;</span>, <span class="string">&quot;dcr&quot;</span>, <span class="string">&quot;dxr&quot;</span>, <span class="string">&quot;cst&quot;</span>, <span class="string">&quot;cct&quot;</span>, <span class="string">&quot;cxt&quot;</span>, <span class="string">&quot;w3d&quot;</span>, <span class="string">&quot;fgd&quot;</span>, <span class="string">&quot;swa&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-doom&quot;</span>: [<span class="string">&quot;wad&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-dtbncx+xml&quot;</span>: [<span class="string">&quot;ncx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-dtbook+xml&quot;</span>: [<span class="string">&quot;dtb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-dtbresource+xml&quot;</span>: [<span class="string">&quot;res&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-dvi&quot;</span>: [<span class="string">&quot;dvi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-envoy&quot;</span>: [<span class="string">&quot;evy&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-eva&quot;</span>: [<span class="string">&quot;eva&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-bdf&quot;</span>: [<span class="string">&quot;bdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-ghostscript&quot;</span>: [<span class="string">&quot;gsf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-linux-psf&quot;</span>: [<span class="string">&quot;psf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-otf&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-font-pcf&quot;</span>: [<span class="string">&quot;pcf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-snf&quot;</span>: [<span class="string">&quot;snf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-ttf&quot;</span>: [<span class="string">&quot;ttf&quot;</span>, <span class="string">&quot;ttc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-font-type1&quot;</span>: [<span class="string">&quot;pfa&quot;</span>, <span class="string">&quot;pfb&quot;</span>, <span class="string">&quot;pfm&quot;</span>, <span class="string">&quot;afm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-freearc&quot;</span>: [<span class="string">&quot;arc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-futuresplash&quot;</span>: [<span class="string">&quot;spl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-gca-compressed&quot;</span>: [<span class="string">&quot;gca&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-glulx&quot;</span>: [<span class="string">&quot;ulx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-gnumeric&quot;</span>: [<span class="string">&quot;gnumeric&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-gramps-xml&quot;</span>: [<span class="string">&quot;gramps&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-gtar&quot;</span>: [<span class="string">&quot;gtar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-hdf&quot;</span>: [<span class="string">&quot;hdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-httpd-php&quot;</span>: [<span class="string">&quot;php&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-install-instructions&quot;</span>: [<span class="string">&quot;install&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-iso9660-image&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-java-archive-diff&quot;</span>: [<span class="string">&quot;jardiff&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-java-jnlp-file&quot;</span>: [<span class="string">&quot;jnlp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-latex&quot;</span>: [<span class="string">&quot;latex&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-lua-bytecode&quot;</span>: [<span class="string">&quot;luac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-lzh-compressed&quot;</span>: [<span class="string">&quot;lzh&quot;</span>, <span class="string">&quot;lha&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-makeself&quot;</span>: [<span class="string">&quot;run&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-mie&quot;</span>: [<span class="string">&quot;mie&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-mobipocket-ebook&quot;</span>: [<span class="string">&quot;prc&quot;</span>, <span class="string">&quot;mobi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ms-application&quot;</span>: [<span class="string">&quot;application&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ms-shortcut&quot;</span>: [<span class="string">&quot;lnk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ms-wmd&quot;</span>: [<span class="string">&quot;wmd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ms-wmz&quot;</span>: [<span class="string">&quot;wmz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ms-xbap&quot;</span>: [<span class="string">&quot;xbap&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msaccess&quot;</span>: [<span class="string">&quot;mdb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msbinder&quot;</span>: [<span class="string">&quot;obd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-mscardfile&quot;</span>: [<span class="string">&quot;crd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msclip&quot;</span>: [<span class="string">&quot;clp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msdos-program&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-msdownload&quot;</span>: [<span class="string">&quot;com&quot;</span>, <span class="string">&quot;bat&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msmediaview&quot;</span>: [<span class="string">&quot;mvb&quot;</span>, <span class="string">&quot;m13&quot;</span>, <span class="string">&quot;m14&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msmetafile&quot;</span>: [<span class="string">&quot;wmf&quot;</span>, <span class="string">&quot;emf&quot;</span>, <span class="string">&quot;emz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msmoney&quot;</span>: [<span class="string">&quot;mny&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-mspublisher&quot;</span>: [<span class="string">&quot;pub&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msschedule&quot;</span>: [<span class="string">&quot;scd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-msterminal&quot;</span>: [<span class="string">&quot;trm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-mswrite&quot;</span>: [<span class="string">&quot;wri&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-netcdf&quot;</span>: [<span class="string">&quot;nc&quot;</span>, <span class="string">&quot;cdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ns-proxy-autoconfig&quot;</span>: [<span class="string">&quot;pac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-nzb&quot;</span>: [<span class="string">&quot;nzb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-perl&quot;</span>: [<span class="string">&quot;pl&quot;</span>, <span class="string">&quot;pm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-pilot&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;application/x-pkcs12&quot;</span>: [<span class="string">&quot;p12&quot;</span>, <span class="string">&quot;pfx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-pkcs7-certificates&quot;</span>: [<span class="string">&quot;p7b&quot;</span>, <span class="string">&quot;spc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-pkcs7-certreqresp&quot;</span>: [<span class="string">&quot;p7r&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-rar-compressed&quot;</span>: [<span class="string">&quot;rar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-redhat-package-manager&quot;</span>: [<span class="string">&quot;rpm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-research-info-systems&quot;</span>: [<span class="string">&quot;ris&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-sea&quot;</span>: [<span class="string">&quot;sea&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-sh&quot;</span>: [<span class="string">&quot;sh&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-shar&quot;</span>: [<span class="string">&quot;shar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-shockwave-flash&quot;</span>: [<span class="string">&quot;swf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-silverlight-app&quot;</span>: [<span class="string">&quot;xap&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-sql&quot;</span>: [<span class="string">&quot;sql&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-stuffit&quot;</span>: [<span class="string">&quot;sit&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-stuffitx&quot;</span>: [<span class="string">&quot;sitx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-subrip&quot;</span>: [<span class="string">&quot;srt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-sv4cpio&quot;</span>: [<span class="string">&quot;sv4cpio&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-sv4crc&quot;</span>: [<span class="string">&quot;sv4crc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-t3vm-image&quot;</span>: [<span class="string">&quot;t3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tads&quot;</span>: [<span class="string">&quot;gam&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tar&quot;</span>: [<span class="string">&quot;tar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tcl&quot;</span>: [<span class="string">&quot;tcl&quot;</span>, <span class="string">&quot;tk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tex&quot;</span>: [<span class="string">&quot;tex&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tex-tfm&quot;</span>: [<span class="string">&quot;tfm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-texinfo&quot;</span>: [<span class="string">&quot;texinfo&quot;</span>, <span class="string">&quot;texi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-tgif&quot;</span>: [<span class="string">&quot;obj&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-ustar&quot;</span>: [<span class="string">&quot;ustar&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-hdd&quot;</span>: [<span class="string">&quot;hdd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-ova&quot;</span>: [<span class="string">&quot;ova&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-ovf&quot;</span>: [<span class="string">&quot;ovf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-vbox&quot;</span>: [<span class="string">&quot;vbox&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-vbox-extpack&quot;</span>: [<span class="string">&quot;vbox-extpack&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-vdi&quot;</span>: [<span class="string">&quot;vdi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-vhd&quot;</span>: [<span class="string">&quot;vhd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-virtualbox-vmdk&quot;</span>: [<span class="string">&quot;vmdk&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-wais-source&quot;</span>: [<span class="string">&quot;src&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-web-app-manifest+json&quot;</span>: [<span class="string">&quot;webapp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-x509-ca-cert&quot;</span>: [<span class="string">&quot;der&quot;</span>, <span class="string">&quot;crt&quot;</span>, <span class="string">&quot;pem&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-xfig&quot;</span>: [<span class="string">&quot;fig&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-xliff+xml&quot;</span>: [<span class="string">&quot;xlf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-xpinstall&quot;</span>: [<span class="string">&quot;xpi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-xz&quot;</span>: [<span class="string">&quot;xz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;application/x-zmachine&quot;</span>: [<span class="string">&quot;z1&quot;</span>, <span class="string">&quot;z2&quot;</span>, <span class="string">&quot;z3&quot;</span>, <span class="string">&quot;z4&quot;</span>, <span class="string">&quot;z5&quot;</span>, <span class="string">&quot;z6&quot;</span>, <span class="string">&quot;z7&quot;</span>, <span class="string">&quot;z8&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.dece.audio&quot;</span>: [<span class="string">&quot;uva&quot;</span>, <span class="string">&quot;uvva&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.digital-winds&quot;</span>: [<span class="string">&quot;eol&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.dra&quot;</span>: [<span class="string">&quot;dra&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.dts&quot;</span>: [<span class="string">&quot;dts&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.dts.hd&quot;</span>: [<span class="string">&quot;dtshd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.lucent.voice&quot;</span>: [<span class="string">&quot;lvp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.ms-playready.media.pya&quot;</span>: [<span class="string">&quot;pya&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.nuera.ecelp4800&quot;</span>: [<span class="string">&quot;ecelp4800&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.nuera.ecelp7470&quot;</span>: [<span class="string">&quot;ecelp7470&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.nuera.ecelp9600&quot;</span>: [<span class="string">&quot;ecelp9600&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/vnd.rip&quot;</span>: [<span class="string">&quot;rip&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-aac&quot;</span>: [<span class="string">&quot;aac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-aiff&quot;</span>: [<span class="string">&quot;aif&quot;</span>, <span class="string">&quot;aiff&quot;</span>, <span class="string">&quot;aifc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-caf&quot;</span>: [<span class="string">&quot;caf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-flac&quot;</span>: [<span class="string">&quot;flac&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-m4a&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;audio/x-matroska&quot;</span>: [<span class="string">&quot;mka&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-mpegurl&quot;</span>: [<span class="string">&quot;m3u&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-ms-wax&quot;</span>: [<span class="string">&quot;wax&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-ms-wma&quot;</span>: [<span class="string">&quot;wma&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-pn-realaudio&quot;</span>: [<span class="string">&quot;ram&quot;</span>, <span class="string">&quot;ra&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-pn-realaudio-plugin&quot;</span>: [<span class="string">&quot;rmp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;audio/x-realaudio&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;audio/x-wav&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;chemical/x-cdx&quot;</span>: [<span class="string">&quot;cdx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;chemical/x-cif&quot;</span>: [<span class="string">&quot;cif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;chemical/x-cmdf&quot;</span>: [<span class="string">&quot;cmdf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;chemical/x-cml&quot;</span>: [<span class="string">&quot;cml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;chemical/x-csml&quot;</span>: [<span class="string">&quot;csml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;chemical/x-xyz&quot;</span>: [<span class="string">&quot;xyz&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/prs.btif&quot;</span>: [<span class="string">&quot;btif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.adobe.photoshop&quot;</span>: [<span class="string">&quot;psd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.dece.graphic&quot;</span>: [<span class="string">&quot;uvi&quot;</span>, <span class="string">&quot;uvvi&quot;</span>, <span class="string">&quot;uvg&quot;</span>, <span class="string">&quot;uvvg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.djvu&quot;</span>: [<span class="string">&quot;djvu&quot;</span>, <span class="string">&quot;djv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.dvb.subtitle&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;image/vnd.dwg&quot;</span>: [<span class="string">&quot;dwg&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.dxf&quot;</span>: [<span class="string">&quot;dxf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.fastbidsheet&quot;</span>: [<span class="string">&quot;fbs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.fpx&quot;</span>: [<span class="string">&quot;fpx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.fst&quot;</span>: [<span class="string">&quot;fst&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.fujixerox.edmics-mmr&quot;</span>: [<span class="string">&quot;mmr&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.fujixerox.edmics-rlc&quot;</span>: [<span class="string">&quot;rlc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.ms-modi&quot;</span>: [<span class="string">&quot;mdi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.ms-photo&quot;</span>: [<span class="string">&quot;wdp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.net-fpx&quot;</span>: [<span class="string">&quot;npx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.wap.wbmp&quot;</span>: [<span class="string">&quot;wbmp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/vnd.xiff&quot;</span>: [<span class="string">&quot;xif&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-3ds&quot;</span>: [<span class="string">&quot;3ds&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-cmu-raster&quot;</span>: [<span class="string">&quot;ras&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-cmx&quot;</span>: [<span class="string">&quot;cmx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-freehand&quot;</span>: [<span class="string">&quot;fh&quot;</span>, <span class="string">&quot;fhc&quot;</span>, <span class="string">&quot;fh4&quot;</span>, <span class="string">&quot;fh5&quot;</span>, <span class="string">&quot;fh7&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-icon&quot;</span>: [<span class="string">&quot;ico&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-jng&quot;</span>: [<span class="string">&quot;jng&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-mrsid-image&quot;</span>: [<span class="string">&quot;sid&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-ms-bmp&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;image/x-pcx&quot;</span>: [<span class="string">&quot;pcx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-pict&quot;</span>: [<span class="string">&quot;pic&quot;</span>, <span class="string">&quot;pct&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-portable-anymap&quot;</span>: [<span class="string">&quot;pnm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-portable-bitmap&quot;</span>: [<span class="string">&quot;pbm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-portable-graymap&quot;</span>: [<span class="string">&quot;pgm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-portable-pixmap&quot;</span>: [<span class="string">&quot;ppm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-rgb&quot;</span>: [<span class="string">&quot;rgb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-tga&quot;</span>: [<span class="string">&quot;tga&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-xbitmap&quot;</span>: [<span class="string">&quot;xbm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-xpixmap&quot;</span>: [<span class="string">&quot;xpm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;image/x-xwindowdump&quot;</span>: [<span class="string">&quot;xwd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.collada+xml&quot;</span>: [<span class="string">&quot;dae&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.dwf&quot;</span>: [<span class="string">&quot;dwf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.gdl&quot;</span>: [<span class="string">&quot;gdl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.gtw&quot;</span>: [<span class="string">&quot;gtw&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.mts&quot;</span>: [<span class="string">&quot;mts&quot;</span>],</span><br><span class="line">    <span class="string">&quot;model/vnd.vtu&quot;</span>: [<span class="string">&quot;vtu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/prs.lines.tag&quot;</span>: [<span class="string">&quot;dsc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.curl&quot;</span>: [<span class="string">&quot;curl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.curl.dcurl&quot;</span>: [<span class="string">&quot;dcurl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.curl.mcurl&quot;</span>: [<span class="string">&quot;mcurl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.curl.scurl&quot;</span>: [<span class="string">&quot;scurl&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.dvb.subtitle&quot;</span>: [<span class="string">&quot;sub&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.fly&quot;</span>: [<span class="string">&quot;fly&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.fmi.flexstor&quot;</span>: [<span class="string">&quot;flx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.graphviz&quot;</span>: [<span class="string">&quot;gv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.in3d.3dml&quot;</span>: [<span class="string">&quot;3dml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.in3d.spot&quot;</span>: [<span class="string">&quot;spot&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.sun.j2me.app-descriptor&quot;</span>: [<span class="string">&quot;jad&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.wap.wml&quot;</span>: [<span class="string">&quot;wml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/vnd.wap.wmlscript&quot;</span>: [<span class="string">&quot;wmls&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-asm&quot;</span>: [<span class="string">&quot;s&quot;</span>, <span class="string">&quot;asm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-c&quot;</span>: [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;cc&quot;</span>, <span class="string">&quot;cxx&quot;</span>, <span class="string">&quot;cpp&quot;</span>, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;hh&quot;</span>, <span class="string">&quot;dic&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-component&quot;</span>: [<span class="string">&quot;htc&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-fortran&quot;</span>: [<span class="string">&quot;f&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;f77&quot;</span>, <span class="string">&quot;f90&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-handlebars-template&quot;</span>: [<span class="string">&quot;hbs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-java-source&quot;</span>: [<span class="string">&quot;java&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-lua&quot;</span>: [<span class="string">&quot;lua&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-markdown&quot;</span>: [<span class="string">&quot;mkd&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-nfo&quot;</span>: [<span class="string">&quot;nfo&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-opml&quot;</span>: [<span class="string">&quot;opml&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-org&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;text/x-pascal&quot;</span>: [<span class="string">&quot;p&quot;</span>, <span class="string">&quot;pas&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-processing&quot;</span>: [<span class="string">&quot;pde&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-sass&quot;</span>: [<span class="string">&quot;sass&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-scss&quot;</span>: [<span class="string">&quot;scss&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-setext&quot;</span>: [<span class="string">&quot;etx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-sfv&quot;</span>: [<span class="string">&quot;sfv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-suse-ymp&quot;</span>: [<span class="string">&quot;ymp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-uuencode&quot;</span>: [<span class="string">&quot;uu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-vcalendar&quot;</span>: [<span class="string">&quot;vcs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;text/x-vcard&quot;</span>: [<span class="string">&quot;vcf&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dece.hd&quot;</span>: [<span class="string">&quot;uvh&quot;</span>, <span class="string">&quot;uvvh&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dece.mobile&quot;</span>: [<span class="string">&quot;uvm&quot;</span>, <span class="string">&quot;uvvm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dece.pd&quot;</span>: [<span class="string">&quot;uvp&quot;</span>, <span class="string">&quot;uvvp&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dece.sd&quot;</span>: [<span class="string">&quot;uvs&quot;</span>, <span class="string">&quot;uvvs&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dece.video&quot;</span>: [<span class="string">&quot;uvv&quot;</span>, <span class="string">&quot;uvvv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.dvb.file&quot;</span>: [<span class="string">&quot;dvb&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.fvt&quot;</span>: [<span class="string">&quot;fvt&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.mpegurl&quot;</span>: [<span class="string">&quot;mxu&quot;</span>, <span class="string">&quot;m4u&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.ms-playready.media.pyv&quot;</span>: [<span class="string">&quot;pyv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.uvvu.mp4&quot;</span>: [<span class="string">&quot;uvu&quot;</span>, <span class="string">&quot;uvvu&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/vnd.vivo&quot;</span>: [<span class="string">&quot;viv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-f4v&quot;</span>: [<span class="string">&quot;f4v&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-fli&quot;</span>: [<span class="string">&quot;fli&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-flv&quot;</span>: [<span class="string">&quot;flv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-m4v&quot;</span>: [<span class="string">&quot;m4v&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-matroska&quot;</span>: [<span class="string">&quot;mkv&quot;</span>, <span class="string">&quot;mk3d&quot;</span>, <span class="string">&quot;mks&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-mng&quot;</span>: [<span class="string">&quot;mng&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-asf&quot;</span>: [<span class="string">&quot;asf&quot;</span>, <span class="string">&quot;asx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-vob&quot;</span>: [<span class="string">&quot;vob&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-wm&quot;</span>: [<span class="string">&quot;wm&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-wmv&quot;</span>: [<span class="string">&quot;wmv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-wmx&quot;</span>: [<span class="string">&quot;wmx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-ms-wvx&quot;</span>: [<span class="string">&quot;wvx&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-msvideo&quot;</span>: [<span class="string">&quot;avi&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-sgi-movie&quot;</span>: [<span class="string">&quot;movie&quot;</span>],</span><br><span class="line">    <span class="string">&quot;video/x-smv&quot;</span>: [<span class="string">&quot;smv&quot;</span>],</span><br><span class="line">    <span class="string">&quot;x-conference/x-cooltalk&quot;</span>: [<span class="string">&quot;ice&quot;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><ul>
<li>安装 pm2</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install pm2 -g</span><br></pre></td></tr></table></figure>

<ul>
<li>运行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 start app.js </span><br><span class="line"><span class="comment">#更多具体配置参数可以查看pm2官网</span></span><br><span class="line"><span class="comment">#http://pm2.keymetrics.io/docs/usage/quick-start/ </span></span><br></pre></td></tr></table></figure>
<ul>
<li>更多命令,可以查看pm2官网</li>
</ul>
]]></content>
      <categories>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>js</tag>
        <tag>javascript</tag>
        <tag>服务器</tag>
      </tags>
  </entry>
  <entry>
    <title>ORACLE 运维命令</title>
    <url>/2017/06/16/oracle-operations/</url>
    <content><![CDATA[<h2 id="本文是本人在运维过程中常用的脚本-bash脚本"><a href="#本文是本人在运维过程中常用的脚本-bash脚本" class="headerlink" title="本文是本人在运维过程中常用的脚本### bash脚本"></a>本文是本人在运维过程中常用的脚本<br><span id="more"></span><br>### bash脚本<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--查看数据库字符集</span></span><br><span class="line"><span class="keyword">select</span> userenv(<span class="string">&#x27;language&#x27;</span>) nls_lang <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--dmp文件第2、3字节记录的字符集</span></span><br><span class="line"><span class="keyword">select</span> nls_charset_name(to_number(<span class="string">&#x27;0354&#x27;</span>,<span class="string">&#x27;xxxx&#x27;</span>)) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--关闭、启用外键</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;alter table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27; enable constraint &#x27;</span><span class="operator">||</span>constraint_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">from</span> user_constraints <span class="keyword">where</span> constraint_type<span class="operator">=</span><span class="string">&#x27;R&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;alter table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27; disable constraint &#x27;</span><span class="operator">||</span>constraint_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">from</span> user_constraints <span class="keyword">where</span> constraint_type<span class="operator">=</span><span class="string">&#x27;R&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--禁用、启用用户创建的触发器</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;alter trigger &#x27;</span><span class="operator">||</span> OBJECT_NAME <span class="operator">||</span><span class="string">&#x27; disable;&#x27;</span> <span class="keyword">FROM</span> DBA_OBJECTS <span class="keyword">WHERE</span> OBJECT_TYPE<span class="operator">=</span><span class="string">&#x27;TRIGGER&#x27;</span> <span class="keyword">and</span> owner<span class="operator">=</span><span class="string">&#x27;YO_ONLINE&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> OBJECT_NAME;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;alter trigger &#x27;</span><span class="operator">||</span> OBJECT_NAME <span class="operator">||</span><span class="string">&#x27; enable;&#x27;</span> <span class="keyword">FROM</span> DBA_OBJECTS <span class="keyword">WHERE</span> OBJECT_TYPE<span class="operator">=</span><span class="string">&#x27;TRIGGER&#x27;</span> <span class="keyword">and</span> owner<span class="operator">=</span><span class="string">&#x27;YO_ONLINE&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> OBJECT_NAME;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除表数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;truncate table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">FROM</span> ALL_TABLES <span class="keyword">WHERE</span> OWNER<span class="operator">=</span><span class="string">&#x27;YO_TEST&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;drop table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">FROM</span> ALL_TABLES <span class="keyword">WHERE</span> OWNER<span class="operator">=</span><span class="string">&#x27;YO_TEST&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ATS.NUM_ROWS,ATS.TABLE_NAME <span class="keyword">FROM</span> ALL_TABLES ATS <span class="keyword">WHERE</span> ATS.OWNER<span class="operator">=</span><span class="string">&#x27;YO_ONLINE&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> ATS.TABLE_NAME <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--设置显示宽度、长度</span></span><br><span class="line"><span class="keyword">show</span> pagesize; <span class="comment">--查看目前的pagesize</span></span><br><span class="line"><span class="keyword">set</span> pagesize <span class="number">300</span>; <span class="comment">--设置pagesize为300</span></span><br><span class="line"><span class="keyword">show</span> linesize; <span class="comment">--查看当前的linesize宽度</span></span><br><span class="line"><span class="keyword">set</span> linesize <span class="number">300</span>; <span class="comment">--设置linesize宽度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--修改字符集</span></span><br><span class="line">sqlplus <span class="operator">/</span>nolog</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">connect</span> sys<span class="operator">/</span>sys <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span>SHUTDOWN IMMEDIATE</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span>STARTUP MOUNT;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> ENABLE RESTRICTED SESSION;  </span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> JOB_QUEUE_PROCESSES<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> AQ_TM_PROCESSES<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> DATABASE <span class="keyword">OPEN</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> DATABASE <span class="type">CHARACTER</span> <span class="keyword">SET</span> INTERNAL_USE ZHS16GBK; <span class="operator">/</span><span class="operator">/</span>跳过超子集检测</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">ALTER</span> DATABASE <span class="type">national</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> INTERNAL ZHS16GBK;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span>SHUTDOWN IMMEDIATE;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span>STARTUP</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> conn <span class="operator">/</span><span class="keyword">as</span> sysdba</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">Connected.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> shutdown immediate;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">Database closed.</span><br><span class="line"></span><br><span class="line">Database dismounted.</span><br><span class="line"></span><br><span class="line">ORACLE instance shut down.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> startup mount</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total <span class="keyword">System</span> <span class="keyword">Global</span> Area  <span class="number">236000356</span> bytes</span><br><span class="line"></span><br><span class="line">Fixed Size                   <span class="number">451684</span> bytes</span><br><span class="line"></span><br><span class="line">Variable Size             <span class="number">201326592</span> bytes</span><br><span class="line"></span><br><span class="line">Database Buffers           <span class="number">33554432</span> bytes</span><br><span class="line"></span><br><span class="line">Redo Buffers                 <span class="number">667648</span> bytes</span><br><span class="line"></span><br><span class="line">Database mounted.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> ENABLE RESTRICTED SESSION;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> JOB_QUEUE_PROCESSES<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> AQ_TM_PROCESSES<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database <span class="keyword">open</span>;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> DATABASE <span class="type">CHARACTER</span> <span class="keyword">SET</span> AL32UTF8; <span class="comment">--ZHS16GBK;</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE <span class="type">CHARACTER</span> <span class="keyword">SET</span> ZHS16GBK</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span></span><br><span class="line"></span><br><span class="line">ERROR <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line"></span><br><span class="line">ORA<span class="number">-12712</span>: <span class="keyword">new</span> <span class="type">character</span> <span class="keyword">set</span> must be a superset <span class="keyword">of</span> <span class="keyword">old</span> <span class="type">character</span> <span class="keyword">set</span></span><br><span class="line"></span><br><span class="line">提示我们的字符集：新字符集必须为旧字符集的超集，这时我们可以跳过超集的检查做更改：</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> DATABASE <span class="type">character</span> <span class="keyword">set</span> INTERNAL_USE AL32UTF8;  <span class="comment">--ZHS16GBK;</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">Database altered.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> v$nls_parameters;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">略</span><br><span class="line"></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> selected.</span><br><span class="line"></span><br><span class="line">重启检查是否更改完成：</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> shutdown immediate;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">Database closed.</span><br><span class="line"></span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> startup</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">ORACLE instance started.</span><br><span class="line">Total <span class="keyword">System</span> <span class="keyword">Global</span> Area  <span class="number">236000356</span> bytes</span><br><span class="line">Fixed Size                   <span class="number">451684</span> bytes</span><br><span class="line">Variable Size             <span class="number">201326592</span> bytes</span><br><span class="line">Database Buffers           <span class="number">33554432</span> bytes</span><br><span class="line">Redo Buffers                 <span class="number">667648</span> bytes</span><br><span class="line">Database mounted.</span><br><span class="line">Database opened.</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> v$nls_parameters;</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">略</span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> selected.</span><br><span class="line"></span><br><span class="line">D、client端字符集修改</span><br><span class="line"></span><br><span class="line">在 <span class="operator">/</span>home<span class="operator">/</span>oracle与 <span class="operator">/</span>root用户目录下的.bash_profile中</span><br><span class="line"></span><br><span class="line">添加或修改 export NLS_LANG<span class="operator">=</span>&quot;AMERICAN_AMERICA.UTF8&quot; 语句</span><br><span class="line"></span><br><span class="line">关闭当前ssh窗口。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--导出、导入</span></span><br><span class="line">exp</span><br><span class="line">imp cross_dev<span class="operator">/</span>sss<span class="variable">@cross_test</span> fromuser<span class="operator">=</span>cross_dev touser<span class="operator">=</span>cross_dev <span class="keyword">rows</span><span class="operator">=</span>y indexes<span class="operator">=</span>n ignore<span class="operator">=</span>y <span class="keyword">commit</span><span class="operator">=</span>y file<span class="operator">=</span>d:\cross_dev.dmp</span><br><span class="line"></span><br><span class="line"><span class="comment">--oracle server字符集</span></span><br><span class="line"><span class="keyword">select</span> userenv(<span class="string">&#x27;language&#x27;</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--oracle dmp字符集</span></span><br><span class="line">用oracle的exp工具导出的dmp文件也包含了字符集信息，dmp文件的第<span class="number">2</span>和第<span class="number">3</span>个字节记录了dmp文件的字符集。如果dmp文件不大，比如只有几M或几十M，</span><br><span class="line">可以用UltraEdit打开(<span class="number">16</span>进制方式)，看第<span class="number">2</span>第<span class="number">3</span>个字节的内容，如<span class="number">0354</span>，然后用以下<span class="keyword">SQL</span>查出它对应的字符集:</span><br><span class="line"><span class="keyword">select</span> nls_charset_name(to_number(<span class="string">&#x27;0354&#x27;</span>,<span class="string">&#x27;xxxx&#x27;</span>)) <span class="keyword">from</span> dual;</span><br><span class="line">如果dmp文件很大，比如有<span class="number">2</span>G以上(这也是最常见的情况)，用文本编辑器打开很慢或者完全打不开，可以用以下命令(在unix主机上):</span><br><span class="line">cat exp.dmp <span class="operator">|</span>od <span class="operator">-</span>x<span class="operator">|</span>head <span class="number">-1</span><span class="operator">|</span>awk <span class="string">&#x27;&#123;print $2 $3&#125;&#x27;</span><span class="operator">|</span>cut <span class="operator">-</span>c <span class="number">3</span><span class="number">-6</span></span><br><span class="line">然后用上述<span class="keyword">SQL</span>也可以得到它对应的字符集。</span><br><span class="line"></span><br><span class="line"><span class="comment">--oracle client端的字符集</span></span><br><span class="line">$echo $NLS_LANG</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>).数据库服务器字符集</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> nls_database_parameters</span><br><span class="line">来源于props$，是表示数据库的字符集。</span><br><span class="line"></span><br><span class="line">(<span class="number">2</span>).客户端字符集环境</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> nls_instance_parameters</span><br><span class="line">其来源于v$<span class="keyword">parameter</span>，表示客户端的字符集的设置，可能是参数文件，环境变量或者是注册表</span><br><span class="line"></span><br><span class="line">(<span class="number">3</span>).会话字符集环境</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> nls_session_parameters</span><br><span class="line">来源于v$nls_parameters，表示会话自己的设置，可能是会话的环境变量或者是<span class="keyword">alter</span> session完成，如果会话没有特殊的设置，将与nls_instance_parameters一致。</span><br><span class="line"></span><br><span class="line">(<span class="number">4</span>).客户端的字符集要求与服务器一致，才能正确显示数据库的非Ascii字符。</span><br><span class="line">如果多个设置存在的时候，NLS作用优先级别：<span class="keyword">Sql</span> <span class="keyword">function</span> <span class="operator">&gt;</span> <span class="keyword">alter</span> session <span class="operator">&gt;</span> 环境变量或注册表<span class="operator">&gt;</span> 参数文件<span class="operator">&gt;</span> 数据库默认参数</span><br><span class="line"></span><br><span class="line">字符集要求一致，但是语言设置却可以不同，语言设置建议用英文。如字符集是zhs16gbk，则nls_lang可以是American_America.zhs16gbk。</span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>导入数据<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="comment">--登录oracle的sqlplus</span></span><br><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查看主数据库归档日志的sequence是否一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sequence#) <span class="keyword">from</span> v$archived_log;</span><br><span class="line"></span><br><span class="line"><span class="comment">---查看当前的数据库文件（表空间）存放位置：</span></span><br><span class="line"> <span class="keyword">select</span> name <span class="keyword">from</span> v$datafile;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建表空间</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space yoonline datafile <span class="string">&#x27;/data/app/oracle/oradata/orcl/yoonline01.dbf&#x27;</span> size <span class="number">3072</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space yoonline datafile <span class="string">&#x27;/data/app/oracle/oradata/yo/yoonline01.dbf&#x27;</span> size <span class="number">4096</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space yotest datafile <span class="string">&#x27;/data/app/oracle/oradata/orcl/yotest01.dbf&#x27;</span> size <span class="number">4096</span>m;</span><br><span class="line">　<span class="number">3000</span>m指的是<span class="number">3000</span>MB,<span class="number">10</span>G</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建用户并指定表空间</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> yo_online identified <span class="keyword">by</span> yo_online123 <span class="keyword">default</span> tablespace yoonline;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> yo_test identified <span class="keyword">by</span> yo_test123 <span class="keyword">default</span> tablespace yotest;</span><br><span class="line"></span><br><span class="line"><span class="comment">--给用户授权</span></span><br><span class="line"><span class="keyword">grant</span> dba,<span class="keyword">connect</span>,resource <span class="keyword">to</span> yo_online;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询服务器端的字符集</span></span><br><span class="line"><span class="keyword">select</span> userenv(<span class="string">&#x27;language&#x27;</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除用户所有表</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;drop table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">from</span> cat <span class="keyword">where</span> table_type<span class="operator">=</span><span class="string">&#x27;TABLE&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--退出sqlplus,设置client端字符集与服务端一致</span></span><br><span class="line">export NLS_LANG<span class="operator">=</span>AMERICAN_AMERICA.AL32UTF8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--批量建表</span></span><br><span class="line"></span><br><span class="line">在命令窗口执行</span><br><span class="line">@（<span class="keyword">sql</span>文件位置）</span><br><span class="line"></span><br><span class="line"><span class="comment">--关闭、启用外键</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;alter table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27; enable constraint &#x27;</span><span class="operator">||</span>constraint_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">from</span> user_constraints <span class="keyword">where</span> constraint_type<span class="operator">=</span><span class="string">&#x27;R&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;alter table &#x27;</span><span class="operator">||</span>table_name<span class="operator">||</span><span class="string">&#x27; disable constraint &#x27;</span><span class="operator">||</span>constraint_name<span class="operator">||</span><span class="string">&#x27;;&#x27;</span> <span class="keyword">from</span> user_constraints <span class="keyword">where</span> constraint_type<span class="operator">=</span><span class="string">&#x27;R&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--禁用、启用用户创建的触发器</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;alter trigger &#x27;</span><span class="operator">||</span> OBJECT_NAME <span class="operator">||</span><span class="string">&#x27; disable;&#x27;</span> <span class="keyword">FROM</span> DBA_OBJECTS <span class="keyword">WHERE</span> OBJECT_TYPE<span class="operator">=</span><span class="string">&#x27;TRIGGER&#x27;</span> <span class="keyword">and</span> owner<span class="operator">=</span><span class="string">&#x27;YO_ONLINE&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> OBJECT_NAME;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;alter trigger &#x27;</span><span class="operator">||</span> OBJECT_NAME <span class="operator">||</span><span class="string">&#x27; enable;&#x27;</span> <span class="keyword">FROM</span> DBA_OBJECTS <span class="keyword">WHERE</span> OBJECT_TYPE<span class="operator">=</span><span class="string">&#x27;TRIGGER&#x27;</span> <span class="keyword">and</span> owner<span class="operator">=</span><span class="string">&#x27;YO_ONLINE&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> OBJECT_NAME;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--修改表的字段长度</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;ALTER TABLE &#x27;</span><span class="operator">||</span>TABLE_NAME<span class="operator">||</span><span class="string">&#x27; MODIFY &#x27;</span><span class="operator">||</span>COLUMN_NAME<span class="operator">||</span><span class="string">&#x27; VARCHAR2(1000);&#x27;</span> <span class="keyword">from</span> user_tab_columns <span class="keyword">where</span> data_type<span class="operator">=</span><span class="string">&#x27;VARCHAR2&#x27;</span> <span class="keyword">AND</span> DATA_LENGTH<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">AND</span> DATA_LENGTH<span class="operator">&lt;</span><span class="number">1000</span> <span class="keyword">and</span> TABLE_NAME <span class="keyword">like</span> <span class="string">&#x27;T%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;ALTER TABLE &#x27;</span><span class="operator">||</span>TABLE_NAME<span class="operator">||</span><span class="string">&#x27; MODIFY &#x27;</span><span class="operator">||</span>COLUMN_NAME<span class="operator">||</span><span class="string">&#x27; VARCHAR2(200);&#x27;</span> <span class="keyword">from</span> user_tab_columns <span class="keyword">where</span> data_type<span class="operator">=</span><span class="string">&#x27;VARCHAR2&#x27;</span> <span class="keyword">AND</span> DATA_LENGTH<span class="operator">&lt;</span><span class="number">100</span> <span class="keyword">and</span> TABLE_NAME <span class="keyword">like</span> <span class="string">&#x27;T%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">### expdp导出 impdp导入数据</span><br><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">execute</span> dbms_metadata_util.load_stylesheets;</span><br><span class="line"></span><br><span class="line">expdp yogs<span class="operator">/</span>yogsdbserver<span class="variable">@orcl</span> TABLES<span class="operator">=</span>t_bs_test dumpfile<span class="operator">=</span>expdp.dmp logfile<span class="operator">=</span>expdp.log DIRECTORY<span class="operator">=</span>dpdata;</span><br><span class="line"></span><br></pre></td></tr></table></figure></h2><h2 id="扩展表空间"><a href="#扩展表空间" class="headerlink" title="扩展表空间"></a>扩展表空间</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><ul>
<li><p>首先查看表空间的名字和所属文件</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tablespace_name, file_id, file_name,round(bytes<span class="operator">/</span>(<span class="number">1024</span><span class="operator">*</span><span class="number">1024</span>),<span class="number">0</span>) total_space</span><br><span class="line"><span class="keyword">from</span> dba_data_files</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> tablespace_name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表空间的使用情况</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(bytes) <span class="operator">/</span> (<span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span>) <span class="keyword">AS</span> free_space, tablespace_name</span><br><span class="line"><span class="keyword">FROM</span> dba_free_space</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name;</span><br><span class="line"><span class="keyword">SELECT</span> a.tablespace_name,</span><br><span class="line">a.bytes total,</span><br><span class="line">b.bytes used,</span><br><span class="line">c.bytes <span class="keyword">free</span>,</span><br><span class="line">(b.bytes <span class="operator">*</span> <span class="number">100</span>) <span class="operator">/</span> a.bytes &quot;% USED &quot;,</span><br><span class="line">(c.bytes <span class="operator">*</span> <span class="number">100</span>) <span class="operator">/</span> a.bytes &quot;% FREE &quot;</span><br><span class="line"><span class="keyword">FROM</span> sys.sm$ts_avail a, sys.sm$ts_used b, sys.sm$ts_free c</span><br><span class="line"><span class="keyword">WHERE</span> a.tablespace_name <span class="operator">=</span> b.tablespace_name</span><br><span class="line"><span class="keyword">AND</span> a.tablespace_name <span class="operator">=</span> c.tablespace_name;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-增加数据文件"><a href="#1-增加数据文件" class="headerlink" title="1.增加数据文件"></a>1.增加数据文件</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>SPACE game <span class="keyword">ADD</span> DATAFILE <span class="string">&#x27;/oracle/oradata/db/GAME02.dbf&#x27;</span> SIZE <span class="number">1000</span>M;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>SPACE YOONLINE <span class="keyword">ADD</span> DATAFILE <span class="string">&#x27;/data/oradata/yo/yoonline01.dbf&#x27;</span> SIZE <span class="number">20480</span>M;</span><br></pre></td></tr></table></figure>

<h3 id="2-手动增加数据文件尺寸"><a href="#2-手动增加数据文件尺寸" class="headerlink" title="2.手动增加数据文件尺寸"></a>2.手动增加数据文件尺寸</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE DATAFILE <span class="string">&#x27;/oracle/oradata/db/GAME.dbf&#x27;</span> RESIZE <span class="number">4000</span>M;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE DATAFILE <span class="string">&#x27;/data/oradata/yo/yoonline01.dbf&#x27;</span> RESIZE <span class="number">20480</span>M;</span><br></pre></td></tr></table></figure>

<h3 id="3-设定数据文件自动扩展"><a href="#3-设定数据文件自动扩展" class="headerlink" title="3.设定数据文件自动扩展"></a>3.设定数据文件自动扩展</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE DATAFILE <span class="string">&#x27;/oracle/oradata/db/GAME.dbf&#x27;</span> AUTOEXTEND <span class="keyword">ON</span> NEXT <span class="number">100</span>M MAXSIZE <span class="number">10000</span>M;</span><br></pre></td></tr></table></figure>

<h3 id="设定后查看表空间信息"><a href="#设定后查看表空间信息" class="headerlink" title="设定后查看表空间信息"></a>设定后查看表空间信息</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.TABLESPACE_NAME,A.BYTES TOTAL,B.BYTES USED,C.BYTES <span class="keyword">FREE</span>,(B.BYTES<span class="operator">*</span><span class="number">100</span>)<span class="operator">/</span>A.BYTES &quot;% USED&quot;,(C.BYTES<span class="operator">*</span><span class="number">100</span>)<span class="operator">/</span>A.BYTES &quot;% FREE&quot;</span><br><span class="line"><span class="keyword">FROM</span> SYS.SM$TS_AVAIL A,SYS.SM$TS_USED B,SYS.SM$TS_FREE C</span><br><span class="line"><span class="keyword">WHERE</span> A.TABLESPACE_NAME<span class="operator">=</span>B.TABLESPACE_NAME <span class="keyword">AND</span> A.TABLESPACE_NAME<span class="operator">=</span>C.TABLESPACE_NAME;</span><br></pre></td></tr></table></figure>

<h3 id="启动oracle"><a href="#启动oracle" class="headerlink" title="启动oracle"></a>启动oracle</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlplus /as sysdba</span><br><span class="line">sqlplus / as sysdba</span><br><span class="line">startup</span><br><span class="line"></span><br><span class="line">lsnrctl start</span><br><span class="line"></span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 1521 -j ACCEPT</span><br><span class="line">/etc/init.d/iptables stop</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="导入备份数据"><a href="#导入备份数据" class="headerlink" title="导入备份数据"></a>导入备份数据</h3><ul>
<li>切换用户<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su oracle</span><br></pre></td></tr></table></figure></li>
<li>环境变量生效  到~目录(当前登录用户目录)<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ./bash-profie</span><br><span class="line"><span class="comment">#或者 source .bash_profile</span></span><br></pre></td></tr></table></figure></li>
<li>导入数据<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">imp 用户/密码 fromuser=备份数据用户 touser=要导入数据的用户 rows=y indexes=n ignore=y commit=y file=dmp文件地址</span><br><span class="line"><span class="comment"># 如果导入数据量大 加入 feedback=10000 buffer=20480000 参数可以根据实际情况调整</span></span><br><span class="line"><span class="comment"># 例子</span></span><br><span class="line">./imp yo_test/yo_test123 fromuser=yo_online touser=yo_test rows=y indexes=n ignore=y commit=y feedback=10000 buffer=20480000 file=/data/orabak/oracleBack_201605222219.dmp</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>运维</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>SpingBoot 程序 部署</title>
    <url>/2017/06/09/spring-d/</url>
    <content><![CDATA[<p>1，maven插件：          </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<p>2，mvn clean package 打成jar包 当看到 BUILD SUCCESS 代表成功！</p>
<p>3，上传jar包到服务器上 这jar包有点大</p>
<p>4，编写shell脚本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -f tpid <span class="comment">#删除tpid文件</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar springboot.jar &gt; cmd.out 2&gt;&amp;1 &amp; <span class="comment">#这里可以配置使用的配置文件  把控制台输出流输出到cmd.out文件</span></span><br><span class="line"><span class="built_in">echo</span> $! &gt; tpid <span class="comment">#记录进程id 以便杀死进程</span></span><br><span class="line"><span class="built_in">echo</span> Start Success! <span class="comment">#输出成功的信息</span></span><br></pre></td></tr></table></figure>

<p>5，关闭</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> tpid 可以查看进程编号，或ps -ef | grep java 查询springboot程序进程，使用<span class="built_in">kill</span> 命令结束 ，用法如下</span><br><span class="line"><span class="built_in">kill</span> -15 pid，是先关闭和其有关的程序，再将其关闭</span><br><span class="line"><span class="built_in">kill</span> -9 pid，是不顾后果的强制终止(如果的你的速度够快，有时候是和ctrl＋c是一样的)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>java</tag>
        <tag>spring</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>dsupervisor 简单教程</title>
    <url>/2019/04/27/supervisor/</url>
    <content><![CDATA[<h2 id="安装supervisor"><a href="#安装supervisor" class="headerlink" title="安装supervisor"></a>安装supervisor</h2><p><a href="http://www.supervisord.org/installing.html">官方安装教程</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install supervisor</span><br></pre></td></tr></table></figure>
<p>如果环境没有 pip工具</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget supervisor下载地址</span><br><span class="line">tar -zxvf supervisor-x.x.x.tar.gz  <span class="comment">#解压</span></span><br><span class="line"><span class="built_in">cd</span> supervisor-x.x.x</span><br><span class="line">python setup.py install <span class="comment">#本地python版本为python2.7</span></span><br><span class="line"><span class="comment"># python2.7 setup.py install #本地python版本为python3以上</span></span><br></pre></td></tr></table></figure>

<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="生成配置文件"><a href="#生成配置文件" class="headerlink" title="生成配置文件"></a>生成配置文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">echo_supervisord_conf &gt; /etc/supervisord.conf</span><br></pre></td></tr></table></figure>

<h3 id="启动supervisor"><a href="#启动supervisor" class="headerlink" title="启动supervisor"></a>启动supervisor</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">supervisord -c /etc/supervisord.conf</span><br></pre></td></tr></table></figure>

<h3 id="检查是否启动成功"><a href="#检查是否启动成功" class="headerlink" title="检查是否启动成功"></a>检查是否启动成功</h3><p>可以通过查看进程列表方式进行判断</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps aux | grep supervisord</span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="etc-supervisord-conf-文件"><a href="#etc-supervisord-conf-文件" class="headerlink" title="&#x2F;etc&#x2F;supervisord.conf 文件"></a>&#x2F;etc&#x2F;supervisord.conf 文件</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">; Sample supervisor config file.</span><br><span class="line">;</span><br><span class="line">; For more information on the config file, please see:</span><br><span class="line">; http://supervisord.org/configuration.html</span><br><span class="line">;</span><br><span class="line">; Notes:</span><br><span class="line">;  - Shell expansion (&quot;~&quot; or &quot;$HOME&quot;) is not supported.  Environment</span><br><span class="line">;    variables can be expanded using this syntax: &quot;%(ENV_HOME)s&quot;.</span><br><span class="line">;  - Quotes around values are not supported, except in the case of</span><br><span class="line">;    the environment= options as shown below.</span><br><span class="line">;  - Comments must have a leading space: &quot;a=b ;comment&quot; not &quot;a=b;comment&quot;.</span><br><span class="line">;  - Command will be truncated if it looks like a config file comment, e.g.</span><br><span class="line">;    &quot;command=bash -c &#x27;foo ; bar&#x27;&quot; will truncate to &quot;command=bash -c &#x27;foo &quot;.</span><br><span class="line"></span><br><span class="line">[unix_http_server]</span><br><span class="line">file=/tmp/supervisor.sock   ; the path to the socket file</span><br><span class="line">;chmod=0700                 ; socket file mode (default 0700)</span><br><span class="line">;chown=nobody:nogroup       ; socket file uid:gid owner</span><br><span class="line">;username=user              ; default is no username (open server)</span><br><span class="line">;password=123               ; default is no password (open server)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;配置内部HTTP-SERVER，注意0.0.0.0 是开放给任何IP访问的，</span><br><span class="line">[inet_http_server]         ; inet (TCP) server disabled by default</span><br><span class="line">port=0.0.0.0:9001        ; ip_address:port specifier, *:port for all iface</span><br><span class="line">;登录管理界面需要的的用户名以及密码</span><br><span class="line">username=user              ; default is no username (open server)</span><br><span class="line">password=123               ; default is no password (open server)</span><br><span class="line"></span><br><span class="line">[supervisord]</span><br><span class="line">logfile=/tmp/supervisord.log ; main log file; default $CWD/supervisord.log</span><br><span class="line">logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB</span><br><span class="line">logfile_backups=10           ; # of main logfile backups; 0 means none, default 10</span><br><span class="line">loglevel=info                ; log level; default info; others: debug,warn,trace</span><br><span class="line">pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid</span><br><span class="line">nodaemon=false               ; start in foreground if true; default false</span><br><span class="line">minfds=1024                  ; min. avail startup file descriptors; default 1024</span><br><span class="line">minprocs=200                 ; min. avail process descriptors;default 200</span><br><span class="line">;umask=022                   ; process file creation umask; default 022</span><br><span class="line">;user=supervisord            ; setuid to this UNIX account at startup; recommended if root</span><br><span class="line">;identifier=supervisor       ; supervisord identifier, default is &#x27;supervisor&#x27;</span><br><span class="line">;directory=/tmp              ; default is not to cd during start</span><br><span class="line">;nocleanup=true              ; don&#x27;t clean up tempfiles at start; default false</span><br><span class="line">;childlogdir=/tmp            ; &#x27;AUTO&#x27; child log dir, default $TEMP</span><br><span class="line">;environment=KEY=&quot;value&quot;     ; key value pairs to add to environment</span><br><span class="line">;strip_ansi=false            ; strip ansi escape codes in logs; def. false</span><br><span class="line"></span><br><span class="line">; The rpcinterface:supervisor section must remain in the config file for</span><br><span class="line">; RPC (supervisorctl/web interface) to work.  Additional interfaces may be</span><br><span class="line">; added by defining them in separate [rpcinterface:x] sections.</span><br><span class="line"></span><br><span class="line">[rpcinterface:supervisor]</span><br><span class="line">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br><span class="line"></span><br><span class="line">; The supervisorctl section configures how supervisorctl will connect to</span><br><span class="line">; supervisord.  configure it match the settings in either the unix_http_server</span><br><span class="line">; or inet_http_server section.</span><br><span class="line"></span><br><span class="line">[supervisorctl]</span><br><span class="line">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br><span class="line">;serverurl=http://127.0.0.1:9001 ; use an http:// url to specify an inet socket</span><br><span class="line">;username=chris              ; should be same as in [*_http_server] if set</span><br><span class="line">;password=123                ; should be same as in [*_http_server] if set</span><br><span class="line">;prompt=mysupervisor         ; cmd line prompt (default &quot;supervisor&quot;)</span><br><span class="line">;history_file=~/.sc_history  ; use readline history if available</span><br><span class="line"></span><br><span class="line">; The sample program section below shows all possible program subsection values.</span><br><span class="line">; Create one or more &#x27;real&#x27; program: sections to be able to control them under</span><br><span class="line">; supervisor.</span><br><span class="line"></span><br><span class="line">;[program:theprogramname]</span><br><span class="line">;command=/bin/cat              ; the program (relative uses PATH, can take args)</span><br><span class="line">;process_name=%(program_name)s ; process_name expr (default %(program_name)s)</span><br><span class="line">;numprocs=1                    ; number of processes copies to start (def 1)</span><br><span class="line">;directory=/tmp                ; directory to cwd to before exec (def no cwd)</span><br><span class="line">;umask=022                     ; umask for process (default None)</span><br><span class="line">;priority=999                  ; the relative start priority (default 999)</span><br><span class="line">;autostart=true                ; start at supervisord start (default: true)</span><br><span class="line">;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)</span><br><span class="line">;startretries=3                ; max # of serial start failures when starting (default 3)</span><br><span class="line">;autorestart=unexpected        ; when to restart if exited after running (def: unexpected)</span><br><span class="line">;exitcodes=0                   ; &#x27;expected&#x27; exit codes used with autorestart (default 0)</span><br><span class="line">;stopsignal=QUIT               ; signal used to kill process (default TERM)</span><br><span class="line">;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)</span><br><span class="line">;stopasgroup=false             ; send stop signal to the UNIX process group (default false)</span><br><span class="line">;killasgroup=false             ; SIGKILL the UNIX process group (def false)</span><br><span class="line">;user=chrism                   ; setuid to this UNIX account to run the program</span><br><span class="line">;redirect_stderr=true          ; redirect proc stderr to stdout (default false)</span><br><span class="line">;stdout_logfile=/a/path        ; stdout log path, NONE for none; default AUTO</span><br><span class="line">;stdout_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stdout_logfile_backups=10     ; # of stdout logfile backups (0 means none, default 10)</span><br><span class="line">;stdout_capture_maxbytes=1MB   ; number of bytes in &#x27;capturemode&#x27; (default 0)</span><br><span class="line">;stdout_events_enabled=false   ; emit events on stdout writes (default false)</span><br><span class="line">;stdout_syslog=false           ; send stdout to syslog with process name (default false)</span><br><span class="line">;stderr_logfile=/a/path        ; stderr log path, NONE for none; default AUTO</span><br><span class="line">;stderr_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stderr_logfile_backups=10     ; # of stderr logfile backups (0 means none, default 10)</span><br><span class="line">;stderr_capture_maxbytes=1MB   ; number of bytes in &#x27;capturemode&#x27; (default 0)</span><br><span class="line">;stderr_events_enabled=false   ; emit events on stderr writes (default false)</span><br><span class="line">;stderr_syslog=false           ; send stderr to syslog with process name (default false)</span><br><span class="line">;environment=A=&quot;1&quot;,B=&quot;2&quot;       ; process environment additions (def no adds)</span><br><span class="line">;serverurl=AUTO                ; override serverurl computation (childutils)</span><br><span class="line"></span><br><span class="line">; The sample eventlistener section below shows all possible eventlistener</span><br><span class="line">; subsection values.  Create one or more &#x27;real&#x27; eventlistener: sections to be</span><br><span class="line">; able to handle event notifications sent by supervisord.</span><br><span class="line"></span><br><span class="line">;[eventlistener:theeventlistenername]</span><br><span class="line">;command=/bin/eventlistener    ; the program (relative uses PATH, can take args)</span><br><span class="line">;process_name=%(program_name)s ; process_name expr (default %(program_name)s)</span><br><span class="line">;numprocs=1                    ; number of processes copies to start (def 1)</span><br><span class="line">;events=EVENT                  ; event notif. types to subscribe to (req&#x27;d)</span><br><span class="line">;buffer_size=10                ; event buffer queue size (default 10)</span><br><span class="line">;directory=/tmp                ; directory to cwd to before exec (def no cwd)</span><br><span class="line">;umask=022                     ; umask for process (default None)</span><br><span class="line">;priority=-1                   ; the relative start priority (default -1)</span><br><span class="line">;autostart=true                ; start at supervisord start (default: true)</span><br><span class="line">;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)</span><br><span class="line">;startretries=3                ; max # of serial start failures when starting (default 3)</span><br><span class="line">;autorestart=unexpected        ; autorestart if exited after running (def: unexpected)</span><br><span class="line">;exitcodes=0                   ; &#x27;expected&#x27; exit codes used with autorestart (default 0)</span><br><span class="line">;stopsignal=QUIT               ; signal used to kill process (default TERM)</span><br><span class="line">;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)</span><br><span class="line">;stopasgroup=false             ; send stop signal to the UNIX process group (default false)</span><br><span class="line">;killasgroup=false             ; SIGKILL the UNIX process group (def false)</span><br><span class="line">;user=chrism                   ; setuid to this UNIX account to run the program</span><br><span class="line">;redirect_stderr=false         ; redirect_stderr=true is not allowed for eventlisteners</span><br><span class="line">;stdout_logfile=/a/path        ; stdout log path, NONE for none; default AUTO</span><br><span class="line">;stdout_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stdout_logfile_backups=10     ; # of stdout logfile backups (0 means none, default 10)</span><br><span class="line">;stdout_events_enabled=false   ; emit events on stdout writes (default false)</span><br><span class="line">;stdout_syslog=false           ; send stdout to syslog with process name (default false)</span><br><span class="line">;stderr_logfile=/a/path        ; stderr log path, NONE for none; default AUTO</span><br><span class="line">;stderr_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stderr_logfile_backups=10     ; # of stderr logfile backups (0 means none, default 10)</span><br><span class="line">;stderr_events_enabled=false   ; emit events on stderr writes (default false)</span><br><span class="line">;stderr_syslog=false           ; send stderr to syslog with process name (default false)</span><br><span class="line">;environment=A=&quot;1&quot;,B=&quot;2&quot;       ; process environment additions</span><br><span class="line">;serverurl=AUTO                ; override serverurl computation (childutils)</span><br><span class="line"></span><br><span class="line">; The sample group section below shows all possible group values.  Create one</span><br><span class="line">; or more &#x27;real&#x27; group: sections to create &quot;heterogeneous&quot; process groups.</span><br><span class="line"></span><br><span class="line">;[group:thegroupname]</span><br><span class="line">;programs=progname1,progname2  ; each refers to &#x27;x&#x27; in [program:x] definitions</span><br><span class="line">;priority=999                  ; the relative start priority (default 999)</span><br><span class="line"></span><br><span class="line">; The [include] section can just contain the &quot;files&quot; setting.  This</span><br><span class="line">; setting can list multiple files (separated by whitespace or</span><br><span class="line">; newlines).  It can also contain wildcards.  The filenames are</span><br><span class="line">; interpreted as relative to this file.  Included files *cannot*</span><br><span class="line">; include files themselves.</span><br><span class="line"></span><br><span class="line">;[include]</span><br><span class="line">;files = relative/directory/*.ini</span><br><span class="line"></span><br><span class="line">;引入其他配置文件</span><br><span class="line">[include]</span><br><span class="line">files=/etc/supervisor/*.conf</span><br></pre></td></tr></table></figure>
<p>###自定义配置文件</p>
<p>&#x2F;etc&#x2F;supervisor&#x2F;spring-boot-demo.conf 文件</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">; 设置进程的名称，使用 supervisorctl 来管理进程时需要使用该进程名</span><br><span class="line">[program:spring-boot-demo] </span><br><span class="line">;运行的命令</span><br><span class="line">command=java -jar demo-0.0.1-SNAPSHOT.jar</span><br><span class="line">;numprocs=1                 ; 默认为1 进程数量 </span><br><span class="line">;process_name=%(program_name)s   ; 默认为 %(program_name)s，即 [program:x] 中的 x</span><br><span class="line">directory=/root/demo/target ; 执行 command 之前，先切换到工作目录</span><br><span class="line">;user=spring-boot                 ; 使用 哪个 用户来启动该进程 linux要有该用户</span><br><span class="line">; 程序崩溃时自动重启，重启次数是有限制的，默认为3次</span><br><span class="line">autorestart=true            </span><br><span class="line">redirect_stderr=true        ; 重定向输出的日志</span><br><span class="line">stdout_logfile = /var/log/supervisord/spring-boot-demo.log	;日志文件位置</span><br><span class="line">loglevel=info</span><br></pre></td></tr></table></figure>
<p>以下是我在网上找的全部的配置说明</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">;[program:theprogramname]      ;这个就是咱们要管理的子进程了，&quot;:&quot;后面的是名字，最好别乱写和实际进程</span><br><span class="line">                                有点关联最好。这样的program我们可以设置一个或多个，一个program就是</span><br><span class="line">                                要被管理的一个进程</span><br><span class="line">;command=/bin/cat              ; 这个就是我们的要启动进程的命令路径了，可以带参数</span><br><span class="line">                                例子：/home/test.py -a &#x27;hehe&#x27;</span><br><span class="line">                                有一点需要注意的是，我们的command只能是那种在终端运行的进程，不能是</span><br><span class="line">                                守护进程。这个想想也知道了，比如说command=service httpd start。</span><br><span class="line">                                httpd这个进程被linux的service管理了，我们的supervisor再去启动这个命令</span><br><span class="line">                                这已经不是严格意义的子进程了。</span><br><span class="line">                                这个是个必须设置的项</span><br><span class="line">;process_name=%(program_name)s ; 这个是进程名，如果我们下面的numprocs参数为1的话，就不用管这个参数</span><br><span class="line">                                 了，它默认值%(program_name)s也就是上面的那个program冒号后面的名字，</span><br><span class="line">                                 但是如果numprocs为多个的话，那就不能这么干了。想想也知道，不可能每个</span><br><span class="line">                                 进程都用同一个进程名吧。</span><br><span class="line"></span><br><span class="line">                                </span><br><span class="line">;numprocs=1                    ; 启动进程的数目。当不为1时，就是进程池的概念，注意process_name的设置</span><br><span class="line">                                 默认为1    。。非必须设置</span><br><span class="line">;directory=/tmp                ; 进程运行前，会前切换到这个目录</span><br><span class="line">                                 默认不设置。。。非必须设置</span><br><span class="line">;umask=022                     ; 进程掩码，默认none，非必须</span><br><span class="line">;priority=999                  ; 子进程启动关闭优先级，优先级低的，最先启动，关闭的时候最后关闭</span><br><span class="line">                                 默认值为999 。。非必须设置</span><br><span class="line">;autostart=true                ; 如果是true的话，子进程将在supervisord启动后被自动启动</span><br><span class="line">                                 默认就是true   。。非必须设置</span><br><span class="line">;autorestart=unexpected        ; 这个是设置子进程挂掉后自动重启的情况，有三个选项，false,unexpected</span><br><span class="line">                                 和true。如果为false的时候，无论什么情况下，都不会被重新启动，</span><br><span class="line">                                 如果为unexpected，只有当进程的退出码不在下面的exitcodes里面定义的退 </span><br><span class="line">                                 出码的时候，才会被自动重启。当为true的时候，只要子进程挂掉，将会被无</span><br><span class="line">                                 条件的重启</span><br><span class="line">;startsecs=1                   ; 这个选项是子进程启动多少秒之后，此时状态如果是running，则我们认为启</span><br><span class="line">                                 动成功了</span><br><span class="line">                                 默认值为1 。。非必须设置</span><br><span class="line">;startretries=3                ; 当进程启动失败后，最大尝试启动的次数。。当超过3次后，supervisor将把</span><br><span class="line">                                 此进程的状态置为FAIL</span><br><span class="line">                                 默认值为3 。。非必须设置</span><br><span class="line">;exitcodes=0,2                 ; 注意和上面的的autorestart=unexpected对应。。exitcodes里面的定义的</span><br><span class="line">                                 退出码是expected的。</span><br><span class="line">;stopsignal=QUIT               ; 进程停止信号，可以为TERM, HUP, INT, QUIT, KILL, USR1, or USR2等信号</span><br><span class="line">                                  默认为TERM 。。当用设定的信号去干掉进程，退出码会被认为是expected</span><br><span class="line">                                  非必须设置</span><br><span class="line">;stopwaitsecs=10               ; 这个是当我们向子进程发送stopsignal信号后，到系统返回信息</span><br><span class="line">                                 给supervisord，所等待的最大时间。 超过这个时间，supervisord会向该</span><br><span class="line">                                 子进程发送一个强制kill的信号。</span><br><span class="line">                                 默认为10秒。。非必须设置</span><br><span class="line">;stopasgroup=false             ; 这个东西主要用于，supervisord管理的子进程，这个子进程本身还有</span><br><span class="line">                                 子进程。那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程</span><br><span class="line">                                 有可能会变成孤儿进程。所以咱们可以设置可个选项，把整个该子进程的</span><br><span class="line">                                 整个进程组都干掉。 设置为true的话，一般killasgroup也会被设置为true。</span><br><span class="line">                                 需要注意的是，该选项发送的是stop信号</span><br><span class="line">                                 默认为false。。非必须设置。。</span><br><span class="line">;killasgroup=false             ; 这个和上面的stopasgroup类似，不过发送的是kill信号</span><br><span class="line">;user=chrism                   ; 如果supervisord是root启动，我们在这里设置这个非root用户，可以用来</span><br><span class="line">                                 管理该program</span><br><span class="line">                                 默认不设置。。。非必须设置项</span><br><span class="line">;redirect_stderr=true          ; 如果为true，则stderr的日志会被写入stdout日志文件中</span><br><span class="line">                                 默认为false，非必须设置</span><br><span class="line">;stdout_logfile=/a/path        ; 子进程的stdout的日志路径，可以指定路径，AUTO，none等三个选项。</span><br><span class="line">                                 设置为none的话，将没有日志产生。设置为AUTO的话，将随机找一个地方</span><br><span class="line">                                 生成日志文件，而且当supervisord重新启动的时候，以前的日志文件会被</span><br><span class="line">                                 清空。当 redirect_stderr=true的时候，sterr也会写进这个日志文件</span><br><span class="line">;stdout_logfile_maxbytes=1MB   ; 日志文件最大大小，和[supervisord]中定义的一样。默认为50</span><br><span class="line">;stdout_logfile_backups=10     ; 和[supervisord]定义的一样。默认10</span><br><span class="line">;stdout_capture_maxbytes=1MB   ; 这个东西是设定capture管道的大小，当值不为0的时候，子进程可以从stdout</span><br><span class="line">                                 发送信息，而supervisor可以根据信息，发送相应的event。</span><br><span class="line">                                 默认为0，为0的时候表达关闭管道。。。非必须项</span><br><span class="line">;stdout_events_enabled=false   ; 当设置为ture的时候，当子进程由stdout向文件描述符中写日志的时候，将</span><br><span class="line">                                 触发supervisord发送PROCESS_LOG_STDOUT类型的event</span><br><span class="line">                                 默认为false。。。非必须设置</span><br><span class="line">;stderr_logfile=/a/path        ; 这个东西是设置stderr写的日志路径，当redirect_stderr=true。这个就不用</span><br><span class="line">                                 设置了，设置了也是白搭。因为它会被写入stdout_logfile的同一个文件中</span><br><span class="line">                                 默认为AUTO，也就是随便找个地存，supervisord重启被清空。。非必须设置</span><br><span class="line">;stderr_logfile_maxbytes=1MB   ; 这个出现好几次了，就不重复了</span><br><span class="line">;stderr_logfile_backups=10     ; 这个也是</span><br><span class="line">;stderr_capture_maxbytes=1MB   ; 这个一样，和stdout_capture一样。 默认为0，关闭状态</span><br><span class="line">;stderr_events_enabled=false   ; 这个也是一样，默认为false</span><br><span class="line">;environment=A=&quot;1&quot;,B=&quot;2&quot;       ; 这个是该子进程的环境变量，和别的子进程是不共享的</span><br><span class="line">;serverurl=AUTO                ; </span><br></pre></td></tr></table></figure>


<p>更改了配置文件需要重新加载配置文件，supervisor会重启各个引用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">supervisorctl reload</span><br></pre></td></tr></table></figure>
<h3 id="supervisorctl-使用"><a href="#supervisorctl-使用" class="headerlink" title="supervisorctl 使用"></a>supervisorctl 使用</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">supervisord #启动supervisor</span><br><span class="line">supervisorctl reload #修改完配置文件后重新启动supervisor</span><br><span class="line">supervisorctl status #查看supervisor监管的进程状态</span><br><span class="line">supervisorctl start 进程名  #启动XXX进程</span><br><span class="line">supervisorctl stop 进程名 #停止XXX进程</span><br><span class="line">supervisorctl stop all #停止全部进程，注：start、restart、stop都不会载入最新的配置文件。</span><br><span class="line">supervisorctl update #根据最新的配置文件，启动新配置或有改动的进程，配置没有改动的进程不会受影响而重启</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="使用浏览器来管理进程"><a href="#使用浏览器来管理进程" class="headerlink" title="使用浏览器来管理进程"></a>使用浏览器来管理进程</h3><p>编辑&#x2F;etc&#x2F;supervisord.conf 文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;配置内部HTTP-SERVER，注意0.0.0.0 是开放给任何IP访问的，</span><br><span class="line">[inet_http_server]         ; inet (TCP) server disabled by default</span><br><span class="line">port=0.0.0.0:9001        ; ip_address:port specifier, *:port for all iface</span><br><span class="line">;登录管理界面需要的的用户名以及密码</span><br><span class="line">username=user              ; default is no username (open server)</span><br><span class="line">password=123               ; default is no password (open server)</span><br></pre></td></tr></table></figure>

<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="命令运行不了"><a href="#命令运行不了" class="headerlink" title="命令运行不了"></a>命令运行不了</h3><p> 有可能是运行命令的权限不够 需要 sudo 命令</p>
<h3 id="浏览器访问不了管理界面"><a href="#浏览器访问不了管理界面" class="headerlink" title="浏览器访问不了管理界面"></a>浏览器访问不了管理界面</h3><p> 有可能是Linux防火墙不允许访问9001端口<br> 以centos7为例：<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=9001/tcp #防火墙加入9001端口</span><br><span class="line">firewall-cmd --reload　#重启防火墙 使端口生效</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>supervisor</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>运维</tag>
        <tag>springboot</tag>
        <tag>supervisor</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL8json特性</title>
    <url>/2019/11/08/databases/mysql8/</url>
    <content><![CDATA[<h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近重构单据中心的数据层，以满足公司业务发展需求。目前用的是MySQL5.4的版本，<br>公司的单据中心设计方案为：大JSON存储单据内容，再辅助各个子单据小表，达到搜索目的，<br>但随着单据类型的增多和字段增加，以及业务方越来愈多，这种方案不能很好的满住需求。<br>单据中心需要能检索json的能力，在技术选项上有ES，MonggoDB，PostgreSQL，MySQL8</p>
<h1 id="为什么选择MySQL8而不是其他MySQL版本？"><a href="#为什么选择MySQL8而不是其他MySQL版本？" class="headerlink" title="为什么选择MySQL8而不是其他MySQL版本？"></a>为什么选择MySQL8而不是其他MySQL版本？</h1><p>MySQL对json的支持是在5.7版本开始支持的。而需要使用的JSON_TABLE函数是在8.0版本才支持。</p>
<h1 id="JSON函数"><a href="#JSON函数" class="headerlink" title="JSON函数"></a>JSON函数</h1><p><a href="https://dev.mysql.com/doc/refman/5.7/en/json-function-reference.html">官方文档</a></p>
<table>
<thead>
<tr>
<th align="left">函数名</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">JSON_VALID()</td>
<td align="left">JSON值是否是有效的</td>
</tr>
<tr>
<td align="left">JSON_UNQUOTE()</td>
<td align="left">JSON值而言</td>
</tr>
<tr>
<td align="left">JSON_TYPE()</td>
<td align="left">JSON值类型</td>
</tr>
<tr>
<td align="left">JSON_STORAGE_SIZE()</td>
<td align="left">用于一个JSON文件的二进制表示形式存储空间；一个JSON柱，空间时使用的文档插入到任何部分更新之前，</td>
</tr>
<tr>
<td align="left">JSON_SET()</td>
<td align="left">将数据插入到JSON文档</td>
</tr>
<tr>
<td align="left">JSON_SEARCH()</td>
<td align="left">在JSON文件价值路径</td>
</tr>
<tr>
<td align="left">JSON_REPLACE()</td>
<td align="left">在JSON文件的值替换</td>
</tr>
<tr>
<td align="left">JSON_REMOVE()</td>
<td align="left">从JSON文件中删除数据</td>
</tr>
<tr>
<td align="left">JSON_QUOTE()</td>
<td align="left">引用JSON文档</td>
</tr>
<tr>
<td align="left">JSON_PRETTY()</td>
<td align="left">版画在人类可读的格式JSON文档，每个数组元素或对象成员打印在新的行中，缩进两个空格就其母。</td>
</tr>
<tr>
<td align="left">JSON_OBJECT()</td>
<td align="left">创建JSON对象</td>
</tr>
<tr>
<td align="left">JSON_MERGE_PRESERVE()</td>
<td align="left">合并的JSON文件，保存重复键</td>
</tr>
<tr>
<td align="left">JSON_MERGE_PATCH()</td>
<td align="left">合并的JSON文件，免去重复键的值</td>
</tr>
<tr>
<td align="left">JSON_MERGE()（废弃的5.7.22）</td>
<td align="left">合并的JSON文件，保存重复键。不json_merge_preserve()的同义词</td>
</tr>
<tr>
<td align="left">JSON_LENGTH()</td>
<td align="left">在JSON文档中的元素数</td>
</tr>
<tr>
<td align="left">JSON_KEYS()</td>
<td align="left">从JSON文件密钥数组</td>
</tr>
<tr>
<td align="left">JSON_INSERT()</td>
<td align="left">将数据插入到JSON文档</td>
</tr>
<tr>
<td align="left">JSON_EXTRACT()</td>
<td align="left">从JSON文档返回数据</td>
</tr>
<tr>
<td align="left">JSON_DEPTH()</td>
<td align="left">JSON文档的最大深度</td>
</tr>
<tr>
<td align="left">JSON_CONTAINS_PATH()</td>
<td align="left">无论是JSON文件包含任何数据路径</td>
</tr>
<tr>
<td align="left">JSON_CONTAINS()</td>
<td align="left">是否包含特定对象的JSON文档路径</td>
</tr>
<tr>
<td align="left">JSON_ARRAY_INSERT()</td>
<td align="left">插入JSON数组</td>
</tr>
<tr>
<td align="left">JSON_ARRAY_APPEND()</td>
<td align="left">JSON文件追加数据</td>
</tr>
<tr>
<td align="left">JSON_ARRAY()</td>
<td align="left">创建JSON数组</td>
</tr>
<tr>
<td align="left">JSON_APPEND()（废弃的5.7.9）</td>
<td align="left">JSON文件追加数据</td>
</tr>
<tr>
<td align="left">-&gt;&gt;</td>
<td align="left">在评估路径和结束引语结果返回JSON列值；相当于json_unquote（json_extract()）。</td>
</tr>
<tr>
<td align="left">-&gt;</td>
<td align="left">在评估路径返回JSON列值；相当于json_extract()。</td>
</tr>
</tbody></table>
<h1 id="JSON-TABLE函数的应用"><a href="#JSON-TABLE函数的应用" class="headerlink" title="JSON_TABLE函数的应用"></a>JSON_TABLE函数的应用</h1><p><a href="https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html">官方说明</a></p>
<p>读取单据行数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	jt.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	document_content dc,</span><br><span class="line">	<span class="built_in">JSON_TABLE</span> (</span><br><span class="line">		`content`,</span><br><span class="line">		<span class="string">&#x27;$.Lines[*]&#x27;</span> COLUMNS (</span><br><span class="line">			ID <span class="type">VARCHAR</span> (<span class="number">100</span>) PATH &quot;$.ID&quot;,</span><br><span class="line">			Price <span class="type">VARCHAR</span> (<span class="number">100</span>) PATH &quot;$.Price&quot;,</span><br><span class="line">			TaxClassificationCode <span class="type">VARCHAR</span> (<span class="number">100</span>) PATH &quot;$.TaxClassificationCode&quot;</span><br><span class="line">		)</span><br><span class="line">	) <span class="keyword">AS</span> jt</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	dc.id<span class="operator">=</span><span class="number">168718</span></span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<h1 id="提高json检索速度"><a href="#提高json检索速度" class="headerlink" title="提高json检索速度"></a>提高json检索速度</h1><p>很遗憾mysql原生并不支持json列中的属性索引，<br>但是我们可以通过mysql的虚拟列（5.7版本支持）间接的为json中的某些属性创建索引<br>，原理就是为json中的属性创建虚拟列，然后通过给虚拟列建立索引，<br>从而间接的给属性创建了索引。</p>
<h2 id="建立虚拟列"><a href="#建立虚拟列" class="headerlink" title="建立虚拟列"></a>建立虚拟列</h2><p>在MySQL 5.7中，支持两种</p>
<ul>
<li>Generated Column，即Virtual Generated Column</li>
<li>Stored Generated Column</li>
</ul>
<p>前者只将Generated Column保存在数据字典中（表的元数据），并不会将这一列数据持久化到磁盘上；<br>后者会将Generated Column持久化到磁盘上，而不是每次读取的时候计算所得。<br>很明显，后者存放了可以通过已有数据计算而得的数据，需要更多的磁盘空间，<br>与Virtual Column相比并没有优势<br>，因此，MySQL 5.7中，不指定Generated Column的类型，默认是Virtual Column。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">fieldname <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [ GENERATED ALWAYS ] <span class="keyword">AS</span> ( <span class="operator">&lt;</span>expression<span class="operator">&gt;</span> ) [ VIRTUAL<span class="operator">|</span>STORED ] [ <span class="keyword">UNIQUE</span> [KEY] ] [ [<span class="keyword">PRIMARY</span>] KEY ] [ <span class="keyword">NOT</span> <span class="keyword">NULL</span> ] [ COMMENT <span class="operator">&lt;</span>text<span class="operator">&gt;</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>创建表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表 (  </span><br><span class="line">   id <span class="type">INT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">   json字段名 JSON <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   虚拟列字段名 数据类型 GENERATED ALWAYS <span class="keyword">AS</span> (`json字段名` <span class="operator">-</span><span class="operator">&gt;&gt;</span> <span class="string">&#x27;$.字段&#x27;</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="comment">-- 虚拟列</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="添加索引"><a href="#添加索引" class="headerlink" title="添加索引"></a>添加索引</h2><p>跟添加一般索引一样</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX `索引名称` <span class="keyword">ON</span> `表`(`虚拟列名`);  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><p>这种方法只能只能对json的某个<strong>单值属性</strong>或者给数组中的某一个<strong>特定位置</strong>上的元素有效，<br>如果你想给对象数组中的所有元素的某个属性使用索引，<br>那么最后你只能匹配数组中的所有对象的该属性或者使用like,<br>但是使用like的话就不能使用索引，也就是说对于这种情况是不可用的。</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>databases</tag>
      </tags>
  </entry>
  <entry>
    <title>gradle构建并推送镜像</title>
    <url>/2017/10/25/docker/gradle_docker/</url>
    <content><![CDATA[<p>本篇简单讲述了gradle task 构建,推送镜像的代码</p>
<span id="more"></span>
<h1 id="Gradle-构建工具搭建"><a href="#Gradle-构建工具搭建" class="headerlink" title="Gradle 构建工具搭建"></a>Gradle 构建工具搭建</h1><h2 id="下载gradle二进制文件"><a href="#下载gradle二进制文件" class="headerlink" title="下载gradle二进制文件"></a>下载gradle二进制文件</h2><p><a href="https://gradle.org/releases">下载地址</a></p>
<h2 id="安装gradle"><a href="#安装gradle" class="headerlink" title="安装gradle"></a>安装gradle</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> /opt/gradle</span><br><span class="line">$ unzip -d /opt/gradle gradle-4.2.1-bin.zip</span><br><span class="line">$ <span class="built_in">ls</span> /opt/gradle/gradle-4.2.1</span><br></pre></td></tr></table></figure>

<h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><ul>
<li>编辑  &#x2F;etc&#x2F;profile 文件 加入下面代码</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/opt/gradle/gradle-4.2.1/bin</span><br></pre></td></tr></table></figure>
<ul>
<li>使环境生效</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ source  /etc/profile</span><br></pre></td></tr></table></figure>
<ul>
<li>查看是否生效</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ gradle -v</span><br></pre></td></tr></table></figure>

<h1 id="gradle-task-编写"><a href="#gradle-task-编写" class="headerlink" title="gradle task 编写"></a>gradle task 编写</h1><p>##docker相关代码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">//docker 配置信息</span><br><span class="line">ext &#123;</span><br><span class="line">    docker = [</span><br><span class="line">            registry   : <span class="string">&#x27;xx.xxx.xxx&#x27;</span>,</span><br><span class="line">            projectName: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">            imageName  : project.name,</span><br><span class="line">            apiUsername: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">            apiPassword: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * 构建 镜像</span><br><span class="line"> */</span><br><span class="line">task buildImage(dependsOn: build) &#123;</span><br><span class="line">    ext.image = <span class="string">&quot;<span class="variable">$&#123;project.docker.registry&#125;</span>/<span class="variable">$&#123;project.docker.projectName&#125;</span>/<span class="variable">$&#123;project.docker.imageName&#125;</span>&quot;</span></span><br><span class="line">    doLast &#123;</span><br><span class="line">        println <span class="string">&#x27;执行开始&#x27;</span></span><br><span class="line">        File buildDir = new File(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">        //复制生成的文件</span><br><span class="line">        File <span class="built_in">source</span> = jar.outputs.files.getFiles()[0]</span><br><span class="line">        File target = new File(buildDir, source.name)</span><br><span class="line">        target &lt;&lt; <span class="string">source.bytes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//生成Dockerfile文件</span></span><br><span class="line"><span class="string">        def data = &quot;&quot;&quot;FROM openjdk:8-jdk-alpine</span></span><br><span class="line"><span class="string">MAINTAINER lilei</span></span><br><span class="line"><span class="string">VOLUME /tmp</span></span><br><span class="line"><span class="string">ADD $&#123;source</span>.name&#125; app.jar</span><br><span class="line">ENV JAVA_OPTS=\&#x27;\&#x27;</span><br><span class="line">ENTRYPOINT <span class="built_in">exec</span> java \<span class="variable">$JAVA_OPTS</span> -Djava.security.egd=file:/dev/./urandom -jar /app.jar</span><br><span class="line">        <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">        println data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        File file = new File(buildDir, &#x27;Dockerfile&#x27;)</span></span><br><span class="line"><span class="string">        file.withWriter(&#x27;utf-8&#x27;) &#123;</span></span><br><span class="line"><span class="string">            writer -&gt; writer.writeLine data</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        //docker build -t <span class="variable">$&#123;IMAGE&#125;</span>:<span class="variable">$&#123;VERSION&#125;</span> .</span></span><br><span class="line"><span class="string">        //docker tag <span class="variable">$&#123;IMAGE&#125;</span>:<span class="variable">$&#123;VERSION&#125;</span> <span class="variable">$&#123;IMAGE&#125;</span>:latest</span></span><br><span class="line"><span class="string">        def cmdLine = [&#x27;docker&#x27;, &#x27;build&#x27;, &#x27;-t&#x27;, &quot;</span><span class="variable">$&#123;buildImage.image&#125;</span>:<span class="variable">$&#123;project.docker.tag&#125;</span><span class="string">&quot;, buildDir.toString()]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        //清理文件</span></span><br><span class="line"><span class="string">        target.delete()</span></span><br><span class="line"><span class="string">        file.delete()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        //生成latest版本</span></span><br><span class="line"><span class="string">        cmdLine = [&#x27;docker&#x27;, &#x27;tag&#x27;, &quot;</span><span class="variable">$&#123;buildImage.image&#125;</span>:<span class="variable">$&#123;project.version&#125;</span><span class="string">&quot;, &quot;</span><span class="variable">$&#123;buildImage.image&#125;</span>:latest<span class="string">&quot;]</span></span><br><span class="line"><span class="string">        executeAndWait(cmdLine)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        //清理空版本号的镜像</span></span><br><span class="line"><span class="string">        //获取none版本镜像</span></span><br><span class="line"><span class="string">        try &#123;</span></span><br><span class="line"><span class="string">            Process process = &quot;</span>docker images -f dangling=<span class="literal">true</span> -q<span class="string">&quot;.execute()</span></span><br><span class="line"><span class="string">            String useless = process.in.text</span></span><br><span class="line"><span class="string">            if (!useless.isEmpty()) &#123;</span></span><br><span class="line"><span class="string">                cmdLine = [&#x27;docker&#x27;, &#x27;rmi&#x27;]</span></span><br><span class="line"><span class="string">                cmdLine.addAll(useless.split(&quot;</span>\n<span class="string">&quot;))</span></span><br><span class="line"><span class="string">                //执行删除</span></span><br><span class="line"><span class="string">                executeAndWait(cmdLine)</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125; catch (Exception e) &#123;</span></span><br><span class="line"><span class="string">            println &#x27;清理none版本镜像出错&#x27;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        println &#x27;执行完成&#x27;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string"> * 推送镜像</span></span><br><span class="line"><span class="string"> */</span></span><br><span class="line"><span class="string">task pushImage(dependsOn: buildImage) &#123;</span></span><br><span class="line"><span class="string">    doLast &#123;</span></span><br><span class="line"><span class="string">        //登录</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        def cmdLine = [&#x27;docker&#x27;, &#x27;login&#x27;, project.docker.registry, &quot;</span>-u<span class="string">&quot;, project.docker.apiUsername, &#x27;-p&#x27;, project.docker.apiPassword]</span></span><br><span class="line"><span class="string">        executeAndWait(cmdLine)</span></span><br><span class="line"><span class="string">        def image = buildImage.image</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        //推送</span></span><br><span class="line"><span class="string">        cmdLine = [&#x27;docker&#x27;, &#x27;push&#x27;, &quot;</span><span class="variable">$&#123;image&#125;</span>:<span class="variable">$&#123;project.version&#125;</span><span class="string">&quot;]</span></span><br><span class="line"><span class="string">        executeAndWait(cmdLine)</span></span><br><span class="line"><span class="string">        //推送latest版本</span></span><br><span class="line"><span class="string">        cmdLine = [&#x27;docker&#x27;, &#x27;push&#x27;, &quot;</span><span class="variable">$&#123;image&#125;</span>:latest<span class="string">&quot;]</span></span><br><span class="line"><span class="string">        executeAndWait(cmdLine)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string"> * 执行命令</span></span><br><span class="line"><span class="string"> * @param cmdLine</span></span><br><span class="line"><span class="string"> * @return</span></span><br><span class="line"><span class="string"> */</span></span><br><span class="line"><span class="string">private static String executeAndWait(List&lt;String&gt; cmdLine) &#123;</span></span><br><span class="line"><span class="string">    println(&quot;</span>命令行:<span class="variable">$&#123;cmdLine&#125;</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">    println &#x27;------------shell输出------------&#x27;</span></span><br><span class="line"><span class="string">    def process = cmdLine.execute()</span></span><br><span class="line"><span class="string">    process.waitForProcessOutput(System.out, System.err)</span></span><br><span class="line"><span class="string">    println &#x27;-------------输出结束--------------&#x27;</span></span><br><span class="line"><span class="string">    if (process.exitValue()) &#123;</span></span><br><span class="line"><span class="string">        throw new GradleException(&quot;</span>执行命令出错 \nCommand line [<span class="variable">$&#123;cmdLine&#125;</span>]<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return &quot;</span>success<span class="string">&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>gradle</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>gradle</tag>
      </tags>
  </entry>
  <entry>
    <title>docker 安装,配置</title>
    <url>/2017/10/19/docker/install_docker/</url>
    <content><![CDATA[<p>本篇简单讲述了docker安装以及镜像加速</p>
<span id="more"></span>
<p>系统: CentOS7 </p>
<h2 id="版本选择"><a href="#版本选择" class="headerlink" title="版本选择"></a>版本选择</h2><ul>
<li>Community Edition CE 社区版本 免费</li>
<li>Enterprise Edition EE 企业版本 收费 注重安全以及提供服务</li>
</ul>
<h2 id="卸载旧版本"><a href="#卸载旧版本" class="headerlink" title="卸载旧版本"></a>卸载旧版本</h2><p>较老版本的Docker被称为docker或docker-engine。如果安装了这些，需要卸载它们以及关联的依赖关系。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum remove docker \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>

<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="使用存储库进行安装"><a href="#使用存储库进行安装" class="headerlink" title="使用存储库进行安装"></a>使用存储库进行安装</h3><h4 id="设置yum源"><a href="#设置yum源" class="headerlink" title="设置yum源"></a>设置yum源</h4><ul>
<li>1 安装所需的软件包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br></pre></td></tr></table></figure>
<ul>
<li>2 设置yum源</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<ul>
<li>3 (可选) 设置是否安装edge和测试版本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开启 edge版本</span></span><br><span class="line">$ <span class="built_in">sudo</span> yum-config-manager --<span class="built_in">enable</span> docker-ce-edge</span><br><span class="line"><span class="comment"># 开启 测试版本</span></span><br><span class="line">$ <span class="built_in">sudo</span> yum-config-manager --<span class="built_in">enable</span> docker-ce-test</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">$ <span class="built_in">sudo</span> yum-config-manager --<span class="built_in">disable</span> docker-ce-edge</span><br><span class="line">$ <span class="built_in">sudo</span> yum-config-manager --<span class="built_in">disable</span> docker-ce-test</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>4 安装docker ce</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum install docker-ce</span><br></pre></td></tr></table></figure>
<p>如果有多个版本并存,请选择一个人进行安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列出可用的版本</span></span><br><span class="line">$ yum list docker-ce --showduplicates | <span class="built_in">sort</span> -r</span><br><span class="line"></span><br><span class="line">docker-ce.x86_64            17.09.ce-1.el7.centos             docker-ce-stable</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">$ <span class="built_in">sudo</span> yum install &lt;完全限定的包名称&gt; <span class="comment">#如:docker-ce-17.06.1.ce</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使rpm包进行安装"><a href="#使rpm包进行安装" class="headerlink" title="使rpm包进行安装"></a>使rpm包进行安装</h3><ul>
<li>1下载rpm包<ul>
<li>下载地址: <a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/">https://download.docker.com/linux/centos/7/x86_64/stable/Packages/</a></li>
</ul>
</li>
<li>2 使用rpm包进行安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum install /path/to/package.rpm</span><br></pre></td></tr></table></figure>


<h3 id="使用shell脚本进行安装"><a href="#使用shell脚本进行安装" class="headerlink" title="使用shell脚本进行安装"></a>使用shell脚本进行安装</h3><ul>
<li>脚本需要root或sudo权限才能运行。因此，在运行脚本之前，应仔细检查和审核脚本</li>
<li>如果Docker已经安装在主机上，则不要使用脚本进行安装。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">$ <span class="built_in">sudo</span> sh get-docker.sh</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="启动docker"><a href="#启动docker" class="headerlink" title="启动docker"></a>启动docker</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动 </span></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl start docker</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl stop docker</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure>


<h2 id="运行docker"><a href="#运行docker" class="headerlink" title="运行docker"></a>运行docker</h2><p>运行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> docker run hello-world</span><br></pre></td></tr></table></figure>

<h2 id="使用国内镜像进行加速下载"><a href="#使用国内镜像进行加速下载" class="headerlink" title="使用国内镜像进行加速下载"></a>使用国内镜像进行加速下载</h2><ul>
<li>编辑 配置文件 &#x2F;etc&#x2F;docker&#x2F;daemon.json</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;加速地址&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;insecure-registries&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span> #这个是用于私有仓库 不使用https的情况</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  使用 daocloud 进行加速 文档: <a href="http://www.daocloud.io/mirror#accelerator-doc">http://www.daocloud.io/mirror#accelerator-doc</a></p>
<p>  国内还有网易,阿里等镜像</p>
<p>官方国内镜像 <a href="https://www.docker-cn.com/registry-mirror">https://www.docker-cn.com/registry-mirror</a></p>
<ul>
<li><p>重启docker才能生效 脚本看上面</p>
</li>
<li><p>查看是否生效</p>
</li>
</ul>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> $ docker info</span><br><span class="line"></span><br><span class="line">******</span><br><span class="line">Registry Mirrors:</span><br><span class="line"> http://92bfccda.m.daocloud.io/</span><br><span class="line">Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"><span class="comment">#看到 Registry Mirrors 就说明生效了</span></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>harbor安装</title>
    <url>/2017/10/20/docker/install_harbor/</url>
    <content><![CDATA[<p>本篇简单讲述了Harbor安装以及docker配合的配置</p>
<span id="more"></span>
<h1 id="Harbor简介"><a href="#Harbor简介" class="headerlink" title="Harbor简介"></a>Harbor简介</h1><p>Harbor是vmware公司 基于 docker registry 做的一个企业级私有registry 开源协议是Apache 2协议</p>
<p><a href="https://github.com/vmware/harbor/blob/master/README.md">官方详细介绍</a></p>
<h1 id="环境依赖"><a href="#环境依赖" class="headerlink" title="环境依赖"></a>环境依赖</h1><p> Python 2.7或以上</p>
<p> Docker 1.10或以上</p>
<p> Docker Compose 1.6.0或以上</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>  把大象装冰箱里总共分几步?     ;-)</p>
<ul>
<li><p>1 下载安装包</p>
</li>
<li><p>2 配置harbor.cfg文件</p>
<p>  主要配置hostname 注意不能为127.0.0.1和localhost 可以用ip以及域名,<br> <a href="https://github.com/vmware/harbor/blob/master/docs/installation_guide.md#configuring-harbor">其他详细配置</a></p>
<p> 如果想更改harbor保存文件的位置,请编辑docker-compose.yml文件 修改docker-compose的挂载点.</p>
<p>修改完后记得运行prepare脚本 重新生成docker-compose配置文件</p>
</li>
<li><p>3 运行install.sh脚本-&gt;安装和启动harbor</p>
</li>
</ul>
<h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><ul>
<li>访问刚刚配置hostname(如果配置的是域名形式,请不要忘了配置hosts) 能看到界面就是启动成功</li>
</ul>
<h1 id="docker提交镜像到harbor"><a href="#docker提交镜像到harbor" class="headerlink" title="docker提交镜像到harbor"></a>docker提交镜像到harbor</h1><p>  实际提交的还是registry</p>
<ul>
<li>在harbor进行注册和创建项目(请记住项目名)</li>
<li>docker 登录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker login 配置的hostname -u harbor注册的用户 -p 注册的密码</span><br></pre></td></tr></table></figure>

<ul>
<li>构建镜像以及推送镜像</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull ubuntu</span><br><span class="line">$ docker tag ubuntu 配置的hostname/项目名/镜像名</span><br><span class="line">$ docker push 配置的hostname/项目名/镜像名</span><br></pre></td></tr></table></figure>
<ul>
<li>推送的出错<ul>
<li>原因:docker push 默认是 https 但是harbor我们没有配置https</li>
<li>解决办法:编辑 配置文件 &#x2F;etc&#x2F;docker&#x2F;daemon.json</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;insecure-registries&quot;</span>: [<span class="string">&quot;加入配置的hostname&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改完后记得重启docker</p>
<p>再试一试 docker push</p>
<p>#验证</p>
<ul>
<li>1 到harbor网站去查看是否推送成功</li>
<li>2 其他docker 拉取 刚刚推送的镜像</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull 配置的hostname/项目名/镜像名</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>docker</tag>
        <tag>harbor</tag>
        <tag>registry</tag>
      </tags>
  </entry>
  <entry>
    <title>jenkins安装</title>
    <url>/2017/10/20/docker/install_jenkins/</url>
    <content><![CDATA[<p>本篇简单讲述了jenkins安装以及使用</p>
<span id="more"></span>
<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1><ul>
<li>还没有整理</li>
</ul>
]]></content>
      <categories>
        <category>jenkins</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>网页五子棋</title>
    <url>/2019/09/10/gomoku/gomoku-1/</url>
    <content><![CDATA[<h3 id="五指棋界面"><a href="#五指棋界面" class="headerlink" title="五指棋界面"></a>五指棋界面</h3><p>利用html5的canvas组件画出棋盘，棋盘为15*15格</p>
]]></content>
      <categories>
        <category>五子棋</category>
      </categories>
      <tags>
        <tag>五子棋</tag>
        <tag>算法</tag>
        <tag>netty</tag>
      </tags>
  </entry>
  <entry>
    <title>shell入门</title>
    <url>/2018/01/22/shell/shell_fast_guides/</url>
    <content><![CDATA[<p>#shell入门</p>
<p><a href="https://github.com/dpm100/fast_guides">原文</a></p>
<h2 id="Shell是什么"><a href="#Shell是什么" class="headerlink" title="Shell是什么"></a>Shell是什么</h2><p>Shell是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务, Shell脚本（shell script），是一种为Shell编写的脚本程序。我们经常说的shell通常都是指shell脚本。</p>
<h2 id="环境和工具"><a href="#环境和工具" class="headerlink" title="环境和工具"></a>环境和工具</h2><p>Shell跟java、php、Python编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p>
<p>Mac OS，Linux 自带了shell解释器，Windows比较麻烦，没有内置shell解释器，可以自行安装<br>一个cygwin</p>
<h2 id="PHP、Python-也可以作为Shell编程"><a href="#PHP、Python-也可以作为Shell编程" class="headerlink" title="PHP、Python 也可以作为Shell编程"></a>PHP、Python 也可以作为Shell编程</h2><p>PHP、Python是属于高级编程语言，但是也可以做Shell编程，因为只要有解释器，也可以用作脚本编程</p>
<p>如下是一个Python Shell Script示例（假设文件名叫op_python_base.py）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/env python3 //告诉Python从系统环境中找python</span><br><span class="line"># -*- coding: utf-8 -*- //设置为UTF-8编码</span><br><span class="line"></span><br><span class="line">for index in range(10):</span><br><span class="line">    print(index);</span><br></pre></td></tr></table></figure>


<p>如下是一个PHP Shell Script示例（假设文件名叫op_php_base.php）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/php</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">for($i=0 ;$i&lt;10; $i++)&#123;</span><br><span class="line">    echo $i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="为什么要学习Shell"><a href="#为什么要学习Shell" class="headerlink" title="为什么要学习Shell"></a>为什么要学习Shell</h2><p>既然PHP、Python都可以用来写脚本编程，那为什么还要学习陌生、晦涩难懂的Shell，主要有一下几个原因</p>
<ul>
<li><p>环境兼容性，因为除了windows，基本其他主流的操作系统都预制了Shell解释器，所以使用sh、bash编写，提供给其他人使用是非常方便的，但是PHP、Python 等等需要安装相应的环境</p>
</li>
<li><p>如果你想做一些定时任务比如说检测进程是否存在，自动备份，或者说自动部署环境、服务器之间的数据同步等等sh、bash会是你最好的选择</p>
</li>
</ul>
<h2 id="sh与bash"><a href="#sh与bash" class="headerlink" title="sh与bash"></a>sh与bash</h2><p>sh: Bourne shell，POSIX（Portable Operating System Interface）标准的shell解释器，它的二进制文件路径通常是&#x2F;bin&#x2F;sh</p>
<p>bash: Bash是Bourne shell的替代品，属GNU Project，二进制文件路径通常是&#x2F;bin&#x2F;bash</p>
<h2 id="第一个shell脚本"><a href="#第一个shell脚本" class="headerlink" title="第一个shell脚本"></a>第一个shell脚本</h2><h3 id="我们先来看一个例子"><a href="#我们先来看一个例子" class="headerlink" title="我们先来看一个例子"></a>我们先来看一个例子</h3><p>我相信写过代码的童鞋，应该对下面的代码很熟悉并不陌生，（假设文件名叫op_base.sh）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line">mkdir code</span><br><span class="line">cd  code</span><br><span class="line">for ((i=0; i&lt;3; i++)); do</span><br><span class="line">    touch test_$&#123;i&#125;.txt</span><br><span class="line">    echo &quot;shell很简单&quot; &gt;&gt; test_$&#123;i&#125;.txt</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>第一行：从系统path中寻找指定脚本的解释程序<br>第二行：创建 名叫code文件夹<br>第三行：进入创建的文件夹<br>第四行：for循环3次<br>第四行：创建文件<br>第五行：往创建的文件中写入信息<br>第六行：结束循环</p>
<p>mkdir, touch，cd，touch，echo都是系统命令，在命令行下可以直接执行<br>for, do, done 是shell脚本语言 for循环的语法</p>
<h3 id="编写Shell"><a href="#编写Shell" class="headerlink" title="编写Shell"></a>编写Shell</h3><p>新建一个文件，扩展名为sh（sh代表shell），扩展名并不影响脚本执行，见名知意就好，如果你用php，扩展名为php，如果你用Python，扩展名为python</p>
<p>第一行一般是这样：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/php</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line">#!/usr/bin/env bash</span><br></pre></td></tr></table></figure>

<p> #!”是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行<br>    &#x2F;env 是系统的PATH目录中查找</p>
<h3 id="运行-Shell-脚本有两种方法："><a href="#运行-Shell-脚本有两种方法：" class="headerlink" title="运行 Shell 脚本有两种方法："></a>运行 Shell 脚本有两种方法：</h3><h4 id="作为可执行程序"><a href="#作为可执行程序" class="headerlink" title="作为可执行程序"></a>作为可执行程序</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod +x op_base.sh</span><br><span class="line">./op_base.sh</span><br></pre></td></tr></table></figure>

<p>第一行设置 op_base.sh可执行权限<br>第二行执行op_base.sh</p>
<h4 id="作为参数"><a href="#作为参数" class="headerlink" title="作为参数"></a>作为参数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/bin/sh op_base.sh</span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>定义变量时，变量名前不需要加符号和Python一样但是在PHP语言中变量需要加$，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">my_name=&quot;jack&quot;</span><br><span class="line">my_name=&#x27;jack&#x27;;</span><br></pre></td></tr></table></figure>

<p>ps: 变量名和等号之间不能有空格,变量后面不能有;</p>
<p>Shell中的引号和PHP类似，字符串可以用单引号，也可以用双引号</p>
<p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的</li>
<li>单引号字串中不能出现单引号（对单引号使用转义符后也不行</li>
</ul>
<p>双引号：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<p>但是在Python中单引号和双引号是没有区别，但是Python 还有三个引号，在三个引号内字符都不会被转义</p>
<h3 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h3><p>对于已经定义过的变量，使用的适合在前面添加$</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo $my_name</span><br><span class="line">echo $&#123;my_name&#125;</span><br></pre></td></tr></table></figure>

<p>变量名外面的花括号是可选的，加不加都行,建议使用第二种形式</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>以“#”开头的行就是注释，会被解释器忽略。</p>
<h4 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h4><p>sh里没有多行注释，只能每一行加一个#号。就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#--------------------------------------------</span><br><span class="line">#这里是注释</span><br><span class="line"># 还是注释</span><br><span class="line">#--------------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>字符串可以用单引号，也可以用双引号，也可以不用引号。单双引号的区别跟PHP类似</p>
<p>Shell不像其他语言有php、python 有很多数据类型，在Shell中常用的数据类型字符串数字和字符串（ps: 除了数字和字符串，也没啥其它类型好用了，哈哈）</p>
<p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的</li>
<li>单引号字串中不能出现单引号（对单引号使用转义符后也不行</li>
</ul>
<p>双引号：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<h3 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h3><h4 id="拼接字符串"><a href="#拼接字符串" class="headerlink" title="拼接字符串"></a>拼接字符串</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">my_name=&quot;jack&quot;;</span><br><span class="line">my_age=&quot;20岁&quot;</span><br><span class="line">echo $my_name $my_age</span><br><span class="line">echo $my_name$my_age</span><br></pre></td></tr></table></figure>

<h4 id="获取字符串长度"><a href="#获取字符串长度" class="headerlink" title="获取字符串长度"></a>获取字符串长度</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo $&#123;#my_name&#125;</span><br></pre></td></tr></table></figure>

<h4 id="截取字符串"><a href="#截取字符串" class="headerlink" title="截取字符串"></a>截取字符串</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo $&#123;my_name:0:2&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Shell-数组"><a href="#Shell-数组" class="headerlink" title="Shell 数组"></a>Shell 数组</h3><h4 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h4><p>在Shell中，用括号来表示数组，数组元素用”空格”符号分割开。定义数组的一般形式为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name=(name1 name2 name3)</span><br></pre></td></tr></table></figure>

<p>还可以单独定义数组的各个分量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ary[0]=name1</span><br><span class="line">ary[1]=name2</span><br><span class="line">ary[3]=name3</span><br></pre></td></tr></table></figure>

<p>ps: 可以不使用连续的下标，而且下标的范围没有限制</p>
<h4 id="读取数组"><a href="#读取数组" class="headerlink" title="读取数组"></a>读取数组</h4><p>读取数组元素值的一般格式是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;数组名[下标]&#125;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo $&#123;name[0]&#125;</span><br></pre></td></tr></table></figure>

<p>使用@符号可以获取数组中的所有元素，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo $&#123;name[@]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="获取数组的长度"><a href="#获取数组的长度" class="headerlink" title="获取数组的长度"></a>获取数组的长度</h4><p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 取得数组元素的个数</span><br><span class="line">length=$&#123;#name[@]&#125;</span><br><span class="line">echo $length</span><br><span class="line"></span><br><span class="line"># 或者</span><br><span class="line">length=$&#123;#name[*]&#125;</span><br><span class="line">echo $length</span><br><span class="line"></span><br><span class="line"># 取得数组单个元素的长度</span><br><span class="line">lengthn=$&#123;#name[n]&#125;</span><br><span class="line">echo $length</span><br></pre></td></tr></table></figure>


<h3 id="Shell-流程控制"><a href="#Shell-流程控制" class="headerlink" title="Shell 流程控制"></a>Shell 流程控制</h3><p>和Java、PHP、Python等语言不一样，sh的流程控制不可为空，如(以下为PHP流程控制写法)：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">if (isset($_GET[&quot;q&quot;])) &#123;</span><br><span class="line">    search(q);</span><br><span class="line">&#125;</span><br><span class="line">else &#123;</span><br><span class="line">    // 不做任何事情</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在sh&#x2F;bash里可不能这么写，如果else分支没有语句执行，就不要写这个else</p>
<h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if condition1</span><br><span class="line">then</span><br><span class="line">    command1</span><br><span class="line">elif condition2 </span><br><span class="line">then </span><br><span class="line">    command2</span><br><span class="line">else</span><br><span class="line">    commandN</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line"></span><br><span class="line">a=1</span><br><span class="line">b=2</span><br><span class="line">if [ $a == $b ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;a 等于 b&quot;</span><br><span class="line"> elif [ $a -gt $b ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;a 大于 b&quot;</span><br><span class="line"> elif [ $a -lt $b ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;a 小于 b&quot;</span><br><span class="line"> else</span><br><span class="line">    echo &quot;没有符合的条件&quot;</span><br><span class="line"></span><br><span class="line"> fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h4><p>Shell的for循环和Python 有点类似</p>
<h5 id="Python的for循环"><a href="#Python的for循环" class="headerlink" title="Python的for循环"></a>Python的for循环</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for index in 1,2,3,4,5:</span><br><span class="line">    print(index);</span><br></pre></td></tr></table></figure>

<h5 id="Shell的for循环，第一种写法"><a href="#Shell的for循环，第一种写法" class="headerlink" title="Shell的for循环，第一种写法"></a>Shell的for循环，第一种写法</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for index in 1 2 3 4 5; do</span><br><span class="line">    echo &quot;index=&quot;$index</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h5 id="Shell的for循环，第二种写法"><a href="#Shell的for循环，第二种写法" class="headerlink" title="Shell的for循环，第二种写法"></a>Shell的for循环，第二种写法</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for ((i=0; i&lt;5; i++)); do</span><br><span class="line">    echo &quot;i=&quot;$i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h4 id="while-语句"><a href="#while-语句" class="headerlink" title="while 语句"></a>while 语句</h4><p>while循环用于不断执行一系列命令，也用于从输入文件中读取数据；命令通常为测试条件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">    echo $int</span><br><span class="line">    let &quot;int++&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h3 id="Shell结合系统命令"><a href="#Shell结合系统命令" class="headerlink" title="Shell结合系统命令"></a>Shell结合系统命令</h3><p>sh脚本结合系统命令便有了强大的威力，在字符处理领域，有grep、awk、sed三剑客，grep负责找出特定的行，awk能将行拆分成多个字段，sed则可以实现更新插入删除等写操作。</p>
<h4 id="例如定时检测nginx、mysql是否被关闭"><a href="#例如定时检测nginx、mysql是否被关闭" class="headerlink" title="例如定时检测nginx、mysql是否被关闭"></a>例如定时检测nginx、mysql是否被关闭</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">path=/var/log</span><br><span class="line">log=$&#123;path&#125;/httpd-mysql.log</span><br><span class="line"></span><br><span class="line">name=(apache mysql)</span><br><span class="line"></span><br><span class="line">exs_init[0]=&quot;service httpd start&quot;</span><br><span class="line">exs_init[1]=&quot;/etc/init.d/mysqld restart&quot;</span><br><span class="line"></span><br><span class="line">for ((i=0; i&lt;2; i++)); do</span><br><span class="line">    echo &quot;检查$&#123;name[i]&#125;进程是否存在&quot;</span><br><span class="line">    ps -ef|grep $&#123;name[i]&#125; |grep -v grep</span><br><span class="line">    if [ $? -eq 0 ]; then</span><br><span class="line">        pid=$(pgrep -f $&#123;name[i]&#125;)</span><br><span class="line">        echo &quot;`date +&quot;%Y-%m-%d %H:%M:%S&quot;` $&#123;name[$i]&#125; is running with pid $pid&quot; &gt;&gt; $&#123;log&#125;</span><br><span class="line">     else</span><br><span class="line">        $($&#123;exs_init[i]&#125;)</span><br><span class="line">        echo &quot;`date +&quot;%Y-%m-%d %H:%M:%S&quot;` $&#123;name[$i]&#125; start success&quot; &gt;&gt; $&#123;log&#125;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>解释：检测 nginx、mysql进程是否存在，如果不存在了会自动重新启动。<br>脚本每次运行会写日志的，没事可以去看看该日志文件，如果进程是不是真的经常性不存在，恐怕就要排查一下深层原因了。</p>
<h4 id="编辑-etc-crontab-文件"><a href="#编辑-etc-crontab-文件" class="headerlink" title="编辑 &#x2F;etc&#x2F;crontab 文件"></a>编辑 &#x2F;etc&#x2F;crontab 文件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>在文件最后添加一行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*/5 * * * * /xxx/check_nginx.sh &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>上表示每 5 分钟，执行一下脚本 &#x2F;xxx&#x2F;check_nginx.sh，其中xxx代表路径</p>
<p>&#x2F;dev&#x2F;null 2&gt;&amp;1 的意思是该条shell命令将不会输出任何信息到控制台，也不会有任何信息输出到文件中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#cron表达式每个位置的含义</span><br><span class="line"># For details see man 4 crontabs</span><br><span class="line"></span><br><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59)</span><br><span class="line"># |  .------------- hour (0 - 23)</span><br><span class="line"># |  |  .---------- day of month (1 - 31)</span><br><span class="line"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"># |  |  |  |  |</span><br><span class="line"># *  *  *  *  * command to be executed</span><br></pre></td></tr></table></figure>

<h3 id="添加完配置，重启才能生效"><a href="#添加完配置，重启才能生效" class="headerlink" title="添加完配置，重启才能生效"></a>添加完配置，重启才能生效</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service crond restart</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>shell编程</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>vue bootstrap  带分页表格</title>
    <url>/2017/12/20/vue/vue-bootstrap-page/</url>
    <content><![CDATA[<p>前端渲染分页表格整体解决方案<br> <span id="more"></span></p>
<h1 id="后端数据提供"><a href="#后端数据提供" class="headerlink" title="后端数据提供"></a>后端数据提供</h1><h2 id="分页参数对象"><a href="#分页参数对象" class="headerlink" title="分页参数对象"></a>分页参数对象</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageParameters</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求第几页,下标起始为1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer page;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每页是多少条数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> page == <span class="literal">null</span> ? <span class="number">1</span> : page;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="literal">null</span> ? <span class="number">10</span> : size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回给前端的页面显示对象"><a href="#返回给前端的页面显示对象" class="headerlink" title="返回给前端的页面显示对象"></a>返回给前端的页面显示对象</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表格数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;T&gt; content = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;T&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 总共的数据条数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> totalElements;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 总页数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalPages;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否是最后一页</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Boolean last;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否是第一页</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Boolean first;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 没有页多少条数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前第几页</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> number;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content       表格内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parameters    分页参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> totalElements 总共的条数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">(List&lt;T&gt; content, PageParameters parameters, Number totalElements)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content.addAll(content);</span><br><span class="line">        <span class="built_in">this</span>.totalElements = totalElements.longValue();</span><br><span class="line">        <span class="keyword">if</span> ((totalElements.intValue() % parameters.getSize()) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//能整除</span></span><br><span class="line">            <span class="built_in">this</span>.totalPages = (totalElements.intValue() / parameters.getSize());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.totalPages = (totalElements.intValue() / parameters.getSize()) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        first = parameters.getPage() == <span class="number">1</span>;</span><br><span class="line">        last = parameters.getPage() == totalPages;</span><br><span class="line">        size = parameters.getSize();</span><br><span class="line">        number = parameters.getPage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="前端显示"><a href="#前端显示" class="headerlink" title="前端显示"></a>前端显示</h1><h2 id="需要的js库"><a href="#需要的js库" class="headerlink" title="需要的js库"></a>需要的js库</h2><ul>
<li><p>jquery</p>
</li>
<li><p>bootstrap</p>
</li>
<li><p>bootstrap-table.css ( 只要css )</p>
</li>
<li><p>vue</p>
</li>
<li><p>axios (http请求 可以自己选用)</p>
</li>
</ul>
<h2 id="页面"><a href="#页面" class="headerlink" title="页面"></a>页面</h2><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered table-condensed&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>发货商<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>订单时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>订单号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>商品性质<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>订单状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>导出状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>出库状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>商品编码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>商品名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>小计金额<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;detail in tableData.content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.supplierName&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.crtTime&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.orderSubNo&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;vueTranslateDict(&#x27;tradeNature&#x27;,detail.tradeNature)&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;vueTranslateDict(&#x27;orderStatus&#x27;,detail.orderStatus)&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;vueTranslateDict(&#x27;exportStatus&#x27;,detail.exportStatus)&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;vueTranslateDict(&#x27;outStatus&#x27;,detail.outStatus)&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.goodsCode&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.goodsName&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.quantity&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;detail.totalPrice&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="分页条"><a href="#分页条" class="headerlink" title="分页条"></a>分页条</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fixed-table-pagination&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pull-left pagination-detail&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;pagination-info&quot;</span>&gt;</span></span><br><span class="line">               &lt;#--显示第 1 到第 10 条记录,--&gt;</span><br><span class="line">                   总共 &#123;&#123;tableData.totalElements&#125;&#125; 记录,每页显示<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;page-list&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;btn-group dropup&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;page-size&quot;</span>&gt;</span>&#123;&#123;outOption.size&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                       <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span> <span class="attr">role</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;menuitem&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;active: size===outOption.size&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">v-for</span>=<span class="string">&quot;size in pageSizeConfig&quot;</span>&gt;</span></span><br><span class="line">                               <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;changePageSize(size)&quot;</span>&gt;</span>&#123;&#123;size&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">span</span>&gt;</span>条记录<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pull-right pagination&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item page-pre&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;disabled: tableData.first&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(tableData.number-1)&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">span</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">               &lt;#--总的页数大于等于5--&gt;</span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in tableData.totalPages&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: i == tableData.number &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(i)&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &lt;= 5&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;i&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">               &lt;#--总的页数大于5--&gt;</span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: 1 == tableData.number &#125;&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(1)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt; 5&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: 2 == tableData.number &#125;&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(2)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt; 5 &amp;&amp; tableData.number &lt;= 4&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item page-last-separator disabled&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt; 5 &amp;&amp; tableData.number &gt; 4&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in 3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: i+2 == tableData.number &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(i+2)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt;5 &amp;&amp; tableData.number &lt; 5 &amp;&amp; tableData.totalPages - tableData.number &gt; 3&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;i+2&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">               &lt;#--显示中间三个按钮--&gt;</span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in 3&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: i == 2 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(i+(tableData.number)-2)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt;5 &amp;&amp; tableData.number &gt;= 5 &amp;&amp; tableData.totalPages - tableData.number &gt; 3&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;i+(tableData.number)-2&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in 3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: tableData.totalPages - 5 + i == tableData.number &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(tableData.totalPages -5 + i)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt;5 &amp;&amp; tableData.number &gt; 5 &amp;&amp; (tableData.totalPages - tableData.number &lt;= 3)&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;tableData.totalPages -5 + i&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item page-last-separator disabled&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt;5 &amp;&amp; tableData.totalPages - tableData.number &gt; 3&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">               &lt;#--倒数第二页--&gt;</span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: tableData.totalPages-1 === tableData.number &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(tableData.totalPages-1)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt;5 &amp;&amp; tableData.totalPages - tableData.number &lt;= 3&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;tableData.totalPages-1&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: tableData.totalPages === tableData.number &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(tableData.totalPages)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-if</span>=<span class="string">&quot;tableData.totalPages &gt; 5&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;tableData.totalPages&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item page-next&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;disabled: tableData.last&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-on:click</span>=<span class="string">&quot;toPage(tableData.number + 1)&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">span</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="javascript代码"><a href="#javascript代码" class="headerlink" title="javascript代码"></a>javascript代码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">pageAgs</span>: &#123;</span><br><span class="line">                    <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">size</span>: <span class="number">10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">pageSizeConfig</span>: [<span class="number">10</span>, <span class="number">25</span>, <span class="number">50</span>, <span class="number">100</span>],</span><br><span class="line">                <span class="attr">tableData</span>: &#123;</span><br><span class="line">                    <span class="attr">totalElements</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">first</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">last</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>bootstrap</tag>
        <tag>page</tag>
        <tag>分页方案</tag>
      </tags>
  </entry>
  <entry>
    <title>SpingBoot2 配置HTTPS,并实现HTTP访问自动转HTTPS访问</title>
    <url>/2019/04/29/springboot/spring-boot-https/</url>
    <content><![CDATA[<h2 id="SSL证书生成"><a href="#SSL证书生成" class="headerlink" title="SSL证书生成"></a>SSL证书生成</h2><p>生产环境是向证书供应商进行购买，在使用工具转换<br>我们着使用java自带的工具进行生成，可以使用keytool –help查看具体用法</p>
<h3 id="jks证书（java专用）"><a href="#jks证书（java专用）" class="headerlink" title="jks证书（java专用）"></a>jks证书（java专用）</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -genkeypair -alias tomcat -keyalg RSA -keysize 2048 -keystore keystore.jks -validity 3650  #生成证书</span><br><span class="line">keytool -list -v -keystore keystore.jks # 查看生成的信息</span><br></pre></td></tr></table></figure>



<h3 id="PKCS12"><a href="#PKCS12" class="headerlink" title="PKCS12"></a>PKCS12</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -genkeypair -alias tomcat -keyalg RSA -keysize 2048 -storetype PKCS12 -keystore keystore.p12 -validity 3650 #生成证书</span><br><span class="line">keytool -list -v -storetype pkcs12 -keystore keystore.p12 #查看生成的信息</span><br></pre></td></tr></table></figure>

<p>生成证书都会要求你输入密码，注意，请记住这个密码，后面springboot配置要用到。</p>
<h3 id="JKS迁移成PKCS12证书"><a href="#JKS迁移成PKCS12证书" class="headerlink" title="JKS迁移成PKCS12证书"></a>JKS迁移成PKCS12证书</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.p12 -deststoretype pkcs12</span><br></pre></td></tr></table></figure>

<h3 id="证书供应商提供的证书"><a href="#证书供应商提供的证书" class="headerlink" title="证书供应商提供的证书"></a>证书供应商提供的证书</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">keytool -import -alias tomcat -file myCertificate.crt -keystore keystore.p12 -storepass password</span><br></pre></td></tr></table></figure>

<h2 id="Spring-Boot-启用https"><a href="#Spring-Boot-启用https" class="headerlink" title="Spring Boot 启用https"></a>Spring Boot 启用https</h2><p>配置文件</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">#访问的端口</span><br><span class="line">server.port=8443</span><br><span class="line">#自定义配置用于开启http端口访问</span><br><span class="line">http.port=8080</span><br><span class="line"></span><br><span class="line">#默认就是true 不用配置</span><br><span class="line">server.ssl.enabled=true </span><br><span class="line">#这用到生成证书时的密码</span><br><span class="line">server.ssl.key-password=111111</span><br><span class="line">#证书地址 如果是在jar里面 使用classpath:keystore.jks</span><br><span class="line">server.ssl.key-store=./keystore.jks</span><br><span class="line">#证书alias 别名</span><br><span class="line">server.ssl.key-alias=tomcat</span><br><span class="line">#证书格式 还有 PKCS12</span><br><span class="line">server.ssl.key-store-type=jks</span><br></pre></td></tr></table></figure>
<p>启动服务器 访问https 的 8488端口 应该就能访问了</p>
<h2 id="http重定向到https"><a href="#http重定向到https" class="headerlink" title="http重定向到https"></a>http重定向到https</h2><p>spring boot 2.x 版本代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.catalina.Context;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.connector.Connector;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.descriptor.web.SecurityCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.descriptor.web.SecurityConstraint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.server.ServletWebServerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">/*配置http自动转为https*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectorConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ServletWebServerFactory <span class="title function_">servletWebServerFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">TomcatServletWebServerFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TomcatServletWebServerFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">postProcessContext</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">                <span class="type">SecurityConstraint</span> <span class="variable">securityConstraint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecurityConstraint</span>();</span><br><span class="line">                securityConstraint.setUserConstraint(<span class="string">&quot;CONFIDENTIAL&quot;</span>);<span class="comment">//机密的</span></span><br><span class="line">                <span class="type">SecurityCollection</span> <span class="variable">securityCollection</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecurityCollection</span>();</span><br><span class="line">                securityCollection.addPattern(<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">                securityConstraint.addCollection(securityCollection);</span><br><span class="line">                context.addConstraint(securityConstraint);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        factory.addAdditionalTomcatConnectors(httpConnector());</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//https端口</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> httpsPort;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//http端口</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">httpPort</span> <span class="operator">=</span> <span class="number">8080</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Connector <span class="title function_">httpConnector</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connector</span> <span class="variable">connector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Connector</span>(<span class="string">&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span>);</span><br><span class="line">        connector.setScheme(<span class="string">&quot;http&quot;</span>);</span><br><span class="line">        connector.setPort(httpPort);</span><br><span class="line">        connector.setSecure(<span class="literal">false</span>);</span><br><span class="line">        connector.setRedirectPort(httpsPort);</span><br><span class="line">        <span class="keyword">return</span> connector;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问8080端口 会自动跳转到 https 的端口</p>
<h2 id="其他（非必要操作）"><a href="#其他（非必要操作）" class="headerlink" title="其他（非必要操作）"></a>其他（非必要操作）</h2><p>获取分发给客户端的证书</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -export -keystore keystore.jks -alias tomcat -file myCertificate.crt</span><br></pre></td></tr></table></figure>

<p>jdk导入证书 方便java程序访问https访问时进行证书的验证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -importcert -file myCertificate.crt -alias tomcat -keystore $JDK_HOME/jre/lib/security/cacerts</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="思考❓"><a href="#思考❓" class="headerlink" title="思考❓"></a>思考❓</h2><p>浏览器怎么和证书进行关联？通过别名么？ 别名设置成域名？</p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title>websocket 断线重连方案</title>
    <url>/2019/03/20/websocket/websocket/</url>
    <content><![CDATA[<h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近向海关上报支付单时，加密过程只能用海关提供的websocket服务进行加签。<br>在使用过程中，由于海关的服务不够稳定 socket经常中断，所以需要对websocket 进行断线重连</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>不停的检查websocket的连接状态，对于已经关闭连接的websocket进行重新初始化（因为断掉的websocket不能进行重新连接）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SignDataWebSocketClient</span> <span class="keyword">extends</span> <span class="title class_">WebSocketClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    Producer producer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> serverUri</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SignDataWebSocketClient</span><span class="params">(URI serverUri, Producer producer)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(serverUri);</span><br><span class="line">        <span class="built_in">this</span>.producer = producer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(ServerHandshake arg0)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;onOpen打开链接,当前状态&#123;&#125;&quot;</span>, getReadyState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String arg0)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;onMessage,当前状态&#123;&#125;&quot;</span>, getReadyState());</span><br><span class="line">        log.debug(<span class="string">&quot;收到消息:&quot;</span> + arg0);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(arg0);</span><br><span class="line">            <span class="type">String</span> <span class="variable">_status</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;_status&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">_method</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;_method&quot;</span>);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">_id</span> <span class="operator">=</span> jsonObject.getInteger(<span class="string">&quot;_id&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;cus-sec_SpcSignDataAsPEM&quot;</span>.equals(_method) &amp;&amp; <span class="string">&quot;00&quot;</span>.equals(_status)) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">_args</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;_args&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">args</span> <span class="operator">=</span> JSON.parseObject(_args);</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> args.getBoolean(<span class="string">&quot;Result&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">resp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">                resp.put(<span class="string">&quot;orderSubNo&quot;</span>, map.remove(_id));</span><br><span class="line">                resp.put(<span class="string">&quot;success&quot;</span>, result);</span><br><span class="line">                <span class="keyword">if</span> (result) &#123;</span><br><span class="line">                    <span class="comment">//签名成功</span></span><br><span class="line">                    <span class="type">JSONArray</span> <span class="variable">data</span> <span class="operator">=</span> args.getJSONArray(<span class="string">&quot;Data&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">signValueStr</span> <span class="operator">=</span> data.getString(<span class="number">0</span>);</span><br><span class="line">                    log.debug(<span class="string">&quot;签名成功:&#123;&#125;&quot;</span>, signValueStr);</span><br><span class="line">                    resp.put(<span class="string">&quot;signValue&quot;</span>, signValueStr);</span><br><span class="line">                    resp.put(<span class="string">&quot;certNo&quot;</span>, data.getString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;签名失败:&#123;&#125;&quot;</span>, args.getString(<span class="string">&quot;Error&quot;</span>));</span><br><span class="line">                    resp.put(<span class="string">&quot;error&quot;</span>, args.getString(<span class="string">&quot;Error&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">                producer.produce(resp.toJSONString().getBytes());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Exception arg0)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;onError当前状态&#123;&#125;&quot;</span>, getReadyState());</span><br><span class="line">        arg0.printStackTrace();</span><br><span class="line">        log.error(<span class="string">&quot;发生错误已关闭&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(<span class="type">int</span> arg0, String arg1, <span class="type">boolean</span> arg2)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;onClose链接关闭,当前状态&#123;&#125;&quot;</span>, getReadyState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">AtomicInteger</span> <span class="variable">count</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">cusSecSpcSignDataAsPEM</span><span class="params">(Payload payload)</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">id</span> <span class="operator">=</span> count.incrementAndGet();</span><br><span class="line">        map.put(id, payload.getOrderSubNo());</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        jsonObject.put(<span class="string">&quot;_method&quot;</span>, <span class="string">&quot;cus-sec_SpcSignDataAsPEM&quot;</span>);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;_id&quot;</span>, id);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">pargs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        pargs.put(<span class="string">&quot;inData&quot;</span>, payload.getInData());</span><br><span class="line">        <span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> PropertiesUtil.getProperty(<span class="string">&quot;passwd&quot;</span>);</span><br><span class="line">        log.debug(<span class="string">&quot;passwd=&#123;&#125;&quot;</span>, passwd);</span><br><span class="line">        pargs.put(<span class="string">&quot;passwd&quot;</span>, passwd);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;args&quot;</span>, pargs);</span><br><span class="line">        log.debug(<span class="string">&quot;&#123;&#125;:发送消息:&#123;&#125;&quot;</span>, payload.getOrderSubNo(), jsonObject.toJSONString());</span><br><span class="line">        <span class="type">byte</span>[] str = jsonObject.toJSONString().getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">FramedataImpl1</span> <span class="variable">framedataImpl1</span> <span class="operator">=</span> FramedataImpl1.get(Framedata.Opcode.TEXT);</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> ByteBuffer.wrap(str);</span><br><span class="line">        framedataImpl1.setPayload(byteBuffer);</span><br><span class="line">        <span class="built_in">this</span>.sendFrame(framedataImpl1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayloadSender</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    Producer producer;</span><br><span class="line">    URI serverUri;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> serverUri</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PayloadSender</span><span class="params">(URI serverUri, Producer producer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.serverUri = serverUri;</span><br><span class="line">        <span class="built_in">this</span>.producer = producer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Queue&lt;Payload&gt; payloads = <span class="keyword">new</span> <span class="title class_">ConcurrentLinkedQueue</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SignDataWebSocketClient client;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 消费消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">producePayload</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!payloads.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">//调用海关的加签方法</span></span><br><span class="line">                client.cusSecSpcSignDataAsPEM(payloads.poll());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提交消息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> payload 消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">submitPayload</span><span class="params">(Payload payload)</span> &#123;</span><br><span class="line">        payloads.add(payload);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (client == <span class="literal">null</span></span><br><span class="line">                        ||</span><br><span class="line">                        WebSocket.READYSTATE.CLOSING.equals(client.getReadyState())</span><br><span class="line">                        ||</span><br><span class="line">                        WebSocket.READYSTATE.CLOSED.equals(client.getReadyState())</span><br><span class="line">                        ) &#123;</span><br><span class="line">                    log.debug(<span class="string">&quot;客户端未初始化或者客户端连接关闭&quot;</span>);</span><br><span class="line">                    <span class="comment">//client 未初始化 或者关闭</span></span><br><span class="line">                    client = <span class="keyword">new</span> <span class="title class_">SignDataWebSocketClient</span>(serverUri, producer);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (NOT_YET_CONNECTED.equals(client.getReadyState())) &#123;</span><br><span class="line">                        <span class="comment">// client 未连接</span></span><br><span class="line">                        <span class="type">boolean</span> <span class="variable">isConnect</span> <span class="operator">=</span> client.connectBlocking();</span><br><span class="line">                        <span class="keyword">if</span> (isConnect) &#123;</span><br><span class="line">                            producePayload();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//连接失败</span></span><br><span class="line">                            log.error(<span class="string">&quot;连接失败&quot;</span>);</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;连接失败&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (WebSocket.READYSTATE.OPEN.equals(client.getReadyState())) &#123;</span><br><span class="line">                        producePayload();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                client = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>WebSocketClient只能连接一次的原因</p>
<pre><code class="java">
    /**
     * Initiates the websocket connection. This method does not block.
     */
    public void connect() &#123;
        if( writeThread != null )
            throw new IllegalStateException( &quot;WebSocketClient objects are not reuseable&quot; );
        writeThread = new Thread( this );
        writeThread.start();
    &#125;

···


 

</code></pre>
]]></content>
      <categories>
        <category>websocket</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>websocket</tag>
      </tags>
  </entry>
  <entry>
    <title>DelayQueue有趣的延迟队列</title>
    <url>/2020/04/08/java/jdk/delay-queue/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>原文介绍：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">An unbounded blocking queue of Delayed elements, in which an element can only be taken when its delay has expired. The head of the queue is that Delayed element whose delay expired furthest in the past. If no delay has expired there is no head and poll will return null. Expiration occurs when an element&#x27;s getDelay(TimeUnit.NANOSECONDS) method returns a value less than or equal to zero. Even though unexpired elements cannot be removed using take or poll, they are otherwise treated as normal elements. For example, the size method returns the count of both expired and unexpired elements. This queue does not permit null elements.</span><br><span class="line">This class and its iterator implement all of the optional methods of the Collection and Iterator interfaces. The Iterator provided in method iterator() is not guaranteed to traverse the elements of the DelayQueue in any particular order.</span><br><span class="line">This class is a member of the Java Collections Framework.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>简单翻译</p>
<p>DelayQueue是一个无界阻塞队列，只有在延迟期满时，才能从中提取元素。<br>队列的头部，是延迟期满后保存时间最长的delay元素。</p>
 <span id="more"></span>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p>订单定时取消，我们原来有这样一个需求：一个订单提交后在三十分钟内未支付就取消该订单。在订单少的时候采用的方法是一个定时调度任务每隔一分钟就扫描一次数据库（一分钟能接受），查找创建时间大于当前时间加三十分钟且未支付的订单，订单少任务还能处理，订单一旦多起来，有些订单的取消时间就不止三十分钟，这就不能接受了。尤其是在抢货时，延迟就更加严重。这时候DelayQueue就能排上用场</p>
<p>其他场景：定时调度，key失效（如缓存）</p>
<h3 id="DelayQueue的使用条件"><a href="#DelayQueue的使用条件" class="headerlink" title="DelayQueue的使用条件"></a>DelayQueue的使用条件</h3><ul>
<li>存放DelayQueue的元素，必须继承Delay接口，Delay接口使对象成为延迟对象。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class DelayQueue&lt;E extends Delayed&gt; extends AbstractQueue&lt;E&gt; implements BlockingQueue&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li>该接口强制实现两个方法：<br>1.CompareTo(Delayed o)：用于比较延时，队列里元素的排序依据，这个是Comparable接口的方法，因为Delay实现了Comparable接口，所以需要实现。<br>2.getDelay(TimeUnit unit)：这个接口返回到激活日期的–剩余时间，时间单位由单位参数指定。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public interface Delayed extends Comparable&lt;Delayed&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">    * 剩余时间，小于等于0就表示该元素已过时</span><br><span class="line">    */</span><br><span class="line">    long getDelay(TimeUnit unit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>队列中不允许使用null元素。</li>
</ul>
<h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> io.github.mylyed.h1.base;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.RandomUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.DelayQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Delayed;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 延时队列测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelayedQueneTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        DelayQueue&lt;Order&gt; queue = <span class="keyword">new</span> <span class="title class_">DelayQueue</span>&lt;&gt;();</span><br><span class="line">        log.debug(<span class="string">&quot;start time:&#123;&#125;&quot;</span>, LocalDateTime.now().format(DateTimeFormatter.ISO_LOCAL_DATE_TIME));</span><br><span class="line"></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">atomicInteger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//添加订单</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">producers</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">orderNum</span> <span class="operator">=</span> String.valueOf(atomicInteger.incrementAndGet());</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">time</span> <span class="operator">=</span> RandomUtils.nextInt(<span class="number">1</span>, <span class="number">7</span>);</span><br><span class="line">                    log.debug(<span class="string">&quot;add order =&gt; orderNum:&#123;&#125;,time:&#123;&#125; SECONDS&quot;</span>, orderNum, time);</span><br><span class="line">                    queue.put(<span class="keyword">new</span> <span class="title class_">Order</span>(orderNum, time, TimeUnit.SECONDS));</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(producers, <span class="string">&quot;producers-1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(producers, <span class="string">&quot;producers-2&quot;</span>).start();</span><br><span class="line">        <span class="comment">//消费</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">consumers</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">Order</span> <span class="variable">take</span> <span class="operator">=</span> queue.take();</span><br><span class="line">                    log.debug(<span class="string">&quot;orderNum:&#123;&#125;, time:&#123;&#125;&quot;</span>, take.getOrderNum(), LocalDateTime.now().format(DateTimeFormatter.ISO_DATE_TIME));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(consumers, <span class="string">&quot;consumers-1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(consumers, <span class="string">&quot;consumers-2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Order</span> <span class="keyword">implements</span> <span class="title class_">Delayed</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 触发时间 单位纳秒</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> triggerTime;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 订单号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String orderNum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Order</span><span class="params">(String orderNum, <span class="type">long</span> time, TimeUnit timeUnit)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.triggerTime = System.currentTimeMillis() + (time &gt; <span class="number">0</span> ? timeUnit.toMillis(time) : <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.orderNum = orderNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getDelay</span><span class="params">(TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="comment">//剩余延迟时间</span></span><br><span class="line">        <span class="keyword">return</span> triggerTime - System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Delayed o)</span> &#123;</span><br><span class="line">        <span class="comment">//根据触发事件排序</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> (Order) o;</span><br><span class="line">        <span class="type">long</span> <span class="variable">diff</span> <span class="operator">=</span> <span class="built_in">this</span>.triggerTime - order.triggerTime;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) diff;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="部分运行结果"><a href="#部分运行结果" class="headerlink" title="部分运行结果"></a>部分运行结果</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">23:52:08.795 [main] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - start time:2020-04-08T23:52:08.784</span><br><span class="line">23:52:08.801 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:2,time:2 SECONDS</span><br><span class="line">23:52:08.801 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:1,time:1 SECONDS</span><br><span class="line">23:52:09.806 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:4,time:3 SECONDS</span><br><span class="line">23:52:09.806 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:3,time:4 SECONDS</span><br><span class="line">23:52:09.806 [consumers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:1, time:2020-04-08T23:52:09.806</span><br><span class="line">23:52:10.806 [consumers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:2, time:2020-04-08T23:52:10.806</span><br><span class="line">23:52:10.807 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:6,time:6 SECONDS</span><br><span class="line">23:52:10.807 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:5,time:4 SECONDS</span><br><span class="line">23:52:11.807 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:8,time:1 SECONDS</span><br><span class="line">23:52:11.807 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:7,time:4 SECONDS</span><br><span class="line">23:52:12.806 [consumers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:4, time:2020-04-08T23:52:12.806</span><br><span class="line">23:52:12.807 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:10,time:6 SECONDS</span><br><span class="line">23:52:12.807 [consumers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:8, time:2020-04-08T23:52:12.807</span><br><span class="line">23:52:12.807 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:9,time:4 SECONDS</span><br><span class="line">23:52:13.806 [consumers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:3, time:2020-04-08T23:52:13.806</span><br><span class="line">23:52:13.807 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:11,time:2 SECONDS</span><br><span class="line">23:52:13.807 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:12,time:2 SECONDS</span><br><span class="line">23:52:14.807 [consumers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - orderNum:5, time:2020-04-08T23:52:14.807</span><br><span class="line">23:52:14.808 [producers-1] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:14,time:3 SECONDS</span><br><span class="line">23:52:14.808 [producers-2] DEBUG i.g.mylyed.h1.base.DelayedQueneTest - add order =&gt; orderNum:13,time:5 SECONDS</span><br></pre></td></tr></table></figure>

<h3 id="源码详解"><a href="#源码详解" class="headerlink" title="源码详解"></a>源码详解</h3><p>TODO</p>
<h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>说来惭愧，许久没有写点东西了。</p>
]]></content>
      <categories>
        <category>jdk</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>队列</tag>
        <tag>jdk</tag>
      </tags>
  </entry>
  <entry>
    <title>注解使用</title>
    <url>/2023/07/01/java/jdk/annotation/</url>
    <content><![CDATA[<ul>
<li><a href="#%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%B8%80%E6%97%B6%E7%88%BD%E4%B8%80%E7%9B%B4%E7%94%A8%E4%B8%80%E7%9B%B4%E7%88%BD">用注解一时爽，一直用一直爽</a></li>
<li><a href="#%E5%8E%9F%E6%9D%A5%E6%B3%A8%E8%A7%A3%E4%B8%8D%E7%A5%9E%E7%A7%98">原来注解不神秘</a></li>
<li><a href="#%E9%80%A0%E7%81%AB%E7%AE%AD%E5%95%A6%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AA%E6%B3%A8%E8%A7%A3">造火箭啦，自己动手写一个注解</a><ul>
<li><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%B3%A8%E8%A7%A3">第一步定义一个注解</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%AE%9E%E7%8E%B0%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91">第二步实现注解的业务逻辑</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%E5%9C%A8%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E4%B8%AD%E5%B0%BD%E6%83%85%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3">第三步在业务代码中尽情的使用注解</a></li>
</ul>
</li>
</ul>
 <span id="more"></span>


<div align="center">  <img data-src="https://cdn.jsdelivr.net/gh/SmileLionCoder/assets@main/202010/20201023232517.png" width=""/> </div><br>

<h1 id="用注解一时爽，一直用一直爽"><a href="#用注解一时爽，一直用一直爽" class="headerlink" title="用注解一时爽，一直用一直爽"></a>用注解一时爽，一直用一直爽</h1><p>Java后端开发进入spring全家桶时代后，开发一个微服务提供简单的增删改查接口跟玩泥巴似的非常简单，一顿操作猛如虎，回头一看代码加了一堆注解：@Controller @Autowired @Value，面向注解编程变成了大家不可缺少的操作。</p>
<p>想象一下如果没有注解Java程序员可以要哭瞎😭</p>
<p>既然注解（annotation）这么重要，用的这么爽，那注解的实现原理你知道么？我猜你只会用注解不会自己写注解（手动滑稽）。</p>
<p>好了，下面的内容带大家从零开始写一个注解，揭开注解神秘的面纱。</p>
<h1 id="原来注解不神秘"><a href="#原来注解不神秘" class="headerlink" title="原来注解不神秘"></a>原来注解不神秘</h1><p>注解用大白话来说就是一个标记或者说是特殊的注释，如果没有解析这些标记的操作那它啥也不是。</p>
<p>注解的格式如同类或者方法一样有自己特殊的语法，这个语法下文会详细介绍。</p>
<p>那如何去解析注解呢？这就要用到Java强大的反射功能了。反射大家应该都用过，可以通过类对象获取到这个类的各种信息比如成员变量、方法等，那注解标记能不能通过反射获取呢？当然可以了。</p>
<p>所以注解的原理其实很简单，本质上是通过反射功能动态获取注解标记，然后按照不同的注解执行不同的操作，比如@Autowired可以注入一个对象给变量赋值。</p>
<p>看到这里是不是很躁动啊，来吧自己也撸一个注解。</p>
<h1 id="造火箭啦，自己动手写一个注解"><a href="#造火箭啦，自己动手写一个注解" class="headerlink" title="造火箭啦，自己动手写一个注解"></a>造火箭啦，自己动手写一个注解</h1><p>便于大家理解，这里先引入一个场景：在线教育火了，经理让我写一个模块实现学生信息管理功能，考虑到分布式并发问题，经理让我务必加上分布式锁。</p>
<p>经理问我几天能搞定？我说至少3天。如是脑补了以下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新学生信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> student 学生对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true 更新成功，false 更新失败</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateStudentInfo</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">    <span class="comment">// 尝试获取分布式锁</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> <span class="string">&quot;student:&quot;</span> + student.getId();</span><br><span class="line">    <span class="keyword">if</span> (RedisTool.tryLock(lockKey, <span class="number">10</span>,</span><br><span class="line">            TimeUnit.SECONDS, <span class="number">5</span>)) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 这里写业务逻辑</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            RedisTool.releaseLock(lockKey);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取锁失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>经理走后我在思考，我能不能只花一天时间写完，剩下两天时间用来写博客划水呢？突然灵感来了，我可以把重复的代码逻辑抽出来用注解实现不就节省代码了，哈哈，赶紧写。</p>
<p>使用注解之后整个方法清爽了很多，HR小姐姐都夸我写的好呢。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableRedisLock(lockKey = &quot;student&quot;, expireTime = 10, timeUnit = TimeUnit.SECONDS, retryTimes = 5)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateStudentInfo</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">    <span class="comment">// 这里写业务逻辑</span></span><br><span class="line">    <span class="comment">// studentDao.update(student);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码已经写完上库了，现在我在划水写博客呢。是不是很简洁很优雅很牛逼，怎么做到的呢，主要分为三步：1打开冰箱门，2把大象放进去，3把冰箱门关好。好了，扯远了，大家接着往下看。</p>
<h2 id="第一步定义一个注解"><a href="#第一步定义一个注解" class="headerlink" title="第一步定义一个注解"></a>第一步定义一个注解</h2><div align="center">  <img data-src="https://cdn.jsdelivr.net/gh/SmileLionCoder/assets@main/202010/20201023233716.png" width="70%"/> </div><br>

<p>一个注解可以简单拆解为三个部分：</p>
<p>第一部分：注解体</p>
<p>注解的定义有点类似于接口（interface），只不过前面一个加了一个@符号，这个千万不能省。</p>
<p>第二部分：注解变量</p>
<p>注解变量的语法有点类似于接口里面定义的方法，变量名后面带一对括号，不同的是注解变量后面可以有默认值。另外返回值只能是Java基本类型、String类型或者枚举类，不可以是对象类型。</p>
<p>第三部分：元注解</p>
<p>元注解（meta-annotation）说白了就是给注解加注解的注解，是不是有点晕了，这种注解是JDK提前内置好的，可以直接拿来用的。不太懂也没有关系反正数量也不多，总共就4个，我们背下来吧：@Target @Retention @Documented @Inherited</p>
<ul>
<li>Target注解</li>
</ul>
<p>用来描述注解的使用范围，即被修饰的注解可以用在什么地方 。</p>
<p>注解可以用于修饰 packages、types（类、接口、枚举、注解类）、类成员（方法、构造方法、成员变量、枚举值）、方法参数和本地变量（如循环变量、catch参数），在定义注解类时使用了@Target 能够更加清晰的知道它能够被用来修饰哪些对象，具体的取值范围定义在ElementType.java 枚举类中。</p>
<p>比如上面我们写的Redis锁的注解就只能用于方法上了。</p>
<ul>
<li>Retention注解</li>
</ul>
<p>用来描述注解保留的时间范围，即注解的生命周期。在 RetentionPolicy 枚举类中定义了三个周期：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RetentionPolicy</span> &#123;</span><br><span class="line">    SOURCE, <span class="comment">// 源文件保留</span></span><br><span class="line">    CLASS,  <span class="comment">// 编译期保留，默认值</span></span><br><span class="line">    RUNTIME <span class="comment">// 运行期保留，可通过反射去获取注解信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>像我们熟知的@Override注解就只能保留在源文件中，代码编译后注解就消失了。<br>比如上面我们写的Redis锁的注解就保留到了运行期，运行的时候可以通过反射获取信息。</p>
<ul>
<li>Documented注解</li>
</ul>
<p>用来描述在使用 javadoc 工具为类生成帮助文档时是否要保留其注解信息，很简单不多解释了。</p>
<ul>
<li>Inherited注解</li>
</ul>
<p>被Inherited注解修饰的注解具有继承性，如果父类使用了被@Inherited修饰的注解，则其子类将自动继承该注解。</p>
<p>好了，这一步我们已经将注解定义好了，但是这个注解如何工作呢？接着看。</p>
<h2 id="第二步实现注解的业务逻辑"><a href="#第二步实现注解的业务逻辑" class="headerlink" title="第二步实现注解的业务逻辑"></a>第二步实现注解的业务逻辑</h2><p>在第一步中我们发现定义的注解（@EnableRedisLock）中没有业务逻辑，只有一些变量，别忘了我们的注解是要使能Redis分布式锁的功能，那这个注解到底是怎么实现加锁和释放锁的功能呢？这个就需要我们借助反射的强大功能了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisLockAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Around(value = &quot;@annotation(com.smilelioncoder.EnableRedisLock)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleRedisLock</span><span class="params">(ProceedingJoinPoint joinPoint)</span></span><br><span class="line">            <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// 通过反射获取到注解对象，可见反射非常重要的</span></span><br><span class="line">        <span class="type">EnableRedisLock</span> <span class="variable">redisLock</span> <span class="operator">=</span> ((MethodSignature) joinPoint.getSignature())</span><br><span class="line">                .getMethod()</span><br><span class="line">                .getAnnotation(EnableRedisLock.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取注解对象的变量值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> redisLock.lockKey();</span><br><span class="line">        <span class="type">long</span> <span class="variable">expireTime</span> <span class="operator">=</span> redisLock.expireTime();</span><br><span class="line">        <span class="type">TimeUnit</span> <span class="variable">timeUnit</span> <span class="operator">=</span> redisLock.timeUnit();</span><br><span class="line">        <span class="type">int</span> <span class="variable">retryTimes</span> <span class="operator">=</span> redisLock.retryTimes();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取锁</span></span><br><span class="line">        <span class="keyword">if</span> (tryLock(lockKey, expireTime, timeUnit, retryTimes)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// 获取锁成功继续执行业务逻辑</span></span><br><span class="line">                joinPoint.proceed();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                releseLock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里借助了切面的功能，将EnableRedisLock注解作为一个切点，只要方法上标注了这个注解就会自动执行这里的代码逻辑。</p>
<p>通过反射机制拿到注解对象后就可以执行加锁解锁的常用逻辑啦。Redis实现分布式锁相信大家已经很熟悉了，这里就不在啰嗦了。</p>
<h2 id="第三步在业务代码中尽情的使用注解"><a href="#第三步在业务代码中尽情的使用注解" class="headerlink" title="第三步在业务代码中尽情的使用注解"></a>第三步在业务代码中尽情的使用注解</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableRedisLock(lockKey = &quot;student&quot;, expireTime = 10, timeUnit = TimeUnit.SECONDS, retryTimes = 5)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">    <span class="comment">// 这里写业务逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在需要加锁的方法上直接加上注解就可以啦，怎么样是不是很简单呀，赶紧在你的项目中运用起来吧。<br>好了，自己写一个注解的内容就介绍到这里了，学会了吗？</p>
]]></content>
      <categories>
        <category>jdk</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>队列</tag>
        <tag>jdk</tag>
      </tags>
  </entry>
  <entry>
    <title>Stream流</title>
    <url>/2024/09/24/java/jdk/stream/</url>
    <content><![CDATA[<ul>
<li><a href="#1-stream%E6%98%AF%E4%BB%80%E4%B9%88">1. Stream是什么？</a></li>
<li><a href="#2-stream%E7%9A%84%E7%89%B9%E7%82%B9">2. Stream的特点</a></li>
<li><a href="#3-%E5%88%9B%E5%BB%BAstream%E5%AE%9E%E4%BE%8B%E7%9A%84%E6%96%B9%E6%B3%95">3. 创建Stream实例的方法</a></li>
<li><a href="#4-stream%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C">4. Stream常用操作</a></li>
<li><a href="#5-%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BD%BF%E7%94%A8stream%E9%87%8D%E6%9E%84%E8%80%81%E4%BB%A3%E7%A0%81">5. 实战：使用Stream重构老代码</a></li>
<li><a href="#6-%E4%BD%BF%E7%94%A8stream%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AF%AF%E5%8C%BA">6. 使用Stream常见的误区</a> <span id="more"></span></li>
</ul>
<blockquote>
<p>Java8 由Oracle在2014年发布，是继Java5之后最具革命性的版本了。<br>Java8吸收其他语言的精髓带来了函数式编程，lambda表达式，Stream流等一系列新特性，学会了这些新特性，可以让你实现高效编码优雅编码。</p>
</blockquote>
<h1 id="1-Stream是什么？"><a href="#1-Stream是什么？" class="headerlink" title="1. Stream是什么？"></a>1. Stream是什么？</h1><p>Stream是Java8新增的一个接口，允许以声明性方式处理数据集合。Stream不是一个集合类型不保存数据，可以把它看作是遍历数据集合的高级迭代器（Iterator）。</p>
<p>Stream操作可以像Builder一样逐步叠加，形成一条流水线。流水线一般由数据源+零或者多个中间操作+一个终端操作所构成。中间操作可以将流转换成另外一个流，比如使用filter过滤元素，使用map映射提取值。</p>
<p>Stream与lambda表达式密不可分，本文默认你已经掌握了lambda基础知识。</p>
<h1 id="2-Stream的特点"><a href="#2-Stream的特点" class="headerlink" title="2. Stream的特点"></a>2. Stream的特点</h1><ul>
<li>只能遍历（消费）一次。Stream实例只能遍历一次，终端操作后一次遍历就结束，再次遍历需要重新生成实例，这一点类似于Iterator迭代器。</li>
<li>保护数据源。对Stream中任何元素的修改都不会导致数据源被修改，比如过滤删除流中的一个元素，再次遍历该数据源依然可以获取该元素。</li>
<li>懒。filter, map 操作串联起来形成一系列中间运算，如果没有一个终端操作（如collect）这些中间运算永远也不会被执行。</li>
</ul>
<h1 id="3-创建Stream实例的方法"><a href="#3-创建Stream实例的方法" class="headerlink" title="3. 创建Stream实例的方法"></a>3. 创建Stream实例的方法</h1><p>（1）使用指定值创建Stream实例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// of为Stream的静态方法</span></span><br><span class="line">Stream&lt;String&gt; strStream = Stream.of(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;java8&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line"><span class="comment">// 或者使用基本类型流</span></span><br><span class="line"><span class="type">IntStream</span> <span class="variable">intStream</span> <span class="operator">=</span> IntStream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>（2）使用集合创建Stream实例（常用方式）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用guava库，初始化一个不可变的list对象</span></span><br><span class="line">ImmutableList&lt;Integer&gt; integers = ImmutableList.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// List接口继承Collection接口，java8在Collection接口中添加了stream方法</span></span><br><span class="line">Stream&lt;Integer&gt; stream = integers.stream();</span><br></pre></td></tr></table></figure>
<p>（3）使用数组创建Stream实例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化一个数组</span></span><br><span class="line">Integer[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="comment">// 使用Arrays的静态方法stream</span></span><br><span class="line">Stream&lt;Integer&gt; stream = Arrays.stream(array);</span><br></pre></td></tr></table></figure>
<p>（4）使用生成器创建Stream实例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随机生成100个整数</span></span><br><span class="line"><span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"><span class="comment">// 加上limit否则就是无限流了</span></span><br><span class="line">Stream&lt;Integer&gt; stream = Stream.generate(random::nextInt).limit(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>（5）使用迭代器创建Stream实例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 生成100个奇数，加上limit否则就是无限流了</span></span><br><span class="line">Stream&lt;Integer&gt; stream = Stream.iterate(<span class="number">1</span>, n -&gt; n + <span class="number">2</span>).limit(<span class="number">100</span>);</span><br><span class="line">stream.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>（6）使用IO接口创建Stream实例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取指定路径下文件信息，list方法返回Stream类型</span></span><br><span class="line">Stream&lt;Path&gt; pathStream = Files.list(Paths.get(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>
<h1 id="4-Stream常用操作"><a href="#4-Stream常用操作" class="headerlink" title="4. Stream常用操作"></a>4. Stream常用操作</h1><p>Stream接口中定义了很多操作，大致可以分为两大类，一类是中间操作，另一类是终端操作；</p>
<div align="center">  <img data-src="https://cdn.jsdelivr.net/gh/SmileLionCoder/assets@main/202010/20201018221358.png" width="500"/> </div><br>


<p><strong>（1）中间操作</strong></p>
<p>中间操作会返回另外一个流，多个中间操作可以连接起来形成一个查询。</p>
<p>中间操作有惰性，如果流上没有一个终端操作，那么中间操作是不会做任何处理的。</p>
<p>下面介绍常用的中间操作：</p>
<p><strong>map操作</strong></p>
<p>map是将输入流中每一个元素映射为另一个元素形成输出流。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化一个不可变字符串</span></span><br><span class="line">List&lt;String&gt; words = ImmutableList.of(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;java8&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line"><span class="comment">// 计算列表中每个单词的长度</span></span><br><span class="line">List&lt;Integer&gt; list = words.stream()</span><br><span class="line">        .map(String::length)</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"><span class="comment">// output: 5 5 6</span></span><br><span class="line">list.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p><strong>flatMap操作</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String[]&gt; list1 = words.stream()</span><br><span class="line">        .map(word -&gt; word.split(<span class="string">&quot;-&quot;</span>))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line"><span class="comment">// output: [Ljava.lang.String;@59f95c5d, </span></span><br><span class="line"><span class="comment">//             [Ljava.lang.String;@5ccd43c2</span></span><br><span class="line">list1.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>纳里？你预期是List<String>, 返回却是List&lt;String[]&gt;,  这是因为split方法返回的是String[]</p>
<p>这个时候你可以想到要将数组转成stream, 于是有了第二个版本</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;Stream&lt;String&gt;&gt; arrStream = words.stream()</span><br><span class="line">        .map(word -&gt; word.split(<span class="string">&quot;-&quot;</span>))</span><br><span class="line">        .map(Arrays::stream);</span><br><span class="line">        </span><br><span class="line"><span class="comment">// output: java.util.stream.ReferencePipeline$Head@2c13da15, </span></span><br><span class="line"><span class="comment">// java.util.stream.ReferencePipeline$Head@77556fd</span></span><br><span class="line">arrStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>还是不对，这个问题使用flatMap扁平流可以解决，flatMap将流中每个元素取出来转成另外一个输出流</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;String&gt; strStream = words.stream()</span><br><span class="line">        .map(word -&gt; word.split(<span class="string">&quot;-&quot;</span>))</span><br><span class="line">        .flatMap(Arrays::stream)</span><br><span class="line">        .distinct();</span><br><span class="line"><span class="comment">// output: hello java8 stream</span></span><br><span class="line">strStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p><strong>filter操作</strong></p>
<p>filter接收Predicate对象，按条件过滤，符合条件的元素生成另外一个流。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 过滤出单词长度大于5的单词，并打印出来</span></span><br><span class="line">List&lt;String&gt; words = ImmutableList.of(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;java8&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line">words.stream()</span><br><span class="line">        .filter(word -&gt; word.length() &gt; <span class="number">5</span>)</span><br><span class="line">        .collect(Collectors.toList())</span><br><span class="line">        .forEach(System.out::println);</span><br><span class="line"><span class="comment">// output: stream</span></span><br></pre></td></tr></table></figure>

<p><strong>（2）终端操作</strong></p>
<p>终端操作将stream流转成具体的返回值，比如List，Integer等。常见的终端操作有：foreach, min, max, count等。</p>
<p>foreach很常见了，下面举一个max的例子。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 找出最大的值</span></span><br><span class="line">List&lt;Integer&gt; integers = Arrays.asList(<span class="number">6</span>, <span class="number">20</span>, <span class="number">19</span>);</span><br><span class="line">integers.stream()</span><br><span class="line">        .max(Integer::compareTo)</span><br><span class="line">        .ifPresent(System.out::println);</span><br><span class="line"><span class="comment">// output: 20</span></span><br></pre></td></tr></table></figure>
<h1 id="5-实战：使用Stream重构老代码"><a href="#5-实战：使用Stream重构老代码" class="headerlink" title="5. 实战：使用Stream重构老代码"></a>5. 实战：使用Stream重构老代码</h1><p>假如有一个需求：过滤出年龄大于20岁并且分数大于95的学生。</p>
<p>使用for循环写法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;Student&gt; <span class="title function_">getStudents</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaoli&quot;</span>, <span class="number">18</span>, <span class="number">95</span>);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaoming&quot;</span>, <span class="number">21</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaohua&quot;</span>, <span class="number">19</span>, <span class="number">98</span>);</span><br><span class="line">    List&lt;Student&gt; studentList = Lists.newArrayList();</span><br><span class="line">    studentList.add(s1);</span><br><span class="line">    studentList.add(s2);</span><br><span class="line">    studentList.add(s3);</span><br><span class="line">    <span class="keyword">return</span> studentList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refactorBefore</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Student&gt; studentList = getStudents();</span><br><span class="line">    <span class="comment">// 使用临时list</span></span><br><span class="line">    List&lt;Student&gt; resultList = Lists.newArrayList();</span><br><span class="line">    <span class="keyword">for</span> (Student s : studentList) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.getAge() &gt; <span class="number">20</span> &amp;&amp; s.getScore() &gt; <span class="number">95</span>) &#123;</span><br><span class="line">            resultList.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// output: Student&#123;name=xiaoming, age=21, score=100&#125;</span></span><br><span class="line">    resultList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用for循环会初始化一个临时list用来存放最终的结果，整体看起来不够优雅和简洁。</p>
<p>使用lambda和stream重构后：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refactorAfter</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Student&gt; studentLists = getStudents();</span><br><span class="line">    <span class="comment">// output: Student&#123;name=xiaoming, age=21, score=100&#125;</span></span><br><span class="line">   studentLists.stream().filter(<span class="built_in">this</span>::filterStudents).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">filterStudents</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">    <span class="comment">// 过滤出年龄大于20岁并且分数大于95的学生</span></span><br><span class="line">    <span class="keyword">return</span> student.getAge() &gt; <span class="number">20</span> &amp;&amp; student.getScore() &gt; <span class="number">95</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用filter和方法引用使代码清晰明了，也不用声明一个临时list，非常方便。</p>
<h1 id="6-使用Stream常见的误区"><a href="#6-使用Stream常见的误区" class="headerlink" title="6. 使用Stream常见的误区"></a>6. 使用Stream常见的误区</h1><p>（1）误区一：重复消费stream对象</p>
<p>stream对象一旦被消费，不能再次重复消费。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; strings = Arrays.asList(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;java8&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; stream = strings.stream();</span><br><span class="line">stream.forEach(System.out::println); <span class="comment">// ok</span></span><br><span class="line">stream.forEach(System.out::println); <span class="comment">// IllegalStateException</span></span><br></pre></td></tr></table></figure>
<p>上述代码执行后报错：</p>
<p>java.lang.IllegalStateException: stream has already been operated upon or closed</p>
<p>（2）误区二：修改数据源</p>
<p>在流操作的过程中尝试添加新的string对象，结果报错：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; strings = Arrays.asList(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;java8&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line"><span class="comment">// expect: HELLO JAVA8 STREAM WORLD, but throw UnsupportedOperationException</span></span><br><span class="line">strings.stream()</span><br><span class="line">        .map(s -&gt; &#123;</span><br><span class="line">            strings.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> s.toUpperCase();</span><br><span class="line">        &#125;).forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>注意：一定不要在操作流的过程中修改数据源。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>java8 流式编程在一定程度上可以使代码变得优美，不过也要避开常见的坑，如：不要重复消费对象、不要修改数据源。</p>
]]></content>
      <categories>
        <category>jdk</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>jdk</tag>
        <tag>Stream</tag>
      </tags>
  </entry>
</search>
